{"version":3,"sources":["components/SupportedChains.module.scss","components/PendingSwapModal.module.scss","components/TokenInput.module.scss","components/HarvestRewards.module.scss","components/PendingSwapExchange.module.scss","components/PendingSwapTimeline.module.scss","components/StakeForm.module.scss","components/FarmTabs.module.scss","components/BottomMenu.module.scss","components/FarmFooter.module.scss","components/FarmPage.module.scss","pages/Farm.module.scss","pages/Farms.module.scss","pages/Pools.module.scss","pages/Stake.module.scss","components/BackButton.module.scss","components/Divider.module.scss","i18n.ts","connectors/index.ts","constants/index.ts","assets/icons/aleth.svg","assets/icons/alusd.svg","assets/icons/atust.svg","assets/icons/dai.svg","assets/icons/fei.svg","assets/icons/frax.svg","assets/icons/lusd.svg","assets/icons/metamask.svg","assets/icons/renbtc.svg","assets/icons/rose-atust.svg","assets/icons/rose-frax.svg","assets/icons/rose.svg","assets/icons/srose.svg","assets/icons/logo_24.svg","assets/icons/sbtc.svg","assets/icons/seth.svg","assets/icons/susd.svg","assets/icons/tbtc.svg","assets/icons/usdc.svg","assets/icons/usdt.svg","assets/icons/veth2.svg","assets/icons/walletconnect.svg","assets/icons/wbtc.svg","assets/icons/weth.svg","assets/icons/wcusd.png","utils/getEtherscanLink.ts","utils/notifyHandler.ts","components/BottomMenu.tsx","utils/parseStringToBigNumber.ts","utils/numberInputState.ts","state/user.ts","utils/index.ts","hooks/index.ts","hooks/useContract.ts","hooks/usePoolData.ts","components/ConfirmTransaction.tsx","assets/loading.gif","components/CheckboxInput.tsx","components/ToolTip.tsx","components/AdvancedOptions.tsx","components/BackButton.tsx","components/LPStakingBanner.tsx","components/Modal.tsx","components/MyShareCard.tsx","components/PoolInfoCard.tsx","components/Button.tsx","components/HighPriceImpactConfirmation.tsx","utils/gas.ts","utils/slippage.ts","utils/priceImpact.ts","components/ReviewDeposit.tsx","components/TokenInput.tsx","components/ThemeChanger.tsx","components/Copy.tsx","hooks/useCopyClipboard.ts","components/Identicon.tsx","utils/dateTime.ts","utils/getPoolByAddress.ts","components/Transactions.tsx","utils/shortenAddress.ts","hooks/usePoller.ts","state/wallet/hooks.ts","components/AccountDetails.tsx","utils/googleAnalytics.ts","components/ConnectWallet.tsx","components/SupportedChains.tsx","hooks/useAddNetworkToMetamask.ts","components/Web3Status.tsx","hooks/useAddTokenToMetamask.ts","components/TopMenu.tsx","components/DepositPage.tsx","utils/checkAndApproveTokenForTrade.ts","state/application.ts","pages/Deposit.tsx","hooks/useApproveAndDeposit.ts","hooks/useTokenFormState.ts","components/FarmFooter.tsx","components/StakeForm.tsx","utils/checkTokenAllowance.ts","hooks/useCheckTokenRequiresApproval.ts","components/FarmTabs.tsx","hooks/useApproveAndDepositFarm.tsx","hooks/useWithdrawFarm.ts","components/AnimateNumber.jsx","hooks/useWindowSize.ts","components/HarvestRewards.tsx","components/StakeDetails.tsx","components/FarmPage.tsx","hooks/useEarnedRewards.ts","hooks/useFarmExit.ts","hooks/useClaimReward.ts","hooks/useCalculateFarmDeposited.ts","hooks/useFarmData.ts","pages/Farm.tsx","components/FarmsOverview.tsx","pages/Farms.tsx","hooks/usePendingSwapData.ts","providers/PendingSwapsProvider.tsx","components/PoolOverview.tsx","pages/Pools.tsx","components/StakeLockedTimer.tsx","hooks/useStakeStats.ts","components/StakePage.tsx","utils/fetchBlockTransactions.ts","hooks/useLastStakedTime.ts","pages/Stake.tsx","hooks/useApproveAndStake.ts","hooks/useApproveAndUnstake.ts","hooks/useCalculateSwapPairs.ts","hooks/usePoolsTVL.ts","assets/icons/info.svg","components/Divider.tsx","components/SearchSelect.tsx","components/SwapInput.tsx","hooks/useDetectOutsideClick.ts","components/PendingSwapExchange.tsx","assets/icons/arrowDown.svg","assets/icons/check.svg","assets/icons/clock.svg","components/PendingSwapTimeline.tsx","assets/icons/thinArrowDown.svg","utils/gasEstimate.ts","components/ReviewVirtualSwapSettlement.tsx","components/PendingSwapModal.tsx","assets/icons/icon_down.svg","components/ReviewSwap.tsx","components/SwapPage.tsx","pages/Swap.tsx","hooks/useApproveAndSwap.ts","components/Web3ReactManager/index.tsx","components/RadioButton.tsx","components/ReviewWithdraw.tsx","components/WithdrawPage.tsx","hooks/useWithdrawFormState.ts","pages/Withdraw.tsx","hooks/useApproveAndWithdraw.ts","utils/getSwapStats.ts","utils/updateTokenPrices.ts","pages/App.tsx","utils/fetchFarmStats.ts","theme/index.ts","theme/components/index.ts","theme/components/button.ts","theme/components/tabs.ts","theme/components/input.ts","state/index.ts","index.tsx","utils/getLibrary.ts","components/StakeDetails.module.scss","components/AdvancedOptions.module.scss","components/FarmsOverview.module.scss","components/SearchSelect.module.scss","components/StakeLockedTimer.module.scss","components/StakePage.module.scss","components/SwapInput.module.scss"],"names":["module","exports","i18next","use","Fetch","LanguageDetector","initReactI18next","init","backend","loadPath","requestOptions","cache","react","useSuspense","fallbackLng","load","preload","keySeparator","interpolation","escapeValue","NETWORK_URL","process","NETWORK_CHAIN_ID","parseInt","networkLibrary","network","NetworkConnector","urls","ChainId","PoolTypes","injected","InjectedConnector","supportedChainIds","walletconnect","WalletConnectConnector","rpc","bridge","qrcode","NetworkContextName","STABLECOIN_POOL_V2_NAME","VETH2_POOL_NAME","SUSD_METAPOOL_NAME","TBTC_METAPOOL_NAME","WCUSD_METAPOOL_NAME","FRAX_STABLES_LP_POOL_NAME","FRAX_METAPOOL_NAME","STAKED_ROSE_LP_POOL_NAME","UST_METAPOOL_NAME","STABLES_FARM_NAME","FRAX_METAPOOL_FARM_NAME","UST_METAPOOL_FARM_NAME","ROSE_PAD_NLP_FARM_NAME","ROSE_FRAX_NLP_FARM_NAME","Token","addresses","decimals","symbol","geckoId","name","icon","isSynthetic","isLPToken","this","BLOCK_TIME","SYNTHETIX_EXCHANGE_RATES_CONTRACT_ADDRESSES","MAINNET","ROPSTEN","HARDHAT","AURORA_TESTNET","AURORA_MAINNET","BRIDGE_CONTRACT_ADDRESSES","STABLECOIN_SWAP_V2_ADDRESSES","FRAX_STABLES_LP_ADDRESSES","FRAX_METAPOOL_ADDRESSES","UST_METAPOOL_ADDRESSES","VETH2_SWAP_ADDRESSES","SUSD_SWAP_TOKEN_CONTRACT_ADDRESSES","STABLECOIN_SWAP_TOKEN_CONTRACT_ADDRESSES","STABLECOIN_SWAP_V2_TOKEN_CONTRACT_ADDRESSES","WCUSD_SWAP_TOKEN_CONTRACT_ADDRESSES","BTC_SWAP_TOKEN_CONTRACT_ADDRESSES","BTC_SWAP_V2_TOKEN_CONTRACT_ADDRESSES","TBTC_SWAP_TOKEN_CONTRACT_ADDRESSES","VETH2_SWAP_TOKEN_CONTRACT_ADDRESSES","ALETH_SWAP_TOKEN_CONTRACT_ADDRESSES","D4_SWAP_TOKEN_CONTRACT_ADDRESSES","FRAX_STABLES_LP_TOKEN_CONTRACT_ADDRESSES","FRAX_METAPOOL_LP_TOKEN_CONTRACT_ADDRESSES","UST_METAPOOL_LP_TOKEN_CONTRACT_ADDRESSES","ROSE_PAD_NLP_TOKEN_CONTRACT_ADDRESSES","ROSE_FRAX_NLP_TOKEN_CONTRACT_ADDRESSES","SROSE_LP_TOKEN_CONTRACT_ADDRESSES","STABLECOIN_SWAP_V2_TOKEN","saddleLogo","roseLogo","FRAX_STABLES_LP_TOKEN","roseFraxLogo","FRAX_METAPOOL_LP_TOKEN","UST_METAPOOL_LP_TOKEN","roseAtust","ROSE_PAD_NLP_TOKEN","ROSE_FRAX_NLP_TOKEN","WCUSD","sRoseLogo","SUSD","susdLogo","DAI","daiLogo","USDC","usdcLogo","USDT","usdtLogo","STABLECOIN_POOL_TOKENS","TBTC_V2","tbtcLogo","WBTC","wbtcLogo","RENBTC","renbtcLogo","SBTC","sbtcLogo","WETH","wethLogo","FRAX","veth2Logo","alethLogo","sethLogo","alusdLogo","feiLogo","fraxLogo","UST","atustLogo","ROSE_CONTRACT_ADDRESSES","lusdLogo","ROSE","SROSE_CONTRACT_ADDRESSES","SROSE","ROSE_FARM_STABLES_ADDRESSES","FRAX_METAPOOL_FARM_ADDRESSES","UST_METAPOOL_FARM_ADDRESSES","ROSE_PAD_NLP_FARM_ADDRESSES","ROSE_FRAX_NLP_FARM_ADDRESSES","FRAX_METAPOOL_DEPOSIT_ADDRESSES","UST_METAPOOL_DEPOSIT_ADDRESSES","FRAX_STABLES_LP_POOL_TOKENS","FRAX_METAPOOL_TOKENS","UST_METAPOOL_TOKENS","POOLS_MAP","lpToken","poolTokens","type","USD","route","isOutdated","underlyingPoolTokens","underlyingPool","metaSwapAddresses","FARMS_MAP","poolUrl","isRose","poolName","isMetaPool","Set","has","SWAP_TYPES","ROSE_TOKENS_MAP","rose","stRose","TOKENS_MAP","Object","keys","reduce","acc","pool","newAcc","forEach","token","LPTOKEN_TO_POOL_MAP","concat","TRANSACTION_TYPES","getIsVirtualSwap","swapType","SYNTH_TO_SYNTH","SYNTH_TO_TOKEN","TOKEN_TO_SYNTH","TOKEN_TO_TOKEN","SWAP_CONTRACT_GAS_ESTIMATES_MAP","INVALID","BigNumber","from","DIRECT","SUPPORTED_WALLETS","METAMASK","metamaskIcon","connector","WALLET_CONNECT","walletconnectIcon","isMobile","SUPPORTED_CHAINS","getEtherscanLink","data","notifyNetworks","chainId","notify","Notify","isChainSupportedByNotify","dappId","REACT_APP_NOTIFY_DAPP_ID","networkId","desktopPosition","darkMode","notifyHandler","hash","emitter","on","transaction","message","t","context","link","BottomMenu","className","styles","bottommenu","socials","href","target","rel","parseStringToBigNumber","valueRaw","precision","fallback","valueSafe","isFallback","parseUnits","value","numberInputStateCreator","inputValue","isBigNumber","isEmpty","isValid","formatUnits","toString","GasPrices","Slippages","Deadlines","initialState","userSwapAdvancedMode","userPoolAdvancedMode","userDarkMode","gasPriceSelected","Standard","slippageSelected","OneTenth","infiniteApproval","transactionDeadlineSelected","Twenty","gasCustomStateCreator","Zero","slippageCustomStateCreator","pow","mul","userSlice","createSlice","reducers","updateSwapAdvancedMode","state","action","payload","updatePoolAdvancedMode","updateDarkMode","updateGasPriceCustom","gasCustom","updateGasPriceSelected","Custom","updateSlippageSelected","slippageCustom","updateSlippageCustom","updateInfiniteApproval","updateTransactionDeadlineSelected","transactionDeadlineCustom","updateTransactionDeadlineCustom","actions","isAddress","getAddress","getContract","address","ABI","library","account","AddressZero","Error","Contract","getSigner","connectUnchecked","getProviderOrSigner","formatBNToShortString","bn","nativePrecision","bnStr","numLen","length","div","Math","floor","mod","substr","formatBNToString","nativePrecison","decimalPlaces","fullPrecision","decimalIdx","indexOf","undefined","slice","formatBNToPercentString","shiftBNDecimals","shiftAmount","calculateExchangeRate","amountFrom","tokenPrecisionFrom","amountTo","tokenPrecisionTo","gt","formatDeadlineToNumber","deadlineSelected","deadlineCustom","deadline","Ten","Thirty","Forty","commify","str","parts","split","partA","partB","commaAArr","Array","commaAIdx","i","revIdx","commifiedA","join","intersection","set1","set2","filter","item","getTokenByAddress","values","find","toLowerCase","calculatePrice","amount","tokenPrice","isNaN","toLocaleString","useGrouping","toFixed","toHex","num","imageIconToUrl","tokenIconPath","host","window","location","origin","useActiveWeb3React","useWeb3ReactCore","contextNetwork","active","useContract","withSignerIfPossible","useMemo","error","console","useFarmContract","farmName","farm","JSON","stringify","ROSE_STABLES_FARM_ABI","abi","useRoseContract","ERC20_ABI","useStRoseContract","SROSE_ABI","useBridgeContract","BRIDGE_CONTRACT_ABI","useTokenContract","usePoolContract","ROSE_STABLES_POOL_ABI","ROSE_FRAX_POOL_ABI","FRAX_META_POOL_ABI","useLPTokenContract","ROSE_STABLES_LP_ABI","ROSE_FRAX_LP_ABI","useLPTokenContractForFarm","useAllContracts","daiContract","usdcContract","usdtContract","fraxContract","roseStablesLPContract","roseContract","stroseContract","ustContract","some","Boolean","emptyPoolData","adminFee","aParameter","apy","reserve","swapFee","tokens","totalLocked","utilization","virtualPrice","volume","aprs","lpTokenPriceUSD","isPaused","usePoolData","poolContract","useSelector","application","tokenPricesUSD","lastTransactionTimes","swapStats","lastDepositTime","lastWithdrawTime","lastSwapTime","lastMigrateTime","useState","poolData","setPoolData","useEffect","calculatePctOfTotalShare","a","lpTokenAmount","totalLpTokenBalance","isZero","effectivePoolTokens","POOL","lpTokenContract","LPTOKEN_UNGUARDED_ABI","ethcallProvider","Provider","multicallAddress","get_virtual_price","log","multicallPoolContract","ROSE_STABLES_POOL","A","fee","poolTokenBalances","map","_","index","balances","all","multicallResFormatted","tokenBalances","balance","Promise","balanceOf","totalSupply","userLpTokenBalance","tokenBalancesSum","sum","b","add","tokenBalancesUSD","String","tokenBalancesUSDSum","userShare","userPoolTokenBalances","userPoolTokenBalancesSum","userPoolTokenBalancesUSD","userPoolTokenBalancesUSDSum","percent","userPoolTokens","share","underlyingTokensAmount","usdBalance","lpTokenBalance","amountsStaked","getPoolData","ModalType","ConfirmTransaction","title","CONFIRM","description","children","useTranslation","classNames","failed","FAILED","success","SUCCESS","src","loadingGif","alt","CheckboxInput","checked","onChange","xmlns","viewBox","aria-hidden","focusable","fill","strokeWidth","d","ToolTip","content","AdvancedOptions","dispatch","useDispatch","user","advanced","advancedOptions","onClick","triangle","upsideDown","width","height","fillRule","clipRule","divider","tableContainer","show","parameter","label","inputGroup","options","selected","One","e","BackButton","props","wrapperClass","buttonText","to","arrowLeft","LPStakingBanner","stakingLink","Modal","isOpen","onClose","currentTarget","stopPropagation","MyShareCard","formattedDecimals","formattedData","shareAmount","key","coin","stakingUrls","keep","sharedStake","alchemix","PoolInfoCard","poolType","Button","kind","size","buttonProps","HighPriceImpactConfirmation","onCheck","gasBNFromState","gasPricesGwei","gasSelected","gasPrice","gasStandard","gasFast","gasInstant","Fast","Instant","formatGasToString","_applySlippage","numerator","denominator","sub","addSlippage","subtractSlippage","formatSlippageToString","isHighPriceImpact","priceImpact","negOne","lte","calculatePriceImpact","tokenInputAmount","tokenOutputAmount","isWithdraw","ReviewDeposit","onConfirm","transactionData","hasConfirmedHighPriceImpact","setHasConfirmedHighPriceImpact","isHighPriceImpactTxn","items","totalAmount","style","shareOfPool","txnGasCost","valueUSD","singleTokenPriceUSD","prevState","disabled","TokenInput","tokenUSDValue","max","readonly","parseFloat","balanceContainer","tokenInputContainer","id","tokenSymbolAndName","boldText","smallText","autoComplete","autoCorrect","placeholder","spellCheck","readOnly","newValue","replace","lastIndexOf","parsedValue","periodIndex","isValidInput","isValidPrecision","onFocus","select","ThemeChanger","useColorMode","colorMode","toggleColorMode","document","body","classList","remove","CopyHelper","timeout","isCopied","setIsCopied","staticCopy","useCallback","text","didCopy","copy","hide","setTimeout","clearTimeout","useCopyClipboard","setCopied","toCopy","StyledIdenticonContainer","styled","Identicon","ref","useRef","current","innerHTML","appendChild","Jazzicon","getFormattedShortTime","timestamp","timestampNumber","Date","toLocaleTimeString","month","day","hour","minute","getPoolByAddress","targetAddress","Transactions","transactionList","setTransactionList","fetchTxn","newTransactionList","time24Hrs","now","query","fetch","method","headers","then","res","json","result","addLiquidityEvents","removeLiquidityEvents","swaps","event","swap","push","object","time","exchanges","soldId","boughtId","soldToken","boughtToken","sort","catch","txn","fontSize","shortenAddress","chars","parsed","substring","usePoller","fn","delay","savedCallback","setInterval","clearInterval","useTokenBalancesHelper","tokenMap","setBalances","balanceCalls","c","getBalance","ethBalance","ETH","pollBalances","usePoolTokenBalances","useRoseTokenBalances","AccountDetail","openOptions","roseBalanceFormatted","connectorName","clipPath","logEvent","params","gtag","debug","ConnectWallet","activate","useWeb3React","wallet","UnsupportedChainIdError","SupportedChains","addNetwork","ethereum","request","code","chainName","rpcUrls","useAddNetworkToMetamask","supportedChains","chainList","entries","val","chain","chainInfo","variant","textStyle","buttonGroupIcon","WALLET_VIEWS","chainIdToName","Web3Status","modalOpen","setModalOpen","walletConnected","setWalletConnected","isAuthorized","walletView","setWalletView","useAddTokenToMetamask","image","TopMenu","activeTab","addRoseToken","addStRoseToken","DepositPage","exceedsWallet","myShareData","onChangeTokenInputValue","onConfirmTransaction","currentModal","setCurrentModal","validDepositAmount","shouldDisplayWrappedOption","apr","Trans","i18nKey","textDecoration","gte","py","display","status","checkAndApproveTokenForTrade","srcTokenContract","swapAddress","spenderAddress","spendingValue","approve","cleanupOnStart","callbacks","onTransactionStart","call","approvalTransaction","wait","confirmedTransaction","onTransactionSuccess","onTransactionError","eq","tokenName","allowance","existingAllowance","MaxUint256","applicationSlice","updateGasPrices","updateFarmStats","farmStats","updateTokensPricesUSD","updateLastTransactionTimes","updateSwapStats","formattedPayload","APY","TVL","ODV","oneDayVolume","tvl","Deposit","approveAndDeposit","tokenContracts","metaSwapContract","FRAX_POOL_DEPOSIT","shouldDepositWrapped","effectiveSwapContract","approveSingleToken","tokenContract","effectivePoolContract","txnAmounts","poolToken","minToMint","calc_token_amount","add_liquidity","spendTransaction","receipt","useApproveAndDeposit","userShareData","allTokens","tokenInputStateCreators","React","tokenFormState","setTokenFormState","newState","convertedNewState","useTokenFormState","updateTokenFormState","setShouldDepositWrapped","newTokenPricesUSD","underlyingPoolData","underlyingTokenUSDValue","estDepositLPTokenAmount","setEstDepositLPTokenAmount","setPriceImpact","isMetaSwap","lt","tokenInputSum","depositLPTokenAmount","calculateMaxDeposits","depositTransaction","poolLpToken","totalValueUSD","TOTAL_AMOUNT_DECIMALS","usdPriceBN","toTotalValueUSD","gasAmount","buildTransactionData","onToggleDepositWrapped","FarmFooter","farmFooter","goBack","StakeForm","fieldName","tokenIcon","isLoading","submitButtonLabel","formDescription","handleSubmit","handleInputChanged","handlePreSubmit","handlePostSubmit","validator","inputContainer","initialValues","onSubmit","resetForm","validate","field","form","isInvalid","errors","touched","pointerEvents","color","handleChange","setFieldTouched","setFieldValue","dirty","mt","as","stakeInfoContainer","infoMessage","submitButton","checkTokenAllowance","useCheckTokenRequiresApproval","dstTokenContract","approved","setApproved","loading","setLoading","timer","setTimer","checkApproval","newTimer","isApproved","FarmTabs","lpTokenName","deposited","lpTokenIcon","handleModal","farmContract","amountToStake","stake","tx","useApproveAndDepositFarm","withdraw","amountToWithdraw","useWithdrawFarm","checkLpTokenApproved","validateAmount","exec","farmTabs","isFitted","mb","farmTitle","generalValidation","usePrevious","DecimalColumn","NumberColumn","digit","delta","position","setPosition","animationClass","setAnimationClass","previousDigit","columnContainer","setSize","useLayoutEffect","updateSize","innerWidth","innerHeight","addEventListener","removeEventListener","useWindowSize","number","clientHeight","motion","animate","y","onAnimationComplete","AnimatingNumber","numArray","reverse","formatForDisplay","previousNumber","layout","HarvestRewards","rewardBalance","harvestRewards","harvestTitle","buttonWrapper","APPROVE","StakeDetails","balanceView","stakedView","stats","stakeDetailsContainer","stakeDetails","row","balanceDetails","statsDetails","statLabel","statValue","statRow","FarmPage","formattedBalance","formattedDeposited","rewardsEarned","setRewardsEarned","earned","pollRewards","useEarnedRewards","exit","useFarmExit","getReward","useClaimReward","formattedTvl","updateModal","modalType","farmPage","approveButtons","useCalculateFarmDeposited","depositedBalance","setDepositedBalance","calculateDeposit","emptyFarmData","useFarmData","farmData","setFarmData","getFarmData","Farm","container","FarmTag","tagProps","tag","FarmsOverview","farmRoute","formattedApr","farmsOverview","titleBox","flexWrap","justifyContent","minWidth","mr","balanceInfo","gap","tokenBalanceText","tokenBalanceValue","farmDescription","external","farmButton","Farms","BridgePendingSwapTypes","farms","VIRTUAL_SWAP_TOPICS","fetchAndPopulatePendingSwaps","bridgeContract","setState","startBlock","eventFilters","topic","filters","queryFilter","events","flat","fetchPendingSwapInfo","fetchedPendingSwaps","pendingSwaps","fetchAndPopulateWithdraws","eventFilter","parseWithdrawFromEvent","withdraws","existingWithdraws","itemId","fetchAndPopulateSettlements","parseSettlementFromEvent","settlements","settlement","existingSettlements","args","fromToken","settleFrom","toToken","settleTo","getBlock","fromAmount","settleFromAmount","toAmount","settleToAmount","transactionHash","synthToken","synth","synthAmount","pendingSwap","getPendingSwapInfo","pendingSwapInfo","eventBlock","pendingSwapType","TokenToSynth","SynthToToken","TokenToToken","synthTokenFrom","tokenTo","settleableAtTimestamp","secsLeft","secondsRemaining","ceil","synthBalance","removeItemFromState","omit","usePendingSwapData","queryStartBlock","round","pendingSwapEventListener","itemIdArg","fetchedPendingSwap","existingItemId","settleEventListener","newPendingSwapBalance","prevSettlements","txnsSet","withdrawEventListener","prevWithdraws","virtualSwapTopicFilters","settleFilter","withdrawFilter","attachPendingSwapEventListeners","fetchExistingEvents","PendingSwapsContext","createContext","PendingSwapsProvider","PoolOverview","poolRoute","onClickMigrate","shouldMigrate","userBalanceUSD","hasShare","isMetapool","outdated","Tag","includes","replaceAll","Pools","usdPoolV2Data","usdV2UserShareData","fraxStablesPoolData","fraxStablesUserShareData","fraxMetaPoolData","fraxMetaPoolUserShareData","ustMetaPoolData","ustMetaPoolUserShareData","getPropsForPool","poolsPage","migration","aMigration","aIsOutdated","bMigration","bIsOutdated","poolProps","StakeLockedTimer","timeLeft","locked","in","stakeLockWrapper","offsetY","messageWrapper","bgColor","closeOnClick","unlocked","stakeLockTimer","lockMessage","toISOString","timeUnits","emptyState","priceRatio","totalRoseStaked","priceOfRose","StakePage","staked","roseTokenIcon","stRoseTokenIcon","approveStake","approveUnstake","stakeStats","setStakeStats","retry","strose_rose_ratio","strose_tvl","total_rose_staked","price_of_rose","useStakeStats","checkRoseApproved","stakePage","stakeForm","stakeTitle","pill","glowPill","colorPill","Number","blockTxnsUri","accountAddress","startTimestamp","fetchBlockTxns","daysOffset","setDate","getDate","getTime","fetchTokenTransfers","contractAddress","tokenTransferTxnsUri","retries","txnData","stRoseAddress","filteredTxnData","blockNumber","tokenTransferData","timeStamp","useLastStakedTime","lastStakedTime","setLastStakedTime","lastStakeTxn","fetchLastStakedTime","stakedTime","err","Stake","stRoseContract","mint","useApproveAndStake","unstake","amountToUnStake","burn","useApproveAndUnstake","diff","setDiff","lastStaked","useCountDown","tokenBalanceDetails","roseToken","stRoseToken","start","SWAP_TYPES_ORDERED_ASC","useCalculateSwapPairs","pairCache","setPairCache","poolTVLs","poolTvls","setPoolTvls","pools","supplyCalls","p","tvls","tvlsUSD","tvlAmount","tokenValue","BTC","fetchTVLs","usePoolTVLs","sortedPools","aTVL","bTVL","tokenToPools","poolsSortedByTVL","tokenToPoolsMapSorted","cacheHit","swapPairs","getTradingPairsForToken","buildSwapSideData","tokenIndex","findIndex","tokensMap","poolsMap","tokenToPoolsMap","originToken","synthPoolsSet","originTokenPoolsSet","originPoolsSynthSet","tokenToSwapDataMap","swapData","tokenPoolsSet","tokenPoolsSynthSet","sharedPoolsSet","tradePool","originPool","destinationPool","middleSynth","originSynth","destinationSynth","metaSwapPool","existingTokenSwapData","existingSwapIdx","newSwapIdx","_extends","assign","arguments","source","prototype","hasOwnProperty","apply","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgInfo","_ref","svgRef","titleId","ForwardRef","Divider","SearchSelect","tokensData","onSelect","searchTerm","setSearchTerm","activeIndex","setActiveIndex","inputRef","focusedItemRef","focus","scrollIntoView","filteredTokens","lastSelectableIndex","lastAvailableIndex","isAvailable","searchSelect","nextActiveIndex","onKeyDown","prev","min","listContainer","ListItem","isActive","listItem","isVirtualSwap","classnames","isUnavailable","tagWrapper","unavailableTag","virtualSwapTag","textMinor","SwapInput","elementRef","callback","inputValueUSD","isSwapFrom","onChangeAmount","isDropdownOpen","setIsDropdownOpen","wrapperRef","handleClick","contains","preventDefault","handleKeyPress","handleSelect","selectedToken","swapInputContainer","selectGroup","hoverPointer","tabIndex","tokenNameContainer","symbolArrowContainer","textBoldPurple","dropdownContainer","PendingSwapExchange","onPendingSwapSettlement","valueBN","inputState","setInputState","formattedSynthBalance","settle","exchangeWrapper","stepWrapper","balanceWrapper","cleanedValue","isInputNumber","buttonGroup","SvgArrowDown","SvgCheck","strokeMiterlimit","SvgClock","PendingSwapTimeline","minutesRemaining","hasEvents","timeline","withLine","testId","count","nameFrom","nameTo","formattedAmount","TimelineStep","iconEl","timelineStep","inactive","data-testid","Line","timelineLine","SvgThinArrowDown","calculateGasEstimate","methodName","ReviewVirtualSwapSettlement","exchangeRateInfo","gasValueUSD","isWithdrawAction","pair","exchangeRate","PendingSwapModal","settlementState","setSettlementState","calculatedTokenAmount","setCalculatedTokenAmount","currentStep","setCurrentStep","calcCompleteToToken","calculatedAmount","calcAmount","handlePendingSwapSettlement","handleConfirmSettlement","txnArgs","completeToToken","completeToSynth","table","virtualSwapModal","headerContent","centerContent","footerContent","about","DirectSwapTokens","iconDown","VirtualSwapTokens","isFirst","isLast","grey","step","ReviewSwap","SwapPage","tokenOptions","fromState","toState","onChangeFromToken","onChangeFromAmount","onChangeToToken","onClickReverseExchangeDirection","activePendingSwap","setActivePendingSwap","formattedPriceImpact","formattedExchangeRate","formattedRoute","isHighSlippage","amtStr","rate","stroke","pb","showError","EMPTY_FORM_STATE","valueSynth","currentSwapPairs","Swap","approveAndSwap","addressToApprove","amountMediumSynth","tokenToToken","swapTransaction","utils","formatBytes32String","synthToToken","tokenToSynth","exchange_underlying","exchange","useApproveAndSwap","snxEchangeRatesContract","SYNTHETIX_EXCHANGE_RATE_CONTRACT_ABI","useSynthetixExchangeRatesContract","calculateSwapPairs","pendingSwapData","useContext","formState","setFormState","prevFormState","setPrevFormState","swapContract","sortTokenOptions","calculateSwapAmount","debounce","formStateArg","cleanedFormFromValue","amountToGive","tokenFrom","amountToReceive","calcTokenToToken","amountOutSynth","amountOutToken","calcSynthToToken","calcTokenToSynth","get_dy_underlying","get_dy","effectiveValue","toValueUSD","handleReverseExchangeDirection","activeSwapPair","isValidSwap","amountA","amountB","Web3ReactManager","networkActive","networkError","activateNetwork","triedEager","tried","setTried","useEagerConnect","suppress","handleChainChanged","handleAccountsChanged","accounts","removeListener","useInactiveListener","showLoader","setShowLoader","RadioButton","ReviewWithdraw","isHighSlippageTxn","rates","WithdrawPage","onFormChange","formStateData","reviewData","sliderValue","setSliderValue","showTooltip","setShowTooltip","setIsOpen","noShare","hidden","withdrawType","defaultValue","v","onMouseEnter","onMouseLeave","ml","bg","hasArrow","placement","tokenSymbol","lpTokenAmountToSpend","gas","IMBALANCE","ALL","Withdraw","tokenInputsEmptyState","formEmptyState","percentage","tokenInputs","calculateAndUpdateDynamicFields","percentageRaw","effectiveUserLPTokenBalance","inputCalculatedLPTokenAmount","nextState","calc_withdraw_one_coin","tokenAmount","tokenSymbolInput","valueInput","newTokenInputs","activeInputTokens","finalState","pendingTokenInput","every","stateValue","useWithdrawFormState","withdrawFormState","updateWithdrawFormState","approveAndWithdraw","allowanceAmount","remove_liquidity","remove_liquidity_imbalance","remove_liquidity_one_coin","useApproveAndWithdraw","estWithdrawBonus","setEstWithdrawBonus","withdrawLPTokenAmount","calculateWithdrawBonus","shareToken","reviewWithdrawData","slippage","fetchSwapStatsNow","dispatchUpdate","otherTokens","VETH2","KEEP","SGT","ALCX","getVeth2Price","etherPrice","SWAP_ABI","calculateSwap","veth2ToEthRate","eth","vEth2Price","App","config","GasAndTokenPrices","exact","path","component","render","fetchAndUpdateTokensPrice","tokenIds","encodeURIComponent","otherTokensResult","usd","alETH","price_of_strose","fetchTokenPricesUSD","fetchAndUpdateSwapStats","fetchSwapStats","fetchAndUpdateFarmStats","farm_tvl","fetchFarmStats","overrides","initialColorMode","useSystemColorMode","colors","red","50","100","200","300","400","500","600","700","800","900","teal","purple","gold","fonts","heading","mono","components","variants","primary","opacity","transparentize","theme","border","cursor","boxShadow","borderRadius","letterSpacing","fontWeight","padding","_hover","_disabled","_active","_focus","light","Tabs","tab","_selected","Input","hasErrorColor","borderBottom","borderColor","px","_readOnly","userSelect","_invalid","extendTheme","PERSISTED_KEYS","stateFromStorage","states","store","configureStore","reducer","middleware","getDefaultMiddleware","thunk","save","preloadedState","merge","userInitialState","Web3ProviderNetwork","createWeb3ReactRoot","autoRefreshOnNetworkChange","ReactDOM","chakraTheme","StrictMode","getLibrary","provider","Web3Provider","pollingInterval","getDefaultProvider","getElementById"],"mappings":"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","file":"static/js/main.8382a832.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"supportedChains\":\"SupportedChains_supportedChains__YpGku\",\"textStyle\":\"SupportedChains_textStyle__38u-o\",\"buttonGroupIcon\":\"SupportedChains_buttonGroupIcon__2Pk1o\",\"chainList\":\"SupportedChains_chainList__1pWDw\",\"chain\":\"SupportedChains_chain___yER5\",\"chainInfo\":\"SupportedChains_chainInfo__C5y5_\",\"addNetwork\":\"SupportedChains_addNetwork__1d1SW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"virtualSwapModal\":\"PendingSwapModal_virtualSwapModal__-sD6B\",\"headerContent\":\"PendingSwapModal_headerContent__3LIny\",\"centerContent\":\"PendingSwapModal_centerContent__3YmsN\",\"timer\":\"PendingSwapModal_timer__mW1wh\",\"footerContent\":\"PendingSwapModal_footerContent__1Phmq\",\"title\":\"PendingSwapModal_title__2M9tJ\",\"about\":\"PendingSwapModal_about__220gu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"balanceContainer\":\"TokenInput_balanceContainer__cPUnG\",\"tokenInputContainer\":\"TokenInput_tokenInputContainer__1WJUN\",\"smallText\":\"TokenInput_smallText__20eyf\",\"boldText\":\"TokenInput_boldText__31KZf\",\"tokenSymbolAndName\":\"TokenInput_tokenSymbolAndName__2Qvfw\",\"inputGroup\":\"TokenInput_inputGroup__a8J7C\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"harvestRewards\":\"HarvestRewards_harvestRewards__ZEuKk\",\"title\":\"HarvestRewards_title__19n1y\",\"rewardBalance\":\"HarvestRewards_rewardBalance__3hRCD\",\"buttonWrapper\":\"HarvestRewards_buttonWrapper__1XIMo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"exchangeWrapper\":\"PendingSwapExchange_exchangeWrapper__3P4vW\",\"buttonGroup\":\"PendingSwapExchange_buttonGroup__3xT7V\",\"error\":\"PendingSwapExchange_error__1EYOL\",\"stepWrapper\":\"PendingSwapExchange_stepWrapper__1Zf_8\",\"balanceWrapper\":\"PendingSwapExchange_balanceWrapper__2xZg9\",\"balance\":\"PendingSwapExchange_balance__2L9O0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"timeline\":\"PendingSwapTimeline_timeline__1sPHc\",\"timelineStep\":\"PendingSwapTimeline_timelineStep__2t7Kw\",\"active\":\"PendingSwapTimeline_active__3svFY\",\"inactive\":\"PendingSwapTimeline_inactive__3GC1p\",\"timelineLine\":\"PendingSwapTimeline_timelineLine__1dOO5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inputContainer\":\"StakeForm_inputContainer__1Qozp\",\"submitButton\":\"StakeForm_submitButton__2Hrdo\",\"stakeInfoContainer\":\"StakeForm_stakeInfoContainer__Sec7V\",\"infoMessage\":\"StakeForm_infoMessage__2AQyt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"farmTabs\":\"FarmTabs_farmTabs__1LTkG\",\"farmTitle\":\"FarmTabs_farmTitle__33ht4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bottommenu\":\"BottomMenu_bottommenu__2xAXQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"farmFooter\":\"FarmFooter_farmFooter__YHHrl\",\"goBack\":\"FarmFooter_goBack__O3JL-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"farmPage\":\"FarmPage_farmPage__5w2kk\",\"approveButtons\":\"FarmPage_approveButtons__1lGBg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"farm\":\"Farm_farm__CCH1x\",\"container\":\"Farm_container__dvLJc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"farms\":\"Farms_farms__1xs58\",\"container\":\"Farms_container__3m4Cc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"poolsPage\":\"Pools_poolsPage__2iM88\",\"filters\":\"Pools_filters__ent_s\",\"filterTab\":\"Pools_filterTab__xTao7\",\"selected\":\"Pools_selected__CZ4Wl\",\"outdated\":\"Pools_outdated__7Amog\",\"content\":\"Pools_content__2Zzuv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"stake\":\"Stake_stake__X3ZLR\",\"container\":\"Stake_container__84PXq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"arrowLeft\":\"BackButton_arrowLeft__2GUbE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"divider\":\"Divider_divider__w0lGF\"};","import Fetch from \"i18next-fetch-backend\"\nimport LanguageDetector from \"i18next-browser-languagedetector\"\nimport i18next from \"i18next\"\nimport { initReactI18next } from \"react-i18next\"\n\nvoid i18next\n  .use(Fetch)\n  .use(LanguageDetector)\n  .use(initReactI18next)\n  .init({\n    backend: {\n      loadPath: `./locales/{{lng}}.json`,\n      requestOptions: {\n        cache: \"no-cache\", // validate the freshness of the cache\n      },\n    },\n    react: {\n      useSuspense: true,\n    },\n    fallbackLng: \"en\",\n    load: \"languageOnly\", // load zh.json for zh-CN\n    preload: [\"en\"],\n    keySeparator: false,\n    interpolation: { escapeValue: false },\n  })\n\nexport default i18next\n","import { BaseProvider, getDefaultProvider } from \"@ethersproject/providers\"\n\nimport { InjectedConnector } from \"@web3-react/injected-connector\"\nimport { NetworkConnector } from \"@web3-react/network-connector\"\nimport { WalletConnectConnector } from \"@web3-react/walletconnect-connector\"\n// import { WalletLinkConnector } from \"@web3-react/walletlink-connector\"\n\nconst NETWORK_URL = process.env.REACT_APP_NETWORK_URL\nexport const NETWORK_CHAIN_ID: number = parseInt(\n  process.env.REACT_APP_CHAIN_ID ?? \"1\",\n)\n\nif (typeof NETWORK_URL === \"undefined\") {\n  throw new Error(\n    `REACT_APP_NETWORK_URL must be a defined environment variable`,\n  )\n}\n\nexport const network = new NetworkConnector({\n  urls: { [NETWORK_CHAIN_ID]: NETWORK_URL },\n})\n\nlet networkLibrary: BaseProvider | undefined\nexport function getNetworkLibrary(): BaseProvider {\n  const provider = getDefaultProvider(NETWORK_URL)\n  if (NETWORK_URL) {\n    console.log(`Connecting to network URL: ${NETWORK_URL}`)\n  }\n  return (networkLibrary = networkLibrary ?? provider)\n}\n\nexport const injected = new InjectedConnector({\n  // mainnet, ropsten, rinkeby, goerli, kovan, local buidler\n  // see: https://github.com/ethereum/EIPs/blob/master/EIPS/eip-155.md\n  supportedChainIds: [1313161554, 1313161555],\n})\n\nexport const walletconnect = new WalletConnectConnector({\n  rpc: { [NETWORK_CHAIN_ID]: NETWORK_URL },\n  bridge: \"https://bridge.walletconnect.org\",\n  qrcode: true,\n  // pollingInterval: POLLING_INTERVAL / 12000\n})\n\n// export const walletlink = new WalletLinkConnector({\n//   url: NETWORK_URL,\n//   appName: \"Rose\",\n// })\n","import { injected, walletconnect } from \"../connectors\"\n\nimport { AbstractConnector } from \"@web3-react/abstract-connector\"\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport alethLogo from \"../assets/icons/aleth.svg\"\nimport alusdLogo from \"../assets/icons/alusd.svg\"\nimport atustLogo from \"../assets/icons/atust.svg\"\n// import coinbasewalletIcon from \"../assets/icons/coinbasewallet.svg\"\nimport daiLogo from \"../assets/icons/dai.svg\"\nimport feiLogo from \"../assets/icons/fei.svg\"\nimport fraxLogo from \"../assets/icons/frax.svg\"\nimport lusdLogo from \"../assets/icons/lusd.svg\"\nimport metamaskIcon from \"../assets/icons/metamask.svg\"\nimport renbtcLogo from \"../assets/icons/renbtc.svg\"\nimport roseAtust from \"../assets/icons/rose-atust.svg\"\nimport roseFraxLogo from \"../assets/icons/rose-frax.svg\"\nimport roseLogo from \"../assets/icons/rose.svg\"\nimport sRoseLogo from \"../assets/icons/srose.svg\"\nimport saddleLogo from \"../assets/icons/logo_24.svg\"\nimport sbtcLogo from \"../assets/icons/sbtc.svg\"\nimport sethLogo from \"../assets/icons/seth.svg\"\nimport susdLogo from \"../assets/icons/susd.svg\"\nimport tbtcLogo from \"../assets/icons/tbtc.svg\"\nimport usdcLogo from \"../assets/icons/usdc.svg\"\nimport usdtLogo from \"../assets/icons/usdt.svg\"\nimport veth2Logo from \"../assets/icons/veth2.svg\"\nimport walletconnectIcon from \"../assets/icons/walletconnect.svg\"\nimport wbtcLogo from \"../assets/icons/wbtc.svg\"\nimport wcusdLogo from \"../assets/icons/wcusd.png\"\nimport wethLogo from \"../assets/icons/weth.svg\"\n\nexport const NetworkContextName = \"NETWORK\"\n\n// POOLS\nexport const BTC_POOL_NAME = \"BTC Pool\"\nexport const BTC_POOL_V2_NAME = \"BTC Pool V2\"\nexport const STABLECOIN_POOL_NAME = \"Stablecoin Pool\"\nexport const STABLECOIN_POOL_V2_NAME = \"Stables Pool\"\nexport const VETH2_POOL_NAME = \"vETH2 Pool\"\nexport const ALETH_POOL_NAME = \"alETH Pool\"\nexport const D4_POOL_NAME = \"D4 Pool\"\nexport const SUSD_METAPOOL_NAME = \"sUSD Metapool\"\nexport const TBTC_METAPOOL_NAME = \"tBTC Metapool\"\nexport const WCUSD_METAPOOL_NAME = \"wCUSD Metapool\"\nexport const FRAX_STABLES_LP_POOL_NAME = \"Frax Pool (outdated)\"\nexport const FRAX_METAPOOL_NAME = \"Frax Pool\"\nexport const STAKED_ROSE_LP_POOL_NAME = \"stRose Pool\"\nexport const UST_METAPOOL_NAME = \"UST Pool\"\n\n// FARMS\nexport const STABLES_FARM_NAME = \"Stables Farm\"\nexport const FRAX_METAPOOL_FARM_NAME = \"Frax Farm\"\nexport const UST_METAPOOL_FARM_NAME = \"UST Farm\"\nexport const ROSE_PAD_NLP_FARM_NAME = \"ROSE/PAD PLP Farm\"\nexport const ROSE_FRAX_NLP_FARM_NAME = \"ROSE/FRAX PLP Farm\"\nexport const SROSE_FARM_NAME = \"stRose Farm\"\n\nexport type PoolName =\n  | typeof BTC_POOL_NAME\n  | typeof BTC_POOL_V2_NAME\n  | typeof STABLECOIN_POOL_NAME\n  | typeof STABLECOIN_POOL_V2_NAME\n  | typeof VETH2_POOL_NAME\n  | typeof ALETH_POOL_NAME\n  | typeof D4_POOL_NAME\n  | typeof SUSD_METAPOOL_NAME\n  | typeof TBTC_METAPOOL_NAME\n  | typeof WCUSD_METAPOOL_NAME\n  | typeof FRAX_STABLES_LP_POOL_NAME\n  | typeof FRAX_METAPOOL_NAME\n  | typeof UST_METAPOOL_NAME\n  | typeof STAKED_ROSE_LP_POOL_NAME\n  | typeof UST_METAPOOL_NAME\n\nexport type FarmName =\n  | typeof STABLES_FARM_NAME\n  | typeof FRAX_METAPOOL_FARM_NAME\n  | typeof UST_METAPOOL_FARM_NAME\n  | typeof ROSE_PAD_NLP_FARM_NAME\n  | typeof ROSE_FRAX_NLP_FARM_NAME\n// | typeof SROSE_FARM_NAME\n\nexport enum ChainId {\n  MAINNET = 1,\n  ROPSTEN = 3,\n  // RINKEBY = 4,\n  // GÖRLI = 5,\n  // KOVAN = 42,\n  HARDHAT = 31337,\n  AURORA_TESTNET = 1313161555,\n  AURORA_MAINNET = 1313161554,\n}\nexport enum PoolTypes {\n  BTC,\n  ETH,\n  USD,\n  OTHER,\n}\n\nexport class Token {\n  readonly addresses: { [chainId in ChainId]: string }\n  readonly decimals: number\n  readonly symbol: string\n  readonly name: string\n  readonly icon: string\n  readonly geckoId: string\n  readonly isSynthetic: boolean\n  readonly isLPToken: boolean\n\n  constructor(\n    addresses: { [chainId in ChainId]: string },\n    decimals: number,\n    symbol: string,\n    geckoId: string,\n    name: string,\n    icon: string,\n    isSynthetic = false,\n    isLPToken = false,\n  ) {\n    this.addresses = addresses\n    this.decimals = decimals\n    this.symbol = symbol\n    this.geckoId = geckoId\n    this.name = name\n    this.icon = icon\n    this.isSynthetic = isSynthetic\n    this.isLPToken = isLPToken\n  }\n}\n\nexport const BLOCK_TIME = 13000 // ms\n\nexport const SYNTHETIX_CONTRACT_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0xC011a73ee8576Fb46F5E1c5751cA3B9Fe0af2a6F\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const SYNTHETIX_EXCHANGE_RATES_CONTRACT_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"0xd69b189020EF614796578AfE4d10378c5e7e1138\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const BRIDGE_CONTRACT_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0xa5bD85ed9fA27ba23BfB702989e7218E44fd4706\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const SWAP_MIGRATOR_USD_CONTRACT_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"0x9cDeF6e33687F438808766fC133b2E9d1A16AD57\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"0x99bbA657f2BbC93c02D617f8bA121cB8Fc104Acf\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const SUSD_META_SWAP_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0x0C8BAe14c9f9BF2c953997C881BEfaC7729FD314\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"0x9d4454B023096f34B160D6B654540c56A1F81688\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const SUSD_META_SWAP_DEPOSIT_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"0x1e35ebF875f8A2185EDf22da02e7dBCa0F5558aB\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"0x809d550fca64d94Bd9F66E60752A544199cfAC3D\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const TBTC_META_SWAP_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0xf74ebe6e5586275dc4CeD78F5DBEF31B1EfbE7a5\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"0xA22D78bc37cE77FeE1c44F0C2C0d2524318570c3\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const TBTC_META_SWAP_DEPOSIT_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"0xee1ec4e1C6e39C31dAaf3db2A62A397bdf3fe2f1\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"0x0ed2E86FcE2e5A7965f59708c01f88a722BC7f07\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const WCUSD_META_SWAP_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0x3F1d224557afA4365155ea77cE4BC32D5Dae2174\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"0x1429859428C0aBc9C2C47C8Ee9FBaf82cFA0F20f\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const WCUSD_META_SWAP_DEPOSIT_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"0x401AFbc31ad2A3Bc0eD8960d63eFcDEA749b4849\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"0x922D6956C99E12DFeB3224DEA977D0939758A1Fe\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const STABLECOIN_SWAP_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0x3911F80530595fBd01Ab1516Ab61255d75AEb066\",\n  [ChainId.ROPSTEN]: \"0xbCED0cB1e8022869678d40b3c71FA7A443CA8090\",\n  [ChainId.HARDHAT]: \"0x98A0Bc3f9FdAD482CB2e40dE1291f8b0A6FE1860\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const STABLECOIN_SWAP_V2_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0xaCb83E0633d6605c5001e2Ab59EF3C745547C8C7\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"0xbf9fBFf01664500A33080Da5d437028b07DFcC55\",\n  [ChainId.AURORA_TESTNET]: \"0x2Ec594949EC5CaEb1430B61FE20aEEe6655756ed\",\n  [ChainId.AURORA_MAINNET]: \"0xc90dB0d8713414d78523436dC347419164544A3f\",\n}\n\nexport const FRAX_STABLES_LP_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"\",\n  [ChainId.AURORA_TESTNET]: \"0x2E7d99fF3a89937339dDC651EdbA6e564B751bE7\",\n  [ChainId.AURORA_MAINNET]: \"0xd812cc1fc1e0a56560796C746B1247e2bd4F31f2\",\n}\n\nexport const FRAX_METAPOOL_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"\",\n  [ChainId.AURORA_TESTNET]: \"0xfbC22278A96299D91d41C453234d97b4F5Eb9B2d\",\n  [ChainId.AURORA_MAINNET]: \"0xa34315F1ef49392387Dd143f4578083A9Bd33E94\",\n}\n\nexport const UST_METAPOOL_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"\",\n  [ChainId.AURORA_TESTNET]: \"0x1B8f7ac4acCa4ede18848203a54E57DF104C6f30\",\n  [ChainId.AURORA_MAINNET]: \"0x8fe44f5cce02D5BE44e3446bBc2e8132958d22B8\",\n}\n\nexport const STAKED_ROSE_POOL_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"\",\n  [ChainId.AURORA_TESTNET]: \"0x7e27881A7eABb81D0e32e03C498f97517Cb75470\",\n  [ChainId.AURORA_MAINNET]: \"0x36685AfD221622942Df61979d72a0064a17EF291\",\n}\n\nexport const BTC_SWAP_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0x4f6A43Ad7cba042606dECaCA730d4CE0A57ac62e\",\n  [ChainId.ROPSTEN]: \"0x02ad8Da8cCa3764DFb62d749E51Cb3d4b35643ad\",\n  [ChainId.HARDHAT]: \"0x610178dA211FEF7D417bC0e6FeD39F05609AD788\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const BTC_SWAP_V2_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0xdf3309771d2BF82cb2B6C56F9f5365C8bD97c4f2\",\n  [ChainId.ROPSTEN]: \"\", // TODO: add address after deployment\n  [ChainId.HARDHAT]: \"0x93b6BDa6a0813D808d75aA42e900664Ceb868bcF\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const VETH2_SWAP_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0xdec2157831D6ABC3Ec328291119cc91B337272b5\",\n  [ChainId.ROPSTEN]: \"0x2C019509326485AE234c6CA8a51c9F4A0F94f5fA\",\n  [ChainId.HARDHAT]: \"0x6F62d12568c81Dc0fb38426B7Cdba2d265f89B29\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const ALETH_SWAP_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0xa6018520EAACC06C30fF2e1B3ee2c7c22e64196a\",\n  [ChainId.ROPSTEN]: \"0x53434526fCB7a5FF358AB74C13C1c582BBE6Ab9e\",\n  [ChainId.HARDHAT]: \"0xCafac3dD18aC6c6e92c921884f9E4176737C052c\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const D4_SWAP_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0xC69DDcd4DFeF25D8a793241834d4cc4b3668EAD6\",\n  [ChainId.ROPSTEN]: \"0xa5da0cB57830011c67Cb89e73582e7Bf0f49f81e\",\n  [ChainId.HARDHAT]: \"0x9f1ac54BEF0DD2f6f3462EA0fa94fC62300d3a8e\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const MERKLETREE_DATA: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"mainnetTestAccounts.json\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"hardhat.json\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const SUSD_SWAP_TOKEN_CONTRACT_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"0x8Fa31c1b33De16bf05c38AF20329f22D544aD64c\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"0xBeaAFDA2E17fC95E69Dc06878039d274E0d2B21A\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const STABLECOIN_SWAP_TOKEN_CONTRACT_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"0x76204f8CFE8B95191A3d1CfA59E267EA65e06FAC\",\n  [ChainId.ROPSTEN]: \"0x09f0e9d602c9989B2C03983cA37E7fa18084C44B\",\n  [ChainId.HARDHAT]: \"0x6D1c89F08bbB35d80B6E6b6d58D2bEFE021eFE8d\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const STABLECOIN_SWAP_V2_TOKEN_CONTRACT_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"0x5f86558387293b6009d7896A61fcc86C17808D62\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"0xC863F1F636fddce400E7515eCBDAbbEc4d1E0390\",\n  [ChainId.AURORA_TESTNET]: \"0xFDE5214eF60617fb63A688C9C51cF5262254B4b7\",\n  [ChainId.AURORA_MAINNET]: \"0xfF79D5bff48e1C01b722560D6ffDfCe9FC883587\",\n}\n\nexport const WCUSD_SWAP_TOKEN_CONTRACT_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"0x78179d49C13c4ECa14C69545ec172Ba0179EAE6B\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"0x465Df401621060aE6330C13cA7A0baa2B0a9d66D\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const BTC_SWAP_TOKEN_CONTRACT_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"0xC28DF698475dEC994BE00C9C9D8658A548e6304F\",\n  [ChainId.ROPSTEN]: \"0x7546eC9bf608162117D9Ac6A3F7D50aaE9ea9E6B\",\n  [ChainId.HARDHAT]: \"0x6F1216D1BFe15c98520CA1434FC1d9D57AC95321\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const BTC_SWAP_V2_TOKEN_CONTRACT_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"0xF32E91464ca18fc156aB97a697D6f8ae66Cd21a3\",\n  [ChainId.ROPSTEN]: \"\", // TODO: add address after deployment\n  [ChainId.HARDHAT]: \"0xbBc1b70e4e04486570bfB621194d4f901a906E8F\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const TBTC_SWAP_TOKEN_CONTRACT_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"0x122Eca07139EB368245A29FB702c9ff11E9693B7\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"0xf76070F44307a4B6649fEC2081cE4B4730c37C76\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const VETH2_SWAP_TOKEN_CONTRACT_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"0xe37E2a01feA778BC1717d72Bd9f018B6A6B241D5\",\n  [ChainId.ROPSTEN]: \"0x28B465383ab829adFf02794917cD2FB8d04b0902\",\n  [ChainId.HARDHAT]: \"0xd44a47B19a7862709588D574f39480f9C4DED1A6\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const ALETH_SWAP_TOKEN_CONTRACT_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"0xc9da65931ABf0Ed1b74Ce5ad8c041C4220940368\",\n  [ChainId.ROPSTEN]: \"0x13e0d50308C01cf5BdA4b64CcBCceF0C6B9710DF\",\n  [ChainId.HARDHAT]: \"0xAe367415f4BDe0aDEE3e59C35221d259f517413E\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const D4_SWAP_TOKEN_CONTRACT_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"0xd48cF4D7FB0824CC8bAe055dF3092584d0a1726A\",\n  [ChainId.ROPSTEN]: \"0xA2b37a2c1F5E523f867137D2394Da1AC2283f473\",\n  [ChainId.HARDHAT]: \"0x2d2c18F63D2144161B38844dCd529124Fbb93cA2\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\n\nexport const FRAX_STABLES_LP_TOKEN_CONTRACT_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"\",\n  [ChainId.AURORA_TESTNET]: \"0xC604298cAf81dEeFd245343e7c891b4C8860CB0E\",\n  [ChainId.AURORA_MAINNET]: \"0xbB5279353d88A25F099A334Ba49CDCb1CF4b5A7c\",\n}\n\nexport const FRAX_METAPOOL_LP_TOKEN_CONTRACT_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"\",\n  [ChainId.AURORA_TESTNET]: \"0x4EE6eCAD1c2Dae9f525404De8555724e3c35d07B\",\n  [ChainId.AURORA_MAINNET]: \"0x4463A118A2fB34640ff8eF7Fe1B3abAcd4aC9fB7\",\n}\n\nexport const UST_METAPOOL_LP_TOKEN_CONTRACT_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"\",\n  [ChainId.AURORA_TESTNET]: \"0x1BCD872ECEf68C77465a8dADa1d915D7Af206bF5\",\n  [ChainId.AURORA_MAINNET]: \"0x94A7644E4D9CA0e685226254f88eAdc957D3c263\",\n}\n\nexport const ROSE_PAD_NLP_TOKEN_CONTRACT_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"\",\n  [ChainId.AURORA_TESTNET]: \"0xC6C3cc84EabD4643C382C988fA2830657fc70a6B\", // TO-DO: UPDATE\n  [ChainId.AURORA_MAINNET]: \"0xC6C3cc84EabD4643C382C988fA2830657fc70a6B\",\n}\n\nexport const ROSE_FRAX_NLP_TOKEN_CONTRACT_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"\",\n  [ChainId.AURORA_TESTNET]: \"0xeD4C231b98b474f7cAeCAdD2736e5ebC642ad707\", // TO-DO: UPDATE\n  [ChainId.AURORA_MAINNET]: \"0xeD4C231b98b474f7cAeCAdD2736e5ebC642ad707\",\n}\n\nexport const SROSE_LP_TOKEN_CONTRACT_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"\",\n  [ChainId.AURORA_TESTNET]: \"0xcb2B566B1e643d068DE7DE76C5420A1c63ceD299\",\n  [ChainId.AURORA_MAINNET]: \"0x7Ba8C17010a48283D38a4bd5f87EfEB5594c92f8\",\n}\n\nexport const SUSD_SWAP_TOKEN = new Token(\n  SUSD_SWAP_TOKEN_CONTRACT_ADDRESSES,\n  18,\n  \"saddleSUSD\",\n  \"saddlesusd\",\n  \"Saddle sUSD/saddleUSD-V2\",\n  saddleLogo,\n  false,\n  true,\n)\n\nexport const BTC_SWAP_TOKEN = new Token(\n  BTC_SWAP_TOKEN_CONTRACT_ADDRESSES,\n  18,\n  \"saddleBTC\",\n  \"saddlebtc\",\n  \"Saddle TBTC/WBTC/RENBTC/SBTC\",\n  saddleLogo,\n  false,\n  true,\n)\n\nexport const BTC_SWAP_V2_TOKEN = new Token(\n  BTC_SWAP_V2_TOKEN_CONTRACT_ADDRESSES,\n  18,\n  \"saddleBTC-V2\",\n  \"saddlebtc-v2\",\n  \"Saddle WBTC/RENBTC/SBTC\",\n  saddleLogo,\n  false,\n  true,\n)\n\nexport const TBTC_SWAP_TOKEN = new Token(\n  TBTC_SWAP_TOKEN_CONTRACT_ADDRESSES,\n  18,\n  \"saddletBTC\",\n  \"saddletBTC\",\n  \"Saddle tBTCv2/saddleWRenSBTC\",\n  saddleLogo,\n  false,\n  true,\n)\n\nexport const STABLECOIN_SWAP_TOKEN = new Token(\n  STABLECOIN_SWAP_TOKEN_CONTRACT_ADDRESSES,\n  18,\n  \"saddleUSD\",\n  \"saddleusd\",\n  \"Saddle DAI/USDC/USDT\",\n  saddleLogo,\n  false,\n  true,\n)\n\nexport const STABLECOIN_SWAP_V2_TOKEN = new Token(\n  STABLECOIN_SWAP_V2_TOKEN_CONTRACT_ADDRESSES,\n  18,\n  \"RoseStablesLP\",\n  \"tether\", // tracking USDT for now, as we can't fetch price for RoseStablesLP\n  \"RoseStablesLP\",\n  roseLogo,\n  false,\n  true,\n)\n\nexport const FRAX_STABLES_LP_TOKEN = new Token(\n  FRAX_STABLES_LP_TOKEN_CONTRACT_ADDRESSES,\n  18,\n  \"RoseFraxLP\",\n  \"rosefraxlp\",\n  \"Rose FRAX/StablesLP\",\n  roseFraxLogo,\n  false,\n  true,\n)\n\nexport const FRAX_METAPOOL_LP_TOKEN = new Token(\n  FRAX_METAPOOL_LP_TOKEN_CONTRACT_ADDRESSES,\n  18,\n  \"RoseFraxLP\",\n  \"rosefraxlp\",\n  \"Rose FRAX/StablesLP\",\n  roseFraxLogo,\n  false,\n  true,\n)\n\nexport const UST_METAPOOL_LP_TOKEN = new Token(\n  UST_METAPOOL_LP_TOKEN_CONTRACT_ADDRESSES,\n  18,\n  \"RoseUSTLP\",\n  \"roseustlp\",\n  \"Rose atUST/StablesLP\",\n  roseAtust,\n  false,\n  true,\n)\n\nexport const ROSE_PAD_NLP_TOKEN = new Token(\n  ROSE_PAD_NLP_TOKEN_CONTRACT_ADDRESSES,\n  18,\n  \"RosePadNLP\",\n  \"rosepadnlp\",\n  \"ROSE/PAD PLP\",\n  roseLogo, // TO-DO: change to new logo\n  false,\n  true,\n)\n\nexport const ROSE_FRAX_NLP_TOKEN = new Token(\n  ROSE_FRAX_NLP_TOKEN_CONTRACT_ADDRESSES,\n  18,\n  \"RoseFraxNLP\",\n  \"rosefraxnlp\",\n  \"ROSE/FRAX PLP\",\n  roseFraxLogo, // TO-DO: change to new logo\n  false,\n  true,\n)\n\nexport const SROSE_LP_TOKEN = new Token(\n  SROSE_LP_TOKEN_CONTRACT_ADDRESSES,\n  18,\n  \"StakedRoseLP\",\n  \"stakedrosenlp\",\n  \"Rose ROSE/stROSE\",\n  sRoseLogo, // TO-DO: change to new logo\n  false,\n  true,\n)\n\nexport const WCUSD_SWAP_TOKEN = new Token(\n  WCUSD_SWAP_TOKEN_CONTRACT_ADDRESSES,\n  18,\n  \"saddlewCUSD\",\n  \"saddlewcusd\",\n  \"Saddle wCUSD/saddleUSD-V2\",\n  saddleLogo,\n  false,\n  true,\n)\n\nexport const VETH2_SWAP_TOKEN = new Token(\n  VETH2_SWAP_TOKEN_CONTRACT_ADDRESSES,\n  18,\n  \"saddleVETH2\",\n  \"saddleveth2\",\n  \"Saddle WETH/vETH2\",\n  saddleLogo,\n  false,\n  true,\n)\n\nexport const ALETH_SWAP_TOKEN = new Token(\n  ALETH_SWAP_TOKEN_CONTRACT_ADDRESSES,\n  18,\n  \"saddleALETH\",\n  \"saddlealeth\",\n  \"Saddle WETH/alETH/sETH\",\n  saddleLogo,\n  false,\n  true,\n)\n\nexport const D4_SWAP_TOKEN = new Token(\n  D4_SWAP_TOKEN_CONTRACT_ADDRESSES,\n  18,\n  \"saddleD4\",\n  \"saddled4\",\n  \"Saddle alUSD/FEI/FRAX/LUSD\",\n  saddleLogo,\n  false,\n  true,\n)\n\n// Stablecoins\nconst WCUSD_CONTRACT_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0xad3e3fc59dff318beceaab7d00eb4f68b1ecf195\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"0xFD471836031dc5108809D173A067e8486B9047A3\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\nexport const WCUSD = new Token(\n  WCUSD_CONTRACT_ADDRESSES,\n  18,\n  \"wCUSD\",\n  \"wrapped-celo-dollar\",\n  \"Wrapped Celo USD\",\n  wcusdLogo,\n)\n\nconst SUSD_CONTRACT_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0x57Ab1ec28D129707052df4dF418D58a2D46d5f51\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"0x0E801D84Fa97b50751Dbf25036d067dCf18858bF\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\nexport const SUSD = new Token(\n  SUSD_CONTRACT_ADDRESSES,\n  18,\n  \"sUSD\",\n  \"nusd\",\n  \"sUSD\",\n  susdLogo,\n  true,\n)\n\nconst DAI_CONTRACT_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0x6B175474E89094C44Da98b954EedeAC495271d0F\",\n  [ChainId.ROPSTEN]: \"0x8C924e41d0624Ae6E7DB09fc93BBfB324c31BE0C\",\n  [ChainId.HARDHAT]: \"0xA51c1fc2f0D1a1b8494Ed1FE312d7C3a78Ed91C0\",\n  [ChainId.AURORA_TESTNET]: \"0x22EE86789837529E2F58Fd6D1dD6B0B26fc1e092\",\n  [ChainId.AURORA_MAINNET]: \"0xe3520349F477A5F6EB06107066048508498A291b\",\n}\nexport const DAI = new Token(\n  DAI_CONTRACT_ADDRESSES,\n  18,\n  \"DAI\",\n  \"dai\",\n  \"Dai\",\n  daiLogo,\n)\n\nconst USDC_CONTRACT_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48\",\n  [ChainId.ROPSTEN]: \"0xA4fe4981f7550884E7E6224F0c78245DC145b2F2\",\n  [ChainId.HARDHAT]: \"0x9A676e781A523b5d0C0e43731313A708CB607508\",\n  [ChainId.AURORA_TESTNET]: \"0x84606Cf2905f7004D6164a7aC2884A36BC8a0A90\",\n  [ChainId.AURORA_MAINNET]: \"0xB12BFcA5A55806AaF64E99521918A4bf0fC40802\",\n}\nexport const USDC = new Token(\n  USDC_CONTRACT_ADDRESSES,\n  6,\n  \"USDC\",\n  \"usd-coin\",\n  \"USDC Coin\",\n  usdcLogo,\n)\n\nconst USDT_CONTRACT_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0xdac17f958d2ee523a2206206994597c13d831ec7\",\n  [ChainId.ROPSTEN]: \"0x0593d1b92e8Ba6bBC428923245891efF0311Fa15\",\n  [ChainId.HARDHAT]: \"0x959922bE3CAee4b8Cd9a407cc3ac1C251C2007B1\",\n  [ChainId.AURORA_TESTNET]: \"0x8547A073cbc7D4aF48aD061b9D005C06D55337F5\",\n  [ChainId.AURORA_MAINNET]: \"0x4988a896b1227218e4A686fdE5EabdcAbd91571f\",\n}\nexport const USDT = new Token(\n  USDT_CONTRACT_ADDRESSES,\n  6,\n  \"USDT\",\n  \"tether\",\n  \"Tether\",\n  usdtLogo,\n)\n\nexport const STABLECOIN_POOL_TOKENS = [DAI, USDC, USDT]\nexport const SUSD_POOL_TOKENS = [SUSD, ...STABLECOIN_POOL_TOKENS]\nexport const SUSD_UNDERLYING_POOL_TOKENS = [SUSD, STABLECOIN_SWAP_V2_TOKEN]\n\n// Tokenized BTC\nconst TBTC_CONTRACT_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0x8daebade922df735c38c80c7ebd708af50815faa\",\n  [ChainId.ROPSTEN]: \"0x9F6aA48f852Dd928F53A7dd3dcd2AC96a76c8727\",\n  [ChainId.HARDHAT]: \"0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\nexport const TBTC = new Token(\n  TBTC_CONTRACT_ADDRESSES,\n  18,\n  \"TBTC\",\n  \"tbtc\",\n  \"tBTC\",\n  tbtcLogo,\n)\n\nconst TBTC_V2_CONTRACT_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0x18084fba666a33d37592fa2633fd49a74dd93a88\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"0x82e01223d51Eb87e16A03E24687EDF0F294da6f1\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\nexport const TBTC_V2 = new Token(\n  TBTC_V2_CONTRACT_ADDRESSES,\n  18,\n  \"TBTCv2\",\n  \"tbtc\",\n  \"tBTCv2\",\n  tbtcLogo,\n)\n\nconst WBTC_CONTRACT_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0x2260fac5e5542a773aa44fbcfedf7c193bc2c599\",\n  [ChainId.ROPSTEN]: \"0x7264594dFB80a150f80b2988862605dDfda53727\",\n  [ChainId.HARDHAT]: \"0xDc64a140Aa3E981100a9becA4E685f962f0cF6C9\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\nexport const WBTC = new Token(\n  WBTC_CONTRACT_ADDRESSES,\n  8,\n  \"WBTC\",\n  \"wrapped-bitcoin\",\n  \"WBTC\",\n  wbtcLogo,\n)\n\nconst RENBTC_CONTRACT_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0xeb4c2781e4eba804ce9a9803c67d0893436bb27d\",\n  [ChainId.ROPSTEN]: \"0x79B92D075d72d639D46D30CE15e6DdDE50ad5890\",\n  [ChainId.HARDHAT]: \"0x0165878A594ca255338adfa4d48449f69242Eb8F\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\nexport const RENBTC = new Token(\n  RENBTC_CONTRACT_ADDRESSES,\n  8,\n  \"RENBTC\",\n  \"renbtc\",\n  \"renBTC\",\n  renbtcLogo,\n)\n\nconst SBTC_CONTRACT_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0xfe18be6b3bd88a2d2a7f928d00292e7a9963cfc6\",\n  [ChainId.ROPSTEN]: \"0xAc2931cFA6ff57Aaf64B43DFdc5190ca3c341640\",\n  [ChainId.HARDHAT]: \"0x2279B7A0a67DB372996a5FaB50D91eAA73d2eBe6\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\nexport const SBTC = new Token(\n  SBTC_CONTRACT_ADDRESSES,\n  18,\n  \"sBTC\",\n  \"sbtc\",\n  \"sBTC\",\n  sbtcLogo,\n  true,\n)\n\nexport const BTC_POOL_TOKENS = [TBTC, WBTC, RENBTC, SBTC]\nexport const BTC_POOL_V2_TOKENS = [WBTC, RENBTC, SBTC]\n\nexport const TBTC_POOL_TOKENS = [TBTC_V2, ...BTC_POOL_V2_TOKENS]\nexport const TBTC_UNDERLYING_POOL_TOKENS = [TBTC_V2, BTC_SWAP_V2_TOKEN]\n\nconst WETH_CONTRACT_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2\",\n  [ChainId.ROPSTEN]: \"0x0B68F3b6c7fc0b6dD4D9a2399C4AE35be060ba42\",\n  [ChainId.HARDHAT]: \"0x3Aa5ebB10DC797CAC828524e59A333d0A371443c\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\nexport const WETH = new Token(\n  WETH_CONTRACT_ADDRESSES,\n  18,\n  \"WETH\",\n  \"ethereum\",\n  \"WETH\",\n  wethLogo,\n)\n\nconst VETH2_CONTRACT_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0x898BAD2774EB97cF6b94605677F43b41871410B1\",\n  [ChainId.ROPSTEN]: \"0xd46Ea72ABf55699b17eAF529c6533e5c13F5E687\",\n  [ChainId.HARDHAT]: \"0x59b670e9fA9D0A427751Af201D676719a970857b\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\nexport const VETH2 = new Token(\n  VETH2_CONTRACT_ADDRESSES,\n  18,\n  \"VETH2\",\n  \"ethereum\",\n  \"vETH2\",\n  veth2Logo,\n)\n\nexport const VETH2_POOL_TOKENS = [WETH, VETH2]\n\nconst ALETH_CONTRACT_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0x0100546F2cD4C9D97f798fFC9755E47865FF7Ee6\",\n  [ChainId.ROPSTEN]: \"0xaA91d3f2C53BDBEdd45FaB0308d0b51315Dc32E7\",\n  [ChainId.HARDHAT]: \"0x09635F643e140090A9A8Dcd712eD6285858ceBef\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\nexport const ALETH = new Token(\n  ALETH_CONTRACT_ADDRESSES,\n  18,\n  \"alETH\",\n  \"alchemix-eth\",\n  \"Alchemix ETH\",\n  alethLogo,\n)\n\nconst SETH_CONTRACT_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0x5e74C9036fb86BD7eCdcb084a0673EFc32eA31cb\",\n  [ChainId.ROPSTEN]: \"0x82BD6d2A185ed1C48e01830853fEf7f4D02fF1cC\",\n  [ChainId.HARDHAT]: \"0x67d269191c92Caf3cD7723F116c85e6E9bf55933\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\nexport const SETH = new Token(\n  SETH_CONTRACT_ADDRESSES,\n  18,\n  \"sETH\",\n  \"seth\",\n  \"Synth sETH\",\n  sethLogo,\n  true,\n)\n\nexport const ALETH_POOL_TOKENS = [WETH, ALETH, SETH]\n\nconst ALUSD_CONTRACT_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0xBC6DA0FE9aD5f3b0d58160288917AA56653660E9\",\n  [ChainId.ROPSTEN]: \"0x8b7a92FdbC77c6d8c61644D118c37D813B2069C4\",\n  [ChainId.HARDHAT]: \"0x84eA74d481Ee0A5332c457a4d796187F6Ba67fEB\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\nexport const ALUSD = new Token(\n  ALUSD_CONTRACT_ADDRESSES,\n  18,\n  \"alUSD\",\n  \"alchemix-usd\",\n  \"Alchemix USD\",\n  alusdLogo,\n)\n\nconst FEI_CONTRACT_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0x956F47F50A910163D8BF957Cf5846D573E7f87CA\",\n  [ChainId.ROPSTEN]: \"0x02020a3006587080a00d6675AFfACC99344521AC\",\n  [ChainId.HARDHAT]: \"0xa82fF9aFd8f496c3d6ac40E2a0F282E47488CFc9\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\nexport const FEI = new Token(\n  FEI_CONTRACT_ADDRESSES,\n  18,\n  \"FEI\",\n  \"fei-protocol\",\n  \"Fei Protocol\",\n  feiLogo,\n)\n\nconst FRAX_CONTRACT_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0x853d955aCEf822Db058eb8505911ED77F175b99e\",\n  [ChainId.ROPSTEN]: \"0xb295E36469C8Aef7d76b661aD5af02cdB258D662\",\n  [ChainId.HARDHAT]: \"0x851356ae760d987E095750cCeb3bC6014560891C\",\n  [ChainId.AURORA_TESTNET]: \"0xBEc49fA140aCaA83533fB00A2BB19bDdd0290f25\",\n  [ChainId.AURORA_MAINNET]: \"0xda2585430fef327ad8ee44af8f1f989a2a91a3d2\",\n}\nexport const FRAX = new Token(\n  FRAX_CONTRACT_ADDRESSES,\n  18,\n  \"FRAX\",\n  \"frax\",\n  \"Frax\",\n  fraxLogo,\n)\n\nconst UST_CONTRACT_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"\",\n  [ChainId.AURORA_TESTNET]: \"0xFE643843B9F4CfF9bbd57Ac2150d95858a0dCDd6\",\n  [ChainId.AURORA_MAINNET]: \"0x5ce9F0B6AFb36135b5ddBF11705cEB65E634A9dC\",\n}\n\nexport const UST = new Token(\n  UST_CONTRACT_ADDRESSES,\n  18,\n  \"atUST\",\n  \"terrausd\",\n  \"UST Terra\",\n  atustLogo,\n)\n\nconst LUSD_CONTRACT_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"0x5f98805A4E8be255a32880FDeC7F6728C6568bA0\",\n  [ChainId.ROPSTEN]: \"0x440d96e36f1A087deFdB5206b5e53DD2e526840B\",\n  [ChainId.HARDHAT]: \"0x95401dc811bb5740090279Ba06cfA8fcF6113778\",\n  [ChainId.AURORA_TESTNET]: \"\",\n  [ChainId.AURORA_MAINNET]: \"\",\n}\nexport const LUSD = new Token(\n  LUSD_CONTRACT_ADDRESSES,\n  18,\n  \"LUSD\",\n  \"liquity-usd\",\n  \"Liquity USD\",\n  lusdLogo,\n)\n\nexport const ROSE_CONTRACT_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"\",\n  [ChainId.AURORA_TESTNET]: \"0xfbBfA407fb908e4D58145762788062521C816332\",\n  [ChainId.AURORA_MAINNET]: \"0xdcD6D4e2B3e1D1E1E6Fa8C21C8A323DcbecfF970\",\n}\n\nexport const ROSE = new Token(\n  ROSE_CONTRACT_ADDRESSES,\n  18,\n  \"ROSE\",\n  \"rose\",\n  \"Rose Token\",\n  roseLogo,\n)\n\nexport const SROSE_CONTRACT_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"\",\n  [ChainId.AURORA_TESTNET]: \"0x777764757A453327fBfb8f3a979C7F2E58c0F9aD\",\n  [ChainId.AURORA_MAINNET]: \"0xe23d2289FBca7De725DC21a13fC096787A85e16F\",\n}\n\nexport const SROSE = new Token(\n  SROSE_CONTRACT_ADDRESSES,\n  18,\n  \"stRose\",\n  \"strose\",\n  \"Staked Rose Tokens\",\n  sRoseLogo,\n)\n\nexport const ROSE_FARM_STABLES_ADDRESSES: { [chainId in ChainId]: string } = {\n  [ChainId.MAINNET]: \"\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"\",\n  [ChainId.AURORA_TESTNET]: \"0xd7aA8Cf4811b8faFb423085BD2f77C3883eA9Ea3\",\n  [ChainId.AURORA_MAINNET]: \"0x52CACa9a2D52b27b28767d3649565774A3B991f3\",\n}\n\nexport const FRAX_METAPOOL_FARM_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"\",\n  [ChainId.AURORA_TESTNET]: \"0xB9D873cDc15e462f5414CCdFe618a679a47831b4\", // TODO\n  [ChainId.AURORA_MAINNET]: \"0xB9D873cDc15e462f5414CCdFe618a679a47831b4\",\n}\n\nexport const UST_METAPOOL_FARM_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"\",\n  [ChainId.AURORA_TESTNET]: \"0x56DE5E2c25828040330CEF45258F3FFBc090777C\", // TODO\n  [ChainId.AURORA_MAINNET]: \"0x56DE5E2c25828040330CEF45258F3FFBc090777C\",\n}\n\nexport const ROSE_PAD_NLP_FARM_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"\",\n  [ChainId.AURORA_TESTNET]: \"0xfF79D5bff48e1C01b722560D6ffDfCe9FC883587\",\n  [ChainId.AURORA_MAINNET]: \"0x9b2aE7d53099Ec64e2f6df3B4151FFCf7205f788\",\n}\n\nexport const ROSE_FRAX_NLP_FARM_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"\",\n  [ChainId.AURORA_TESTNET]: \"0xd7Fd3210a40495ef13adeC5c4c591Fe7794b8b8a\",\n  [ChainId.AURORA_MAINNET]: \"0x1B10bFCd6192edC573ced7Db7c7e403c7FAb8068\",\n}\n\nexport const SROSE_FARM_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"\",\n  [ChainId.AURORA_TESTNET]: \"0xA5BA452C32664b86c44556872F1a8011Bf35C6E8\",\n  [ChainId.AURORA_MAINNET]: \"0x247c9DA96BfC4720580ee84E01566D79a8c901ca\",\n}\n\nexport const FRAX_METAPOOL_DEPOSIT_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"\",\n  [ChainId.AURORA_TESTNET]: \"0xC9a43158891282A2B1475592D5719c001986Aaec\",\n  [ChainId.AURORA_MAINNET]: \"0x8a36Fd6F3502c60107E6711E4d98d933e4Da8EC3\",\n}\n\nexport const UST_METAPOOL_DEPOSIT_ADDRESSES: {\n  [chainId in ChainId]: string\n} = {\n  [ChainId.MAINNET]: \"\",\n  [ChainId.ROPSTEN]: \"\",\n  [ChainId.HARDHAT]: \"\",\n  [ChainId.AURORA_TESTNET]: \"0x4F44443271751576305F2f98CbB96B8992a170c0\",\n  [ChainId.AURORA_MAINNET]: \"0x6df16C4C708089aB6c436e1be7f7062C0bA5C317\",\n}\n\nexport const D4_POOL_TOKENS = [ALUSD, FEI, FRAX, LUSD]\nexport const FRAX_STABLES_LP_POOL_TOKENS = [FRAX, STABLECOIN_SWAP_V2_TOKEN]\nexport const FRAX_METAPOOL_TOKENS = [FRAX, STABLECOIN_SWAP_V2_TOKEN]\nexport const STAKED_ROSE_POOL_TOKENS = [ROSE, SROSE]\nexport const UST_METAPOOL_TOKENS = [UST, STABLECOIN_SWAP_V2_TOKEN]\nexport const WCUSD_POOL_TOKENS = [WCUSD, ...STABLECOIN_POOL_TOKENS]\nexport const WCUSD_UNDERLYING_POOL_TOKENS = [WCUSD, STABLECOIN_SWAP_V2_TOKEN]\n\nexport type Pool = {\n  name: PoolName\n  lpToken: Token\n  poolTokens: Token[]\n  isSynthetic: boolean\n  addresses: { [chainId in ChainId]: string }\n  type: PoolTypes\n  route: string\n  migration?: PoolName\n  metaSwapAddresses?: { [chainId in ChainId]: string }\n  underlyingPoolTokens?: Token[]\n  underlyingPool?: PoolName\n  isOutdated?: boolean // pool can be outdated but not have a migration target\n}\nexport type PoolsMap = {\n  [poolName: string]: Pool\n}\nexport const POOLS_MAP: PoolsMap = {\n  [STABLECOIN_POOL_V2_NAME]: {\n    name: STABLECOIN_POOL_V2_NAME,\n    addresses: STABLECOIN_SWAP_V2_ADDRESSES,\n    lpToken: STABLECOIN_SWAP_V2_TOKEN,\n    poolTokens: STABLECOIN_POOL_TOKENS,\n    isSynthetic: false,\n    type: PoolTypes.USD,\n    route: \"stables\",\n  },\n  [FRAX_STABLES_LP_POOL_NAME]: {\n    name: FRAX_STABLES_LP_POOL_NAME,\n    addresses: FRAX_STABLES_LP_ADDRESSES,\n    lpToken: FRAX_STABLES_LP_TOKEN,\n    poolTokens: FRAX_STABLES_LP_POOL_TOKENS,\n    // underlyingPoolTokens: [...STABLECOIN_POOL_TOKENS, FRAX],\n    isSynthetic: false,\n    type: PoolTypes.USD,\n    route: \"frax-stableslp\",\n    isOutdated: true,\n  },\n  [FRAX_METAPOOL_NAME]: {\n    name: FRAX_METAPOOL_NAME,\n    addresses: FRAX_METAPOOL_ADDRESSES,\n    lpToken: FRAX_METAPOOL_LP_TOKEN,\n    poolTokens: FRAX_METAPOOL_TOKENS,\n    underlyingPoolTokens: [FRAX, ...STABLECOIN_POOL_TOKENS], // frax first due to contract definition\n    underlyingPool: STABLECOIN_POOL_V2_NAME,\n    metaSwapAddresses: FRAX_METAPOOL_DEPOSIT_ADDRESSES,\n    isSynthetic: false,\n    type: PoolTypes.USD,\n    route: \"frax\",\n  },\n  [UST_METAPOOL_NAME]: {\n    name: UST_METAPOOL_NAME,\n    addresses: UST_METAPOOL_ADDRESSES,\n    lpToken: UST_METAPOOL_LP_TOKEN,\n    poolTokens: UST_METAPOOL_TOKENS,\n    underlyingPoolTokens: [UST, ...STABLECOIN_POOL_TOKENS],\n    underlyingPool: STABLECOIN_POOL_V2_NAME,\n    metaSwapAddresses: UST_METAPOOL_DEPOSIT_ADDRESSES,\n    isSynthetic: false,\n    type: PoolTypes.USD,\n    route: \"ust\",\n  },\n  // [STAKED_ROSE_LP_POOL_NAME]: {\n  //   name: STAKED_ROSE_LP_POOL_NAME,\n  //   addresses: STAKED_ROSE_POOL_ADDRESSES,\n  //   lpToken: SROSE_LP_TOKEN,\n  //   poolTokens: STAKED_ROSE_POOL_TOKENS,\n  //   isSynthetic: false,\n  //   type: PoolTypes.USD,\n  //   route: \"stakedrose\",\n  // },\n}\n\nexport type Farm = {\n  name: FarmName\n  lpToken: Token\n  addresses: { [chainId in ChainId]: string }\n  route: string\n  isRose: boolean\n  poolName: string\n  poolUrl?: string\n}\nexport type FarmsMap = {\n  [farmName in FarmName]: Farm\n}\nexport const FARMS_MAP: FarmsMap = {\n  [STABLES_FARM_NAME]: {\n    name: STABLES_FARM_NAME,\n    lpToken: STABLECOIN_SWAP_V2_TOKEN,\n    addresses: ROSE_FARM_STABLES_ADDRESSES,\n    poolUrl: \"../#/pools/stables/deposit\",\n    route: \"stables\",\n    isRose: true,\n    poolName: STABLECOIN_POOL_V2_NAME,\n  },\n  [FRAX_METAPOOL_FARM_NAME]: {\n    name: FRAX_METAPOOL_FARM_NAME,\n    lpToken: FRAX_METAPOOL_LP_TOKEN,\n    addresses: FRAX_METAPOOL_FARM_ADDRESSES,\n    poolUrl: \"../#/pools/frax/deposit\",\n    route: \"frax\",\n    isRose: true,\n    poolName: FRAX_METAPOOL_NAME,\n  },\n  [UST_METAPOOL_FARM_NAME]: {\n    name: UST_METAPOOL_FARM_NAME,\n    lpToken: UST_METAPOOL_LP_TOKEN,\n    addresses: UST_METAPOOL_FARM_ADDRESSES,\n    poolUrl: \"../#/pools/ust/deposit\",\n    route: \"ust\",\n    isRose: true,\n    poolName: UST_METAPOOL_NAME,\n  },\n  [ROSE_PAD_NLP_FARM_NAME]: {\n    name: ROSE_PAD_NLP_FARM_NAME,\n    lpToken: ROSE_PAD_NLP_TOKEN,\n    addresses: ROSE_PAD_NLP_FARM_ADDRESSES,\n    poolUrl:\n      \"https://dex.nearpad.io/add/0xdcD6D4e2B3e1D1E1E6Fa8C21C8A323DcbecfF970/0x885f8CF6E45bdd3fdcDc644efdcd0AC93880c781\",\n    route: \"rose-padnlp\",\n    isRose: false,\n    poolName: \"ROSE/PAD PLP Pool\",\n  },\n  [ROSE_FRAX_NLP_FARM_NAME]: {\n    name: ROSE_FRAX_NLP_FARM_NAME,\n    lpToken: ROSE_FRAX_NLP_TOKEN,\n    addresses: ROSE_FRAX_NLP_FARM_ADDRESSES,\n    poolUrl:\n      \"https://dex.nearpad.io/add/0xdcD6D4e2B3e1D1E1E6Fa8C21C8A323DcbecfF970/0xDA2585430fEf327aD8ee44Af8F1f989a2A91A3d2\",\n    route: \"rose-fraxnlp\",\n    isRose: false,\n    poolName: \"ROSE/FRAX PLP Pool\",\n  },\n  // [SROSE_FARM_NAME]: {\n  //   name: SROSE_FARM_NAME,\n  //   lpToken: SROSE_LP_TOKEN,\n  //   addresses: SROSE_FARM_ADDRESSES,\n  //   route: \"stakedrose\",\n  //   isRose: true,\n  //   poolName: \"stRose Pool\",\n  // },\n}\nexport function isLegacySwapABIPool(poolName: string): boolean {\n  return new Set([BTC_POOL_NAME, STABLECOIN_POOL_NAME, VETH2_POOL_NAME]).has(\n    poolName,\n  )\n}\nexport function isMetaPool(poolName = \"\"): boolean {\n  return new Set([\n    SUSD_METAPOOL_NAME,\n    TBTC_METAPOOL_NAME,\n    WCUSD_METAPOOL_NAME,\n    FRAX_METAPOOL_NAME,\n    UST_METAPOOL_NAME,\n  ]).has(poolName)\n}\n\n// maps a symbol string to a token object\nexport type TokensMap = {\n  [symbol: string]: Token\n}\n\nexport const ROSE_TOKENS_MAP: TokensMap = {\n  rose: ROSE,\n  stRose: SROSE,\n}\n\nexport const TOKENS_MAP = Object.keys(POOLS_MAP).reduce((acc, poolName) => {\n  const pool = POOLS_MAP[poolName as PoolName]\n  const newAcc = { ...acc }\n  pool.poolTokens.forEach((token) => {\n    newAcc[token.symbol] = token\n  })\n  newAcc[pool.lpToken.symbol] = pool.lpToken\n  return newAcc\n}, {} as TokensMap)\n\nexport type TokenToPoolsMap = {\n  [tokenSymbol: string]: string[]\n}\nexport const TOKEN_TO_POOLS_MAP = Object.keys(POOLS_MAP).reduce(\n  (acc, poolName) => {\n    const pool = POOLS_MAP[poolName as PoolName]\n    const newAcc = { ...acc }\n    pool.poolTokens.forEach((token) => {\n      newAcc[token.symbol] = (newAcc[token.symbol] || []).concat(\n        poolName as PoolName,\n      )\n    })\n    return newAcc\n  },\n  {} as TokenToPoolsMap,\n)\n\nexport type LPTokenToPoolsMap = {\n  [tokenSymbol: string]: PoolName\n}\nexport const LPTOKEN_TO_POOL_MAP = Object.keys(POOLS_MAP).reduce(\n  (acc, poolName) => {\n    const pool = POOLS_MAP[poolName as PoolName]\n    const newAcc = { ...acc }\n    newAcc[pool.lpToken.symbol] = poolName as PoolName\n    return newAcc\n  },\n  {} as LPTokenToPoolsMap,\n)\n\nexport const TRANSACTION_TYPES = {\n  DEPOSIT: \"DEPOSIT\",\n  WITHDRAW: \"WITHDRAW\",\n  SWAP: \"SWAP\",\n  MIGRATE: \"MIGRATE\",\n  STAKE: \"STAKE\",\n}\n\nexport const POOL_FEE_PRECISION = 10\n\nexport enum SWAP_TYPES {\n  DIRECT = \"swapDirect\", // route length 2\n  SYNTH_TO_SYNTH = \"swapSynthToSynth\", // route length 2\n  SYNTH_TO_TOKEN = \"swapSynthToToken\", // route length 3\n  TOKEN_TO_SYNTH = \"swapTokenToSynth\", // route length 3\n  TOKEN_TO_TOKEN = \"swapTokenToToken\", // route length 4\n  INVALID = \"invalid\",\n}\n\nexport function getIsVirtualSwap(swapType: SWAP_TYPES): boolean {\n  return (\n    swapType === SWAP_TYPES.SYNTH_TO_SYNTH ||\n    swapType === SWAP_TYPES.SYNTH_TO_TOKEN ||\n    swapType === SWAP_TYPES.TOKEN_TO_SYNTH ||\n    swapType === SWAP_TYPES.TOKEN_TO_TOKEN\n  )\n}\n\nexport const SWAP_CONTRACT_GAS_ESTIMATES_MAP = {\n  [SWAP_TYPES.INVALID]: BigNumber.from(\"999999999\"), // 999,999,999\n  [SWAP_TYPES.DIRECT]: BigNumber.from(\"200000\"), // 157,807\n  [SWAP_TYPES.TOKEN_TO_TOKEN]: BigNumber.from(\"2000000\"), // 1,676,837\n  [SWAP_TYPES.TOKEN_TO_SYNTH]: BigNumber.from(\"2000000\"), // 1,655,502\n  [SWAP_TYPES.SYNTH_TO_TOKEN]: BigNumber.from(\"1500000\"), // 1,153,654\n  [SWAP_TYPES.SYNTH_TO_SYNTH]: BigNumber.from(\"700000\"), // 681,128 // TODO: https://github.com/saddle-finance/saddle-frontend/issues/471\n  addLiquidity: BigNumber.from(\"400000\"), // 386,555\n  removeLiquidityImbalance: BigNumber.from(\"350000\"), // 318,231\n  removeLiquidityOneToken: BigNumber.from(\"250000\"), // 232,947\n  migrate: BigNumber.from(\"650000\"), // 619,126\n  virtualSwapSettleOrWithdraw: BigNumber.from(\"400000\"),\n}\n\nexport interface WalletInfo {\n  name: string\n  icon: string\n  connector: AbstractConnector\n  isMobile?: boolean\n}\n\nexport const SUPPORTED_WALLETS: { [key: string]: WalletInfo } = {\n  METAMASK: {\n    name: \"MetaMask\",\n    icon: metamaskIcon,\n    connector: injected,\n  },\n  WALLET_CONNECT: {\n    name: \"WalletConnect\",\n    icon: walletconnectIcon,\n    connector: walletconnect,\n    isMobile: true,\n  },\n  // WALLET_LINK: {\n  //   name: \"Coinbase Wallet\",\n  //   icon: coinbasewalletIcon,\n  //   connector: walletlink,\n  // },\n}\n\nexport interface ChainInfo {\n  name: string\n  rpc: string\n}\n\n// kinda hacky, but will change once we update our chain IDs\nexport type SupportedChains = ChainId.AURORA_MAINNET\nexport const SUPPORTED_CHAINS: {\n  [chainId in SupportedChains]: ChainInfo\n} = {\n  [ChainId.AURORA_MAINNET]: {\n    name: \"Aurora Mainnet\",\n    rpc: \"https://mainnet.aurora.dev\",\n  },\n}\n\n// \"SADDLE\" in bytes32 form\nexport const SYNTH_TRACKING_ID =\n  \"0x534144444c450000000000000000000000000000000000000000000000000000\"\n\n// FLAGS\nexport const IS_VIRTUAL_SWAP_ACTIVE = true\n// FLAGS END\n","export default __webpack_public_path__ + \"static/media/aleth.3dd80ea7.svg\";","export default __webpack_public_path__ + \"static/media/alusd.d6b57a25.svg\";","export default __webpack_public_path__ + \"static/media/atust.27619054.svg\";","export default __webpack_public_path__ + \"static/media/dai.664df0db.svg\";","export default __webpack_public_path__ + \"static/media/fei.056d822f.svg\";","export default __webpack_public_path__ + \"static/media/frax.bbaec159.svg\";","export default __webpack_public_path__ + \"static/media/lusd.41ed2289.svg\";","export default __webpack_public_path__ + \"static/media/metamask.45038d58.svg\";","export default __webpack_public_path__ + \"static/media/renbtc.1e207adc.svg\";","export default __webpack_public_path__ + \"static/media/rose-atust.a480f729.svg\";","export default __webpack_public_path__ + \"static/media/rose-frax.f5e13197.svg\";","export default __webpack_public_path__ + \"static/media/rose.583daddb.svg\";","export default __webpack_public_path__ + \"static/media/srose.1ec7127a.svg\";","export default __webpack_public_path__ + \"static/media/logo_24.9ac0ef9c.svg\";","export default __webpack_public_path__ + \"static/media/sbtc.0b499bd2.svg\";","export default __webpack_public_path__ + \"static/media/seth.63f5d603.svg\";","export default __webpack_public_path__ + \"static/media/susd.b4cf9ad2.svg\";","export default __webpack_public_path__ + \"static/media/tbtc.73bdb39f.svg\";","export default __webpack_public_path__ + \"static/media/usdc.1fa5e7f4.svg\";","export default __webpack_public_path__ + \"static/media/usdt.2499bf87.svg\";","export default __webpack_public_path__ + \"static/media/veth2.4d368f5e.svg\";","export default __webpack_public_path__ + \"static/media/walletconnect.dfa25e47.svg\";","export default __webpack_public_path__ + \"static/media/wbtc.7b094635.svg\";","export default __webpack_public_path__ + \"static/media/weth.32818c6c.svg\";","export default \"data:image/png;base64,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\"","export function getEtherscanLink(\n  data: string,\n  type: \"tx\" | \"token\" | \"address\" | \"block\",\n): string {\n  return `https://explorer.mainnet.aurora.dev/${type}/${data}`\n}\n","import Notify from \"bnc-notify\"\nimport { getEtherscanLink } from \"../utils/getEtherscanLink\"\nimport i18next from \"i18next\"\n\nconst notifyNetworks = new Set([1, 3, 4, 5, 42, 56, 100])\nconst chainId = parseInt(process.env.REACT_APP_CHAIN_ID ?? \"1\")\n\nexport const notify = Notify({\n  ...(isChainSupportedByNotify(chainId)\n    ? {\n        dappId: process.env.REACT_APP_NOTIFY_DAPP_ID,\n        networkId: chainId,\n      }\n    : {}),\n  desktopPosition: \"topRight\" as const,\n  darkMode: false,\n})\n\nexport function isChainSupportedByNotify(chainId: number | undefined): boolean {\n  if (!chainId) return false\n  return notifyNetworks.has(chainId)\n}\n\nexport function notifyHandler(\n  hash: string,\n  type: \"deposit\" | \"withdraw\" | \"swap\" | \"tokenApproval\" | \"migrate\",\n): void {\n  const { emitter } = notify.hash(hash)\n\n  emitter.on(\"txPool\", (transaction) => {\n    if (transaction.hash) {\n      return {\n        message: i18next.t(\"txPool\", { context: type }),\n        link: getEtherscanLink(transaction.hash, \"tx\"),\n      }\n    }\n  })\n  emitter.on(\"txSent\", () => {\n    return {\n      message: i18next.t(\"txSent\", { context: type }),\n    }\n  })\n  emitter.on(\"txConfirmed\", () => {\n    return {\n      message: i18next.t(\"txConfirmed\", { context: type }),\n    }\n  })\n  emitter.on(\"txSpeedUp\", (transaction) => {\n    if (transaction.hash) {\n      return {\n        message: i18next.t(\"txSpeedUp\", { context: type }),\n        link: getEtherscanLink(transaction.hash, \"tx\"),\n      }\n    }\n  })\n  emitter.on(\"txCancel\", () => {\n    return {\n      message: i18next.t(\"txCancel\", { context: type }),\n    }\n  })\n  emitter.on(\"txFailed\", (transaction) => {\n    if (transaction.hash) {\n      return {\n        message: i18next.t(\"txFailed\", { context: type }),\n        link: getEtherscanLink(transaction.hash, \"tx\"),\n      }\n    }\n  })\n}\n\nexport function notifyCustomError(e: Error): void {\n  notify.notification({\n    eventCode: \"txFailed\",\n    type: \"error\",\n    message: `Your transaction failed. ${e.message}`,\n  })\n}\n","import { FaDiscord, FaGithub, FaTelegram, FaTwitter } from \"react-icons/fa\"\nimport React, { ReactElement } from \"react\"\nimport { BsMedium } from \"react-icons/bs\"\nimport styles from \"./BottomMenu.module.scss\"\n\nfunction BottomMenu(): ReactElement | null {\n  return (\n    <div className={styles.bottommenu}>\n      <div className={styles.socials}>\n        <a\n          href=\"https://twitter.com/roseonaurora\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          <FaTwitter />\n        </a>\n        <a\n          href=\"https://medium.com/@roseonaurora\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          <BsMedium />\n        </a>\n        <a href=\"https://t.me/RoseOnAurora\" target=\"_blank\" rel=\"noreferrer\">\n          <FaTelegram />\n        </a>\n        <a\n          href=\"https://discord.gg/dG6mWH4rHj\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          <FaDiscord />\n        </a>\n        <a\n          href=\"https://github.com/RoseOnAurora\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          <FaGithub />\n        </a>\n      </div>\n    </div>\n  )\n}\n\nexport default BottomMenu\n","import { BigNumber } from \"@ethersproject/bignumber\"\nimport { TOKENS_MAP } from \"../constants\"\nimport { parseUnits } from \"@ethersproject/units\"\n\n/**\n * Parses a user input string into a BigNumber.\n * Uses the native precision of the token if a tokenSymbol is provided\n * Defaults to a value of 0 if string cannot be parsed\n *\n * @param {string} valueRaw\n * @param {number} precision\n * @param {BigNumber} fallback\n * @return {Object} result\n * @return {BigNumber} result.value\n * @return {boolean} result.isFallback\n * }\n */\nexport default function parseStringToBigNumber(\n  valueRaw: string,\n  precision: number,\n  fallback?: BigNumber,\n): { value: BigNumber; isFallback: boolean } {\n  let valueSafe: BigNumber\n  let isFallback: boolean\n  try {\n    // attempt to parse string. Use fallback value if library error is thrown\n    valueSafe = parseUnits(valueRaw, precision)\n    isFallback = false\n  } catch {\n    valueSafe = fallback ?? BigNumber.from(\"0\")\n    isFallback = true\n  }\n  return { value: valueSafe, isFallback }\n}\n\n/**\n * Parses a user input string into a BigNumber.\n * Uses the native precision of the token if a tokenSymbol is provided\n * Defaults to a value of 0 if string cannot be parsed\n * @param {string} value\n * @param {string} tokenSymbol\n * @return {Object} result\n * @return {BigNumber} result.value\n * @return {boolean} result.isFallback */\nexport function parseStringAndTokenToBigNumber(\n  value: string,\n  tokenSymbol?: string,\n): { value: BigNumber; isFallback: boolean } {\n  return parseStringToBigNumber(\n    value,\n    tokenSymbol ? TOKENS_MAP[tokenSymbol]?.decimals : 18,\n    BigNumber.from(\"0\"),\n  )\n}\n","import { BigNumber } from \"@ethersproject/bignumber\"\nimport { formatUnits } from \"@ethersproject/units\"\nimport parseStringToBigNumber from \"../utils/parseStringToBigNumber\"\n\nexport interface NumberInputState {\n  isEmpty: boolean\n  isValid: boolean\n  precision: number\n  valueRaw: string\n  valueSafe: string // represents a BigNumber\n}\n\n/**\n * A curried function for representing user inputted number values.\n * Can be used to show errors in the UI, as well as safely interacting with the blockchain\n * @param {number} precision\n * @param {BigNumber} fallback\n * @return {function}\n */\nexport function numberInputStateCreator(\n  precision: number,\n  fallback: BigNumber,\n) {\n  /**\n   * Transforms a user inputted string into a more verbose format including BigNumber representation\n   * @param {string} inputValue\n   * @return {NumberInputState}\n   */\n  return function createNumberInputState(\n    inputValue: string | BigNumber,\n  ): NumberInputState {\n    if (BigNumber.isBigNumber(inputValue)) {\n      return {\n        isEmpty: false,\n        isValid: true,\n        precision,\n        valueRaw: formatUnits(inputValue, precision),\n        valueSafe: inputValue.toString(),\n      }\n    } else {\n      const { value: valueSafe, isFallback } = parseStringToBigNumber(\n        inputValue,\n        precision,\n        fallback,\n      )\n      return {\n        isEmpty: inputValue === \"\",\n        isValid: !isFallback,\n        precision,\n        valueRaw: inputValue,\n        valueSafe: valueSafe.toString(),\n      }\n    }\n  }\n}\n","import {\n  NumberInputState,\n  numberInputStateCreator,\n} from \"../utils/numberInputState\"\nimport { PayloadAction, createSlice } from \"@reduxjs/toolkit\"\n\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport { Zero } from \"@ethersproject/constants\"\n\nexport enum GasPrices {\n  Standard = \"STANDARD\",\n  Fast = \"FAST\",\n  Instant = \"INSTANT\",\n  Custom = \"CUSTOM\",\n}\n\nexport enum Slippages {\n  One = \"ONE\",\n  OneTenth = \"ONE_TENTH\",\n  Custom = \"CUSTOM\",\n}\n\nexport enum Deadlines {\n  Ten = \"TEN\",\n  Twenty = \"TWENTY\",\n  Thirty = \"THIRTY\",\n  Forty = \"FORTY\",\n  Custom = \"CUSTOM\",\n}\n\ninterface UserState {\n  userSwapAdvancedMode: boolean\n  userPoolAdvancedMode: boolean\n  userDarkMode: boolean\n  gasCustom?: NumberInputState\n  gasPriceSelected: GasPrices\n  slippageCustom?: NumberInputState\n  slippageSelected: Slippages\n  infiniteApproval: boolean\n  transactionDeadlineSelected: Deadlines\n  transactionDeadlineCustom?: string\n}\n\nexport const initialState: UserState = {\n  userSwapAdvancedMode: false,\n  userPoolAdvancedMode: false,\n  userDarkMode: true,\n  gasPriceSelected: GasPrices.Standard,\n  slippageSelected: Slippages.OneTenth,\n  infiniteApproval: false,\n  transactionDeadlineSelected: Deadlines.Twenty,\n}\n\nconst gasCustomStateCreator = numberInputStateCreator(\n  0, // gas is in wei\n  Zero,\n)\nconst slippageCustomStateCreator = numberInputStateCreator(\n  4,\n  BigNumber.from(10).pow(4).mul(1),\n)\n\nconst userSlice = createSlice({\n  name: \"user\",\n  initialState,\n  reducers: {\n    updateSwapAdvancedMode(\n      state: UserState,\n      action: PayloadAction<boolean>,\n    ): void {\n      state.userSwapAdvancedMode = action.payload\n    },\n    updatePoolAdvancedMode(\n      state: UserState,\n      action: PayloadAction<boolean>,\n    ): void {\n      state.userPoolAdvancedMode = action.payload\n    },\n    updateDarkMode(state: UserState, action: PayloadAction<boolean>): void {\n      // this will be phased out in favor of chakra's colorMode\n      state.userDarkMode = action.payload\n    },\n    updateGasPriceCustom(\n      state: UserState,\n      action: PayloadAction<string>,\n    ): void {\n      state.gasCustom = gasCustomStateCreator(action.payload)\n    },\n    updateGasPriceSelected(\n      state: UserState,\n      action: PayloadAction<GasPrices>,\n    ): void {\n      state.gasPriceSelected = action.payload\n      if (action.payload !== GasPrices.Custom) {\n        // clear custom value when standard option selected\n        state.gasCustom = gasCustomStateCreator(\"\")\n      }\n    },\n    updateSlippageSelected(\n      state: UserState,\n      action: PayloadAction<Slippages>,\n    ): void {\n      state.slippageSelected = action.payload\n      if (action.payload !== Slippages.Custom) {\n        // clear custom value when standard option selected\n        state.slippageCustom = slippageCustomStateCreator(\"\")\n      }\n    },\n    updateSlippageCustom(\n      state: UserState,\n      action: PayloadAction<string>,\n    ): void {\n      state.slippageCustom = slippageCustomStateCreator(action.payload)\n    },\n    updateInfiniteApproval(\n      state: UserState,\n      action: PayloadAction<boolean>,\n    ): void {\n      state.infiniteApproval = action.payload\n    },\n    updateTransactionDeadlineSelected(\n      state: UserState,\n      action: PayloadAction<Deadlines>,\n    ): void {\n      state.transactionDeadlineSelected = action.payload\n      // clear custom value when standard option selected\n      if (action.payload !== Deadlines.Custom) {\n        state.transactionDeadlineCustom = \"\"\n      }\n    },\n    updateTransactionDeadlineCustom(\n      state: UserState,\n      action: PayloadAction<string>,\n    ): void {\n      state.transactionDeadlineCustom = action.payload\n    },\n  },\n})\n\nexport const {\n  updateSwapAdvancedMode,\n  updatePoolAdvancedMode,\n  updateDarkMode,\n  updateGasPriceCustom,\n  updateGasPriceSelected,\n  updateSlippageCustom,\n  updateSlippageSelected,\n  updateInfiniteApproval,\n  updateTransactionDeadlineSelected,\n  updateTransactionDeadlineCustom,\n} = userSlice.actions\n\nexport default userSlice.reducer\n","import { AddressZero, Zero } from \"@ethersproject/constants\"\nimport { ChainId, PoolTypes, TOKENS_MAP, Token } from \"../constants\"\nimport { JsonRpcSigner, Web3Provider } from \"@ethersproject/providers\"\nimport { formatUnits, parseUnits } from \"@ethersproject/units\"\n\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport { Contract } from \"@ethersproject/contracts\"\nimport { ContractInterface } from \"ethers\"\nimport { Deadlines } from \"../state/user\"\nimport { getAddress } from \"@ethersproject/address\"\n\n// returns the checksummed address if the address is valid, otherwise returns false\nexport function isAddress(value: string): string | false {\n  try {\n    return getAddress(value)\n  } catch {\n    return false\n  }\n}\n\n// account is not optional\nexport function getSigner(\n  library: Web3Provider,\n  account: string,\n): JsonRpcSigner {\n  return library.getSigner(account).connectUnchecked()\n}\n\n// account is optional\nexport function getProviderOrSigner(\n  library: Web3Provider,\n  account?: string,\n): Web3Provider | JsonRpcSigner {\n  return account ? getSigner(library, account) : library\n}\n\n// account is optional\nexport function getContract(\n  address: string,\n  ABI: ContractInterface,\n  library: Web3Provider,\n  account?: string,\n): Contract {\n  if (!isAddress(address) || address === AddressZero) {\n    throw Error(`Invalid 'address' parameter '${address}'.`)\n  }\n\n  return new Contract(address, ABI, getProviderOrSigner(library, account))\n}\n\nexport function formatBNToShortString(\n  bn: BigNumber,\n  nativePrecision: number,\n): string {\n  const bnStr = bn.toString()\n  const numLen = bnStr.length - nativePrecision\n  if (numLen <= 0) return \"0.0\"\n  const div = Math.floor((numLen - 1) / 3)\n  const mod = numLen % 3\n  const suffixes = [\"\", \"k\", \"m\", \"b\", \"t\"]\n  return `${bnStr.substr(0, mod || 3)}.${bnStr[mod || 3]}${suffixes[div]}`\n}\n\nexport function formatBNToString(\n  bn: BigNumber,\n  nativePrecison: number,\n  decimalPlaces?: number,\n): string {\n  const fullPrecision = formatUnits(bn, nativePrecison)\n  const decimalIdx = fullPrecision.indexOf(\".\")\n  return decimalPlaces === undefined || decimalIdx === -1\n    ? fullPrecision\n    : fullPrecision.slice(\n        0,\n        decimalIdx + (decimalPlaces > 0 ? decimalPlaces + 1 : 0), // don't include decimal point if places = 0\n      )\n}\n\nexport function formatBNToPercentString(\n  bn: BigNumber,\n  nativePrecison: number,\n  decimalPlaces = 2,\n): string {\n  return `${formatBNToString(bn, nativePrecison - 2, decimalPlaces)}%`\n}\n\nexport function shiftBNDecimals(bn: BigNumber, shiftAmount: number): BigNumber {\n  if (shiftAmount < 0) throw new Error(\"shiftAmount must be positive\")\n  return bn.mul(BigNumber.from(10).pow(shiftAmount))\n}\n\nexport function calculateExchangeRate(\n  amountFrom: BigNumber,\n  tokenPrecisionFrom: number,\n  amountTo: BigNumber,\n  tokenPrecisionTo: number,\n): BigNumber {\n  return amountFrom.gt(\"0\")\n    ? amountTo\n        .mul(BigNumber.from(10).pow(36 - tokenPrecisionTo)) // convert to standard 1e18 precision\n        .div(amountFrom.mul(BigNumber.from(10).pow(18 - tokenPrecisionFrom)))\n    : BigNumber.from(\"0\")\n}\n\nexport function formatDeadlineToNumber(\n  deadlineSelected: Deadlines,\n  deadlineCustom?: string,\n): number {\n  let deadline = 20\n  switch (deadlineSelected) {\n    case Deadlines.Ten:\n      deadline = 10\n      break\n    case Deadlines.Twenty:\n      deadline = 20\n      break\n    case Deadlines.Thirty:\n      deadline = 30\n      break\n    case Deadlines.Forty:\n      deadline = 40\n      break\n    case Deadlines.Custom:\n      deadline = +(deadlineCustom || formatDeadlineToNumber(Deadlines.Twenty))\n      break\n  }\n  return deadline\n}\n\n// A better version of ether's commify util\nexport function commify(str: string): string {\n  const parts = str.split(\".\")\n  if (parts.length > 2) throw new Error(\"commify string cannot have > 1 period\")\n  const [partA, partB] = parts\n  if (partA.length === 0) return partB === undefined ? \"\" : `.${partB}`\n  const mod = partA.length % 3\n  const div = Math.floor(partA.length / 3)\n  // define a fixed length array given the expected # of commas added\n  const commaAArr = new Array(partA.length + (mod === 0 ? div - 1 : div))\n  // init pointers for original string and for commified array\n  let commaAIdx = commaAArr.length - 1\n  // iterate original string backwards from the decimals since that's how commas are added\n  for (let i = partA.length - 1; i >= 0; i--) {\n    // revIdx is the distance from the decimal place eg \"3210.\"\n    const revIdx = partA.length - 1 - i\n    // add the character to the array\n    commaAArr[commaAIdx--] = partA[i]\n    // add a comma if we are a multiple of 3 from the decimal\n    if ((revIdx + 1) % 3 === 0) {\n      commaAArr[commaAIdx--] = \",\"\n    }\n  }\n  const commifiedA = commaAArr.join(\"\")\n  return partB === undefined ? commifiedA : `${commifiedA}.${partB}`\n}\n\nexport function intersection<T>(set1: Set<T>, set2: Set<T>): Set<T> {\n  return new Set([...set1].filter((item) => set2.has(item)))\n}\n\nexport function getTokenByAddress(\n  address: string,\n  chainId: ChainId,\n): Token | null {\n  return (\n    Object.values(TOKENS_MAP).find(\n      ({ addresses }) =>\n        addresses[chainId] &&\n        address.toLowerCase() === addresses[chainId].toLowerCase(),\n    ) || null\n  )\n}\n\nexport function calculatePrice(\n  amount: BigNumber | string,\n  tokenPrice = 0,\n  decimals?: number,\n): BigNumber {\n  // returns amount * price as BN 18 precision\n  if (typeof amount === \"string\") {\n    if (isNaN(+amount)) return Zero\n    // kind of hacky, but need to prevent underflow error on large numbers\n    return parseUnits(\n      (+amount * tokenPrice).toLocaleString(\"en-US\", { useGrouping: false }),\n      18,\n    )\n  } else if (decimals != null) {\n    return amount\n      .mul(parseUnits(tokenPrice.toFixed(2), 18))\n      .div(BigNumber.from(10).pow(decimals))\n  }\n  return Zero\n}\n\nexport function getTokenSymbolForPoolType(poolType: PoolTypes): string {\n  if (poolType === PoolTypes.BTC) {\n    return \"WBTC\"\n  } else if (poolType === PoolTypes.ETH) {\n    return \"WETH\"\n  } else if (poolType === PoolTypes.USD) {\n    return \"USDC\"\n  } else {\n    return \"\"\n  }\n}\n\nexport const toHex = (num: number): string => {\n  return \"0x\" + num.toString(16)\n}\n\nexport const imageIconToUrl = (tokenIconPath: string): string => {\n  const host = window.location.origin\n  return `${host}/${tokenIconPath}`\n}\n","import { ChainId, NetworkContextName } from \"../constants\"\nimport { useEffect, useState } from \"react\"\n\nimport { Web3Provider } from \"@ethersproject/providers\"\nimport { Web3ReactContextInterface } from \"@web3-react/core/dist/types\"\nimport { injected } from \"../connectors\"\nimport { isMobile } from \"react-device-detect\"\nimport { useWeb3React as useWeb3ReactCore } from \"@web3-react/core\"\n\nexport function useActiveWeb3React(): Web3ReactContextInterface<Web3Provider> & {\n  chainId?: ChainId\n} {\n  const context = useWeb3ReactCore<Web3Provider>()\n  const contextNetwork = useWeb3ReactCore<Web3Provider>(NetworkContextName)\n  return context.active ? context : contextNetwork\n}\n\nexport function useEagerConnect(): boolean {\n  const { activate, active } = useWeb3ReactCore() // specifically using useWeb3ReactCore because of what this hook does\n  const [tried, setTried] = useState(false)\n\n  useEffect(() => {\n    void injected.isAuthorized().then((isAuthorized) => {\n      if (isAuthorized) {\n        activate(injected, undefined, true).catch(() => {\n          setTried(true)\n        })\n      } else {\n        if (isMobile && window.ethereum) {\n          activate(injected, undefined, true).catch(() => {\n            setTried(true)\n          })\n        } else {\n          setTried(true)\n        }\n      }\n    })\n  }, [activate]) // intentionally only running on mount (make sure it's only mounted once :))\n\n  // if the connection worked, wait until we get confirmation of that to flip the flag\n  useEffect(() => {\n    if (active) {\n      setTried(true)\n    }\n  }, [active])\n\n  return tried\n}\n\n/**\n * Use for network and injected - logs user in\n * and out after checking what network theyre on\n * @param {boolean} suppress Suppress useEffect behaviour\n */\nexport function useInactiveListener(suppress = false): void {\n  const { active, error, activate } = useWeb3ReactCore() // specifically using useWeb3React because of what this hook does\n\n  useEffect(() => {\n    const { ethereum } = window\n\n    if (ethereum && ethereum.on && !active && !error && !suppress) {\n      const handleChainChanged = (): void => {\n        // eat errors\n        activate(injected, undefined, true).catch((error) => {\n          console.error(\"Failed to activate after chain changed\", error)\n        })\n      }\n\n      const handleAccountsChanged = (accounts: string[]): void => {\n        if (accounts.length > 0) {\n          // eat errors\n          activate(injected, undefined, true).catch((error) => {\n            console.error(\"Failed to activate after accounts changed\", error)\n          })\n        }\n      }\n\n      ethereum.on(\"chainChanged\", handleChainChanged)\n      ethereum.on(\"accountsChanged\", handleAccountsChanged)\n\n      return (): void => {\n        if (ethereum.removeListener) {\n          ethereum.removeListener(\"chainChanged\", handleChainChanged)\n          ethereum.removeListener(\"accountsChanged\", handleAccountsChanged)\n        }\n      }\n    }\n    return undefined\n  }, [active, error, suppress, activate])\n}\n","/* eslint-disable */\nimport {\n  BRIDGE_CONTRACT_ADDRESSES,\n  BTC_POOL_NAME,\n  DAI,\n  FARMS_MAP,\n  FRAX,\n  // FRAX_STABLES_LP_FARM_NAME,\n  FRAX_METAPOOL_NAME,\n  FRAX_METAPOOL_FARM_NAME,\n  UST_METAPOOL_FARM_NAME,\n  FRAX_STABLES_LP_POOL_NAME,\n  FarmName,\n  POOLS_MAP,\n  PoolName,\n  ROSE,\n  ROSE_CONTRACT_ADDRESSES,\n  ROSE_FRAX_NLP_FARM_NAME,\n  ROSE_PAD_NLP_FARM_NAME,\n  SROSE,\n  SROSE_CONTRACT_ADDRESSES,\n  // SROSE_FARM_NAME,\n  STABLECOIN_POOL_V2_NAME,\n  STABLECOIN_SWAP_V2_TOKEN,\n  STABLES_FARM_NAME,\n  STAKED_ROSE_LP_POOL_NAME,\n  SWAP_MIGRATOR_USD_CONTRACT_ADDRESSES,\n  SYNTHETIX_CONTRACT_ADDRESSES,\n  SYNTHETIX_EXCHANGE_RATES_CONTRACT_ADDRESSES,\n  Token,\n  USDC,\n  USDT,\n  isLegacySwapABIPool,\n  isMetaPool,\n  UST_METAPOOL_NAME,\n  UST,\n} from \"../constants\"\n\nimport BRIDGE_CONTRACT_ABI from \"../constants/abis/bridge.json\"\nimport { Bridge } from \"../../types/ethers-contracts/Bridge\"\nimport { Contract } from \"@ethersproject/contracts\"\nimport ERC20_ABI from \"../constants/abis/erc20.json\"\nimport { Erc20 } from \"../../types/ethers-contracts/Erc20\"\nimport FRAX_META_POOL_ABI from \"../constants/abis/FraxMetaPool.json\"\nimport { FraxMetaPool } from \"../../types/ethers-contracts/FraxMetaPool\"\nimport META_SWAP_DEPOSIT_ABI from \"../constants/abis/metaSwapDeposit.json\"\nimport MIGRATOR_USD_CONTRACT_ABI from \"../constants/abis/swapMigratorUSD.json\"\nimport { MetaSwapDeposit } from \"../../types/ethers-contracts/MetaSwapDeposit\"\nimport ROSE_FRAX_LP_ABI from \"../constants/abis/RoseFraxLP.json\"\nimport ROSE_FRAX_POOL_ABI from \"../constants/abis/RoseFraxPool.json\"\nimport ROSE_STABLES_FARM_ABI from \"../constants/abis/RoseStablesFarm.json\"\nimport ROSE_STABLES_LP_ABI from \"../constants/abis/RoseStablesLP.json\"\nimport ROSE_STABLES_POOL_ABI from \"../constants/abis/RoseStablesPool.json\"\nimport { RoseFraxLP } from \"../../types/ethers-contracts/RoseFraxLP\"\nimport { RoseFraxPool } from \"../../types/ethers-contracts/RoseFraxPool\"\nimport { RoseStablesFarm } from \"../../types/ethers-contracts/RoseStablesFarm\"\nimport { RoseStablesLP } from \"../../types/ethers-contracts/RoseStablesLP\"\nimport { RoseStablesPool } from \"../../types/ethers-contracts/RoseStablesPool\"\nimport SROSE_ABI from \"../constants/abis/stRose.json\"\nimport SWAP_FLASH_LOAN_ABI from \"../constants/abis/swapFlashLoan.json\"\nimport SWAP_FLASH_LOAN_NO_WITHDRAW_FEE_ABI from \"../constants/abis/swapFlashLoanNoWithdrawFee.json\"\nimport SWAP_GUARDED_ABI from \"../constants/abis/swapGuarded.json\"\nimport SYNTHETIX_EXCHANGE_RATE_CONTRACT_ABI from \"../constants/abis/synthetixExchangeRate.json\"\nimport SYNTHETIX_NETWORK_TOKEN_CONTRACT_ABI from \"../constants/abis/synthetixNetworkToken.json\"\nimport { StRose } from \"../../types/ethers-contracts/StRose\"\nimport { SwapFlashLoan } from \"../../types/ethers-contracts/SwapFlashLoan\"\nimport { SwapFlashLoanNoWithdrawFee } from \"../../types/ethers-contracts/SwapFlashLoanNoWithdrawFee\"\nimport { SwapGuarded } from \"../../types/ethers-contracts/SwapGuarded\"\nimport { SwapMigratorUSD } from \"../../types/ethers-contracts/SwapMigratorUSD\"\nimport { SynthetixExchangeRate } from \"../../types/ethers-contracts/SynthetixExchangeRate\"\nimport { SynthetixNetworkToken } from \"../../types/ethers-contracts/SynthetixNetworkToken\"\nimport { getContract } from \"../utils\"\nimport { useActiveWeb3React } from \"./index\"\nimport { useMemo } from \"react\"\n\n// returns null on errors\nfunction useContract(\n  address: string | undefined,\n  ABI: any, // eslint-disable-line @typescript-eslint/no-explicit-any\n  withSignerIfPossible = true,\n): Contract | null {\n  const { library, account } = useActiveWeb3React()\n\n  return useMemo(() => {\n    if (!address || !ABI || !library) return null\n    try {\n      return getContract(\n        address,\n        ABI,\n        library,\n        withSignerIfPossible && account ? account : undefined,\n      )\n    } catch (error) {\n      console.error(\"Failed to get contract\", error)\n      return null\n    }\n  }, [address, ABI, library, withSignerIfPossible, account])\n}\n\n// TO-DO: update ABI\nexport function useFarmContract(farmName: FarmName): RoseStablesFarm | null {\n  const { chainId, account, library } = useActiveWeb3React()\n  return useMemo(() => {\n    if (!farmName || !library || !chainId) return null\n    try {\n      const farm = FARMS_MAP[farmName]\n      if (typeof farm.addresses === undefined) return null\n      switch (farmName) {\n        case STABLES_FARM_NAME:\n          return getContract(\n            farm.addresses[chainId],\n            JSON.stringify(ROSE_STABLES_FARM_ABI.abi),\n            library,\n            account ?? undefined,\n          ) as RoseStablesFarm\n        case FRAX_METAPOOL_FARM_NAME:\n          return getContract(\n            farm.addresses[chainId],\n            JSON.stringify(ROSE_STABLES_FARM_ABI.abi),\n            library,\n            account ?? undefined,\n          ) as RoseStablesFarm\n        case UST_METAPOOL_FARM_NAME:\n            return getContract(\n              farm.addresses[chainId],\n              JSON.stringify(ROSE_STABLES_FARM_ABI.abi),\n              library,\n              account ?? undefined,\n            ) as RoseStablesFarm\n        case ROSE_PAD_NLP_FARM_NAME:\n          return getContract(\n            farm.addresses[chainId],\n            JSON.stringify(ROSE_STABLES_FARM_ABI.abi),\n            library,\n            account ?? undefined,\n          ) as RoseStablesFarm\n        case ROSE_FRAX_NLP_FARM_NAME:\n          return getContract(\n            farm.addresses[chainId],\n            JSON.stringify(ROSE_STABLES_FARM_ABI.abi),\n            library,\n            account ?? undefined,\n          ) as RoseStablesFarm\n        // case SROSE_FARM_NAME:\n        //   return getContract(\n        //     farm.addresses[chainId],\n        //     JSON.stringify(ROSE_STABLES_FARM_ABI.abi),\n        //     library,\n        //     account ?? undefined,\n        //   ) as RoseStablesFarm\n        default:\n          return null\n      }\n    } catch (error) {\n      console.error(\"Failed to get contract\", error)\n      return null\n    }\n  }, [chainId, library, account, farmName])\n}\n\nexport function useRoseContract(): Erc20 | null {\n  const { chainId } = useActiveWeb3React()\n  const contractAddress = chainId ? ROSE_CONTRACT_ADDRESSES[chainId] : undefined\n  return useContract(contractAddress, ERC20_ABI) as Erc20\n}\n\nexport function useStRoseContract(): StRose | null {\n  const { chainId } = useActiveWeb3React()\n  const contractAddress = chainId\n    ? SROSE_CONTRACT_ADDRESSES[chainId]\n    : undefined\n  return useContract(contractAddress, SROSE_ABI.abi) as StRose\n}\n\nexport function useSwapMigratorUSDContract(): SwapMigratorUSD | null {\n  const { chainId } = useActiveWeb3React()\n  const contractAddress = chainId\n    ? SWAP_MIGRATOR_USD_CONTRACT_ADDRESSES[chainId]\n    : undefined\n  return useContract(\n    contractAddress,\n    MIGRATOR_USD_CONTRACT_ABI,\n  ) as SwapMigratorUSD\n}\n\nexport function useBridgeContract(): Bridge | null {\n  const { chainId } = useActiveWeb3React()\n  const contractAddress = chainId\n    ? BRIDGE_CONTRACT_ADDRESSES[chainId]\n    : undefined\n  return useContract(contractAddress, BRIDGE_CONTRACT_ABI) as Bridge\n}\n\nexport function useSynthetixContract(): SynthetixNetworkToken | null {\n  const { chainId } = useActiveWeb3React()\n  const contractAddress = chainId\n    ? SYNTHETIX_CONTRACT_ADDRESSES[chainId]\n    : undefined\n  return useContract(\n    contractAddress,\n    SYNTHETIX_NETWORK_TOKEN_CONTRACT_ABI,\n  ) as SynthetixNetworkToken\n}\n\nexport function useSynthetixExchangeRatesContract(): SynthetixExchangeRate | null {\n  const { chainId } = useActiveWeb3React()\n  const contractAddress = chainId\n    ? SYNTHETIX_EXCHANGE_RATES_CONTRACT_ADDRESSES[chainId]\n    : undefined\n  return useContract(\n    contractAddress,\n    SYNTHETIX_EXCHANGE_RATE_CONTRACT_ABI,\n  ) as SynthetixExchangeRate\n}\n\nexport function useTokenContract(\n  t: Token,\n  withSignerIfPossible?: boolean,\n): Contract | null {\n  const { chainId } = useActiveWeb3React()\n  const tokenAddress = chainId ? t.addresses[chainId] : undefined\n  return useContract(tokenAddress, ERC20_ABI, withSignerIfPossible)\n}\n\nexport function usePoolContract(poolName?: PoolName): Contract | null {\n  const { chainId, account, library } = useActiveWeb3React()\n  return useMemo(() => {\n    if (!poolName || !library || !chainId) return null\n    try {\n      const pool = POOLS_MAP[poolName]\n      if (typeof pool.addresses === undefined) return null\n      // use RoseFraxPool for a standard pool with 2 assets with 18 decimals each\n      switch (poolName) {\n        case STABLECOIN_POOL_V2_NAME:\n          return getContract(\n            pool.addresses[chainId],\n            JSON.stringify(ROSE_STABLES_POOL_ABI),\n            library,\n            account ?? undefined,\n          ) as RoseStablesPool\n        case FRAX_STABLES_LP_POOL_NAME:\n          return getContract(\n            pool.addresses[chainId],\n            JSON.stringify(ROSE_FRAX_POOL_ABI),\n            library,\n            account ?? undefined,\n          ) as RoseFraxPool\n        case STAKED_ROSE_LP_POOL_NAME:\n          return getContract(\n            pool.addresses[chainId],\n            JSON.stringify(ROSE_FRAX_POOL_ABI),\n            library,\n            account ?? undefined,\n          ) as RoseFraxPool\n        case FRAX_METAPOOL_NAME:\n          return getContract(\n            pool.addresses[chainId],\n            JSON.stringify(FRAX_META_POOL_ABI),\n            library,\n            account ?? undefined,\n          ) as FraxMetaPool\n        case UST_METAPOOL_NAME:\n          return getContract(\n            pool.addresses[chainId],\n            JSON.stringify(FRAX_META_POOL_ABI),\n            library,\n            account ?? undefined,\n          ) as FraxMetaPool\n        default:\n          return null\n      }\n    } catch (error) {\n      console.error(\"Failed to get contract\", error)\n      return null\n    }\n  }, [chainId, library, account, poolName])\n}\n\nexport function useSwapContract<T extends PoolName>(\n  poolName?: T,\n): T extends typeof BTC_POOL_NAME\n  ? SwapGuarded | null\n  : SwapFlashLoan | SwapFlashLoanNoWithdrawFee | MetaSwapDeposit | null\nexport function useSwapContract(\n  poolName?: PoolName,\n):\n  | SwapGuarded\n  | SwapFlashLoan\n  | SwapFlashLoanNoWithdrawFee\n  | MetaSwapDeposit\n  | null {\n  const { chainId, account, library } = useActiveWeb3React()\n  return useMemo(() => {\n    if (!poolName || !library || !chainId) return null\n    try {\n      const pool = POOLS_MAP[poolName]\n      if (poolName === BTC_POOL_NAME) {\n        return getContract(\n          pool.addresses[chainId],\n          SWAP_GUARDED_ABI,\n          library,\n          account ?? undefined,\n        ) as SwapGuarded\n      } else if (isLegacySwapABIPool(poolName)) {\n        return getContract(\n          pool.addresses[chainId],\n          SWAP_FLASH_LOAN_ABI,\n          library,\n          account ?? undefined,\n        ) as SwapFlashLoan\n      } else if (isMetaPool(poolName)) {\n        return getContract(\n          pool.addresses[chainId],\n          META_SWAP_DEPOSIT_ABI,\n          library,\n          account ?? undefined,\n        ) as MetaSwapDeposit\n      } else if (pool) {\n        return getContract(\n          pool.addresses[chainId],\n          SWAP_FLASH_LOAN_NO_WITHDRAW_FEE_ABI,\n          library,\n          account ?? undefined,\n        ) as SwapFlashLoanNoWithdrawFee\n      } else {\n        return null\n      }\n    } catch (error) {\n      console.error(\"Failed to get contract\", error)\n      return null\n    }\n  }, [chainId, library, account, poolName])\n}\n\nexport function useLPTokenContract(\n  poolName: PoolName,\n): RoseStablesLP | RoseFraxLP | null {\n  const { chainId, account, library } = useActiveWeb3React()\n  return useMemo(() => {\n    if (!poolName || !library || !chainId) return null\n    try {\n      const pool = POOLS_MAP[poolName]\n      // use RoseFraxLP for a standard pool with 2 assets with 18 decimals each\n      switch (poolName) {\n        case STABLECOIN_POOL_V2_NAME:\n          return getContract(\n            pool.lpToken.addresses[chainId],\n            JSON.stringify(ROSE_STABLES_LP_ABI),\n            library,\n            account ?? undefined,\n          ) as RoseStablesLP\n        case FRAX_STABLES_LP_POOL_NAME:\n          return getContract(\n            pool.lpToken.addresses[chainId],\n            JSON.stringify(ROSE_FRAX_LP_ABI),\n            library,\n            account ?? undefined,\n          ) as RoseFraxLP\n        case STAKED_ROSE_LP_POOL_NAME:\n          return getContract(\n            pool.lpToken.addresses[chainId],\n            JSON.stringify(ROSE_FRAX_LP_ABI),\n            library,\n            account ?? undefined,\n          ) as RoseFraxLP\n        case FRAX_METAPOOL_NAME:\n          return getContract(\n            pool.lpToken.addresses[chainId],\n            JSON.stringify(ROSE_FRAX_LP_ABI),\n            library,\n            account ?? undefined,\n          ) as RoseFraxLP\n        case UST_METAPOOL_NAME:\n          return getContract(\n            pool.lpToken.addresses[chainId],\n            JSON.stringify(ROSE_FRAX_LP_ABI),\n            library,\n            account ?? undefined,\n          ) as RoseFraxLP\n        default:\n          return null\n      }\n    } catch (error) {\n      console.error(\"Failed to get contract\", error)\n      return null\n    }\n  }, [chainId, library, account, poolName])\n}\n\nexport function useLPTokenContractForFarm(\n  farmName: FarmName,\n): RoseStablesLP | RoseFraxLP | null {\n  const { chainId, account, library } = useActiveWeb3React()\n  return useMemo(() => {\n    if (!farmName || !library || !chainId) return null\n    try {\n      const farm = FARMS_MAP[farmName]\n      // use RoseFraxLP for a standard farm with 18 decimals each\n      switch (farmName) {\n        case STABLES_FARM_NAME:\n          return getContract(\n            farm.lpToken.addresses[chainId],\n            JSON.stringify(ROSE_STABLES_LP_ABI),\n            library,\n            account ?? undefined,\n          ) as RoseStablesLP\n        case FRAX_METAPOOL_FARM_NAME:\n          return getContract(\n            farm.lpToken.addresses[chainId],\n            JSON.stringify(ROSE_FRAX_LP_ABI),\n            library,\n            account ?? undefined,\n          ) as RoseFraxLP\n        case UST_METAPOOL_FARM_NAME:\n            return getContract(\n              farm.lpToken.addresses[chainId],\n              JSON.stringify(ROSE_FRAX_LP_ABI),\n              library,\n              account ?? undefined,\n            ) as RoseFraxLP\n        case ROSE_PAD_NLP_FARM_NAME:\n          return getContract(\n            farm.lpToken.addresses[chainId],\n            JSON.stringify(ROSE_FRAX_LP_ABI),\n            library,\n            account ?? undefined,\n          ) as RoseFraxLP\n        case ROSE_FRAX_NLP_FARM_NAME:\n          return getContract(\n            farm.lpToken.addresses[chainId],\n            JSON.stringify(ROSE_FRAX_LP_ABI),\n            library,\n            account ?? undefined,\n          ) as RoseFraxLP\n        // case SROSE_FARM_NAME:\n        //   return getContract(\n        //     farm.lpToken.addresses[chainId],\n        //     JSON.stringify(ROSE_FRAX_LP_ABI),\n        //     library,\n        //     account ?? undefined,\n        //   ) as RoseFraxLP\n        default:\n          return null\n      }\n    } catch (error) {\n      console.error(\"Failed to get contract\", error)\n      return null\n    }\n  }, [chainId, library, account, farmName])\n}\n\ninterface AllContractsObject {\n  [x: string]: RoseStablesLP | Erc20 | null\n}\nexport function useAllContracts(): AllContractsObject | null {\n  const daiContract = useTokenContract(DAI) as Erc20\n  const usdcContract = useTokenContract(USDC) as Erc20\n  const usdtContract = useTokenContract(USDT) as Erc20\n  const fraxContract = useTokenContract(FRAX) as Erc20\n  const roseStablesLPContract = useTokenContract(\n    STABLECOIN_SWAP_V2_TOKEN,\n  ) as RoseStablesLP\n  const roseContract = useTokenContract(ROSE) as Erc20\n  const stroseContract = useTokenContract(SROSE) as Erc20\n  const ustContract = useTokenContract(UST) as Erc20\n\n  return useMemo(() => {\n    if (\n      ![daiContract, usdcContract, usdtContract, roseStablesLPContract].some(\n        Boolean,\n      )\n    )\n      return null\n    return {\n      [DAI.symbol]: daiContract,\n      [USDC.symbol]: usdcContract,\n      [USDT.symbol]: usdtContract,\n      [FRAX.symbol]: fraxContract,\n      [STABLECOIN_SWAP_V2_TOKEN.symbol]: roseStablesLPContract,\n      [ROSE.symbol]: roseContract,\n      [SROSE.symbol]: stroseContract,\n      [UST.symbol]: ustContract,\n    }\n  }, [\n    daiContract,\n    usdcContract,\n    usdtContract,\n    roseStablesLPContract,\n    fraxContract,\n    roseContract,\n    stroseContract,\n    ustContract,\n  ])\n}\n","/* eslint-disable */\nimport { AddressZero, Zero } from \"@ethersproject/constants\"\nimport {\n  ChainId,\n  // STABLECOIN_POOL_V2_NAME,\n  POOLS_MAP,\n  PoolName,\n  TRANSACTION_TYPES,\n} from \"../constants\"\nimport { Contract, Provider } from \"ethcall\"\nimport {\n  MulticallCall,\n  MulticallContract,\n  MulticallProvider,\n} from \"../types/ethcall\"\nimport { formatBNToPercentString, getContract } from \"../utils\"\nimport { useEffect, useState } from \"react\"\n\nimport { AppState } from \"../state\"\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport LPTOKEN_UNGUARDED_ABI from \"../constants/abis/lpTokenUnguarded.json\"\nimport { LpTokenUnguarded } from \"../../types/ethers-contracts/LpTokenUnguarded\"\nimport ROSE_STABLES_POOL from \"../constants/abis/RoseStablesPool.json\"\nimport { RoseStablesPool } from \"../../types/ethers-contracts/RoseStablesPool\"\nimport { parseUnits } from \"@ethersproject/units\"\nimport { useActiveWeb3React } from \".\"\nimport { usePoolContract } from \"./useContract\"\nimport { useSelector } from \"react-redux\"\n\ninterface TokenShareType {\n  percent: string\n  symbol: string\n  value: BigNumber\n}\n\nexport type Partners = \"keep\" | \"sharedStake\" | \"alchemix\"\nexport interface PoolDataType {\n  adminFee: BigNumber\n  aParameter: BigNumber\n  apy: BigNumber | null\n  name: string\n  reserve: BigNumber | null\n  swapFee: BigNumber\n  tokens: TokenShareType[]\n  totalLocked: BigNumber\n  utilization: BigNumber | null\n  virtualPrice: BigNumber\n  volume: BigNumber | null\n  isPaused: boolean\n  aprs: Partial<\n    Record<\n      Partners,\n      {\n        apr: BigNumber\n        symbol: string\n      }\n    >\n  >\n  lpTokenPriceUSD: BigNumber\n  lpToken: string\n}\n\nexport interface UserShareType {\n  lpTokenBalance: BigNumber\n  name: PoolName // TODO: does this need to be on user share?\n  share: BigNumber\n  tokens: TokenShareType[]\n  usdBalance: BigNumber\n  underlyingTokensAmount: BigNumber\n  amountsStaked: Partial<Record<Partners, BigNumber>>\n}\n\nexport type PoolDataHookReturnType = [PoolDataType, UserShareType | null]\n\nconst emptyPoolData = {\n  adminFee: Zero,\n  aParameter: Zero,\n  apy: null,\n  name: \"\",\n  reserve: null,\n  swapFee: Zero,\n  tokens: [],\n  totalLocked: Zero,\n  utilization: null,\n  virtualPrice: Zero,\n  volume: null,\n  aprs: {},\n  lpTokenPriceUSD: Zero,\n  lpToken: \"\",\n  isPaused: false,\n} as PoolDataType\n\nexport default function usePoolData(\n  poolName?: PoolName,\n): PoolDataHookReturnType {\n  const { account, library, chainId } = useActiveWeb3React()\n  const poolContract = usePoolContract(poolName)\n  const { tokenPricesUSD, lastTransactionTimes, swapStats } = useSelector(\n    (state: AppState) => state.application,\n  )\n  const lastDepositTime = lastTransactionTimes[TRANSACTION_TYPES.DEPOSIT]\n  const lastWithdrawTime = lastTransactionTimes[TRANSACTION_TYPES.WITHDRAW]\n  const lastSwapTime = lastTransactionTimes[TRANSACTION_TYPES.SWAP]\n  const lastMigrateTime = lastTransactionTimes[TRANSACTION_TYPES.MIGRATE]\n\n  const [poolData, setPoolData] = useState<PoolDataHookReturnType>([\n    {\n      ...emptyPoolData,\n      name: poolName || \"\",\n    },\n    null,\n  ])\n\n  useEffect(() => {\n    async function getPoolData(): Promise<void> {\n      if (\n        poolName == null ||\n        poolContract == null ||\n        tokenPricesUSD == null ||\n        library == null ||\n        chainId == null\n      )\n        return\n\n      // TODO: move to utils\n      function calculatePctOfTotalShare(lpTokenAmount: BigNumber): BigNumber {\n        // returns the % of total lpTokens\n        return lpTokenAmount\n          .mul(BigNumber.from(10).pow(18))\n          .div(\n            totalLpTokenBalance.isZero()\n              ? BigNumber.from(\"1\")\n              : totalLpTokenBalance,\n          )\n      }\n\n      const POOL = POOLS_MAP[poolName]\n      const effectivePoolTokens = POOL.poolTokens\n      const lpTokenContract = getContract(\n        POOL.lpToken.addresses[chainId],\n        LPTOKEN_UNGUARDED_ABI,\n        library,\n        account ?? undefined,\n      ) as LpTokenUnguarded\n\n      const ethcallProvider = new Provider() as MulticallProvider\n      await ethcallProvider.init(library)\n      // override the contract address when using aurora\n      if (chainId == ChainId.AURORA_TESTNET) {\n        ethcallProvider.multicallAddress =\n          \"0x508B1508AAd923fB24F6d13cD74Ac640fD8B66E8\"\n      } else if (chainId == ChainId.AURORA_MAINNET) {\n        ethcallProvider.multicallAddress =\n          \"0x49eb1F160e167aa7bA96BdD88B6C1f2ffda5212A\"\n      }\n\n      // get virtual price (failing in multicall, maybe because no liquidity yet?)\n      let virtualPrice: BigNumber\n      try {\n        virtualPrice = await poolContract.get_virtual_price()\n      } catch (e) {\n        console.log(`couldn't fetch virtual price`)\n        virtualPrice = Zero\n      }\n\n      // multicall: fetch A, fee, protocol_fee, token prices\n      const multicallPoolContract = new Contract(\n        poolContract.address,\n        ROSE_STABLES_POOL,\n      ) as MulticallContract<RoseStablesPool>\n      const a: MulticallCall<unknown, BigNumber> = multicallPoolContract.A()\n      const fee: MulticallCall<unknown, BigNumber> = multicallPoolContract.fee()\n      const poolTokenBalances = effectivePoolTokens.map((_, index) => {\n        return multicallPoolContract.balances(index)\n      })\n\n      // TODO: make a struct instead of an unfriendly array\n      const multicallResFormatted = await ethcallProvider.all(\n        [a, fee, ...poolTokenBalances],\n        \"latest\",\n      )\n      // TODO: kinda hacky way of adjusting decimals, need to do this generically\n      const tokenBalances = multicallResFormatted\n        .slice(2)\n        .map((balance, index) => {\n          return balance.mul(\n            BigNumber.from(10).pow(18 - effectivePoolTokens[index].decimals),\n          )\n        })\n\n      // get lp token balance and total supply\n      // TODO: use multicall\n      const [userLpTokenBalance, totalLpTokenBalance] = await Promise.all([\n        lpTokenContract.balanceOf(account || AddressZero),\n        lpTokenContract.totalSupply(),\n      ])\n\n      // calculate sum of token balances\n      const tokenBalancesSum: BigNumber = tokenBalances.reduce((sum, b) =>\n        sum.add(b),\n      )\n      const tokenBalancesUSD = effectivePoolTokens.map((token, i) => {\n        // use another token to estimate USD price of meta LP tokens\n        const balance = tokenBalances[i]\n        return balance\n          .mul(parseUnits(String(tokenPricesUSD[token.symbol] || 0), 18))\n          .div(BigNumber.from(10).pow(18))\n      })\n      const tokenBalancesUSDSum: BigNumber = tokenBalancesUSD.reduce((sum, b) =>\n        sum.add(b),\n      )\n      const lpTokenPriceUSD = tokenBalancesSum.isZero()\n        ? Zero\n        : tokenBalancesUSDSum\n            .mul(BigNumber.from(10).pow(18))\n            .div(tokenBalancesSum)\n\n      // calculate user share of pool\n      const userShare = calculatePctOfTotalShare(userLpTokenBalance)\n      const userPoolTokenBalances = tokenBalances.map((balance) => {\n        return userShare.mul(balance).div(BigNumber.from(10).pow(18))\n      })\n      const userPoolTokenBalancesSum: BigNumber = userPoolTokenBalances.reduce(\n        (sum, b) => sum.add(b),\n      )\n      const userPoolTokenBalancesUSD = tokenBalancesUSD.map((balance) => {\n        return userShare.mul(balance).div(BigNumber.from(10).pow(18))\n      })\n      const userPoolTokenBalancesUSDSum: BigNumber = userPoolTokenBalancesUSD.reduce(\n        (sum, b) => sum.add(b),\n      )\n\n      // format pool token balances and user pool tokens\n      const poolTokens = effectivePoolTokens.map((token, i) => ({\n        symbol: token.symbol,\n        percent: formatBNToPercentString(\n          tokenBalances[i]\n            .mul(10 ** 5)\n            .div(\n              totalLpTokenBalance.isZero()\n                ? BigNumber.from(\"1\")\n                : tokenBalancesSum,\n            ),\n          5,\n        ),\n        value: tokenBalances[i],\n      }))\n      const userPoolTokens = effectivePoolTokens.map((token, i) => ({\n        symbol: token.symbol,\n        percent: formatBNToPercentString(\n          tokenBalances[i]\n            .mul(10 ** 5)\n            .div(\n              totalLpTokenBalance.isZero()\n                ? BigNumber.from(\"1\")\n                : tokenBalancesSum,\n            ),\n          5,\n        ),\n        value: userPoolTokenBalances[i],\n      }))\n\n      // set final structs stored in state\n      const poolData = {\n        ...emptyPoolData,\n        name: poolName,\n        tokens: poolTokens,\n        reserve: tokenBalancesUSDSum,\n        totalLocked: totalLpTokenBalance,\n        aParameter: multicallResFormatted[0],\n        swapFee: multicallResFormatted[1],\n        virtualPrice,\n        lpTokenPriceUSD,\n        lpToken: POOL.lpToken.symbol,\n      }\n      const userShareData = account\n        ? {\n            name: poolName,\n            share: userShare,\n            underlyingTokensAmount: userPoolTokenBalancesSum,\n            usdBalance: userPoolTokenBalancesUSDSum,\n            tokens: userPoolTokens,\n            lpTokenBalance: userLpTokenBalance,\n            amountsStaked: {},\n          }\n        : null\n\n      setPoolData([poolData, userShareData])\n    }\n    void getPoolData()\n  }, [\n    lastDepositTime,\n    lastWithdrawTime,\n    lastSwapTime,\n    lastMigrateTime,\n    poolContract,\n    tokenPricesUSD,\n    poolName,\n    account,\n    library,\n    chainId,\n    swapStats,\n  ])\n\n  return poolData\n}\n","import \"./ConfirmTransaction.scss\"\n\nimport React, { ReactElement, ReactNode } from \"react\"\nimport { Text } from \"@chakra-ui/react\"\nimport classNames from \"classnames\"\nimport loadingGif from \"../assets/loading.gif\"\nimport { useTranslation } from \"react-i18next\"\n\nexport enum ModalType {\n  APPROVE = \"approve\",\n  CONFIRM = \"confirm\",\n  FAILED = \"failed\",\n  SUCCESS = \"success\",\n}\nexport interface ConfirmTransactionProps {\n  title?: string\n  type?: ModalType\n  description?: string\n  children?: ReactNode\n}\nfunction ConfirmTransaction({\n  title = \"confirmTransaction\",\n  type = ModalType.CONFIRM,\n  description = \"\",\n  children,\n}: ConfirmTransactionProps): ReactElement {\n  const { t } = useTranslation()\n\n  return (\n    <div className=\"confirmTransaction\">\n      <h3\n        className={classNames(\n          { failed: type === ModalType.FAILED },\n          { success: type === ModalType.SUCCESS },\n        )}\n      >\n        {t(title)}\n      </h3>\n      {description ? <Text>{description}</Text> : null}\n      {type === ModalType.CONFIRM ? (\n        <img src={loadingGif} alt=\"loading...\" className=\"loadingGif\" />\n      ) : null}\n      {children}\n    </div>\n  )\n}\n\nexport default ConfirmTransaction\n","export default __webpack_public_path__ + \"static/media/loading.37617537.gif\";","import \"./CheckboxInput.scss\"\n\nimport React, { ReactElement } from \"react\"\n\ninterface Props {\n  checked: boolean\n  onChange: () => void\n}\n\nexport default function CheckboxInput({\n  checked,\n  onChange,\n}: Props): ReactElement {\n  return (\n    <label className=\"checkboxInput\">\n      <input type=\"checkbox\" checked={checked} onChange={onChange} />\n      <div className=\"checkboxControl\">\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 24 24\"\n          aria-hidden=\"true\"\n          focusable=\"false\"\n        >\n          <path\n            fill=\"none\"\n            strokeWidth=\"4\"\n            d=\"M1.73 12.91l6.37 6.37L22.79 4.59\"\n          />\n        </svg>\n      </div>\n    </label>\n  )\n}\n","import \"./ToolTip.scss\"\n\nimport React, { ReactElement } from \"react\"\n\ninterface Props {\n  content: string\n}\nexport default function ToolTip({\n  content,\n  children,\n}: React.PropsWithChildren<Props>): ReactElement {\n  return (\n    <div className=\"toolTip\">\n      {children}\n      <div className=\"tooltipText\">{content}</div>\n    </div>\n  )\n}\n","import React, { ReactElement } from \"react\"\nimport {\n  updateInfiniteApproval,\n  updatePoolAdvancedMode,\n  updateSlippageCustom,\n  updateSlippageSelected,\n} from \"../state/user\"\nimport { useDispatch, useSelector } from \"react-redux\"\n\nimport { AppDispatch } from \"../state\"\nimport { AppState } from \"../state/index\"\nimport CheckboxInput from \"./CheckboxInput\"\nimport { PayloadAction } from \"@reduxjs/toolkit\"\nimport { Slippages } from \"../state/user\"\nimport ToolTip from \"./ToolTip\"\nimport classNames from \"classnames\"\nimport styles from \"./AdvancedOptions.module.scss\"\nimport { useTranslation } from \"react-i18next\"\n\nexport default function AdvancedOptions(): ReactElement {\n  const { t } = useTranslation()\n  const dispatch = useDispatch<AppDispatch>()\n  const {\n    infiniteApproval,\n    slippageCustom,\n    slippageSelected,\n    userPoolAdvancedMode: advanced,\n  } = useSelector((state: AppState) => state.user)\n\n  return (\n    <div className={styles.advancedOptions}>\n      <span\n        className={styles.title}\n        onClick={(): PayloadAction<boolean> =>\n          dispatch(updatePoolAdvancedMode(!advanced))\n        }\n      >\n        {t(\"advancedOptions\")}\n        <svg\n          className={classNames(styles.triangle, {\n            [styles.upsideDown]: advanced,\n          })}\n          width=\"16\"\n          height=\"10\"\n          viewBox=\"0 0 16 10\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            fillRule=\"evenodd\"\n            clipRule=\"evenodd\"\n            d=\"M14.8252 0C16.077 0 16.3783 0.827943 15.487 1.86207L8.80565 9.61494C8.35999 10.1321 7.63098 10.1246 7.19174 9.61494L0.510262 1.86207C-0.376016 0.833678 -0.0777447 0 1.17205 0L14.8252 0Z\"\n            fill=\"#B13550\"\n          />\n        </svg>\n      </span>\n      <div className={styles.divider}></div>\n      <div\n        className={classNames(styles.tableContainer, {\n          [styles.show]: advanced,\n        })}\n      >\n        <div className={styles.parameter}>\n          <div className={styles.infiniteApproval}>\n            <CheckboxInput\n              checked={infiniteApproval}\n              onChange={(): PayloadAction<boolean> =>\n                dispatch(updateInfiniteApproval(!infiniteApproval))\n              }\n            />\n            <ToolTip content={t(\"infiniteApprovalTooltip\")}>\n              <span className={styles.label}>{t(\"infiniteApproval\")}</span>\n            </ToolTip>\n          </div>\n        </div>\n        <div className={styles.parameter}>\n          <div className={styles.inputGroup}>\n            <div className={styles.options}>\n              <div className={styles.label}>{t(\"maxSlippage\")}: </div>\n              <button\n                className={classNames({\n                  [styles.selected]: slippageSelected === Slippages.OneTenth,\n                })}\n                onClick={(): PayloadAction<Slippages> =>\n                  dispatch(updateSlippageSelected(Slippages.OneTenth))\n                }\n              >\n                <span>0.1%</span>\n              </button>\n              <button\n                className={classNames({\n                  [styles.selected]: slippageSelected === Slippages.One,\n                })}\n                onClick={(): PayloadAction<Slippages> =>\n                  dispatch(updateSlippageSelected(Slippages.One))\n                }\n              >\n                <span>1%</span>\n              </button>\n              <div>\n                <input\n                  value={slippageCustom?.valueRaw}\n                  onChange={(e: React.ChangeEvent<HTMLInputElement>): void => {\n                    const value = e.target.value\n                    if (value && !isNaN(+value)) {\n                      dispatch(updateSlippageCustom(value))\n                      if (slippageSelected !== Slippages.Custom) {\n                        dispatch(updateSlippageSelected(Slippages.Custom))\n                      }\n                    } else {\n                      dispatch(updateSlippageSelected(Slippages.OneTenth))\n                    }\n                  }}\n                />\n                &nbsp;%\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React, { ReactElement } from \"react\"\nimport { Link } from \"react-router-dom\"\nimport styles from \"./BackButton.module.scss\"\n\ninterface Props {\n  wrapperClass?: string\n  route: string\n  buttonText: string\n}\n\nexport default function BackButton(props: Props): ReactElement {\n  const { wrapperClass, route, buttonText } = props\n  return (\n    <div className={wrapperClass}>\n      <Link to={route} className={styles.arrowLeft}>\n        <i>{buttonText}</i>\n      </Link>\n    </div>\n  )\n}\n","import \"./LPStakingBanner.scss\"\n\nimport React, { ReactElement } from \"react\"\n\nimport { useTranslation } from \"react-i18next\"\n\ninterface Props {\n  stakingLink: string\n}\n\nfunction LPStakingBanner({ stakingLink }: Props): ReactElement {\n  const { t } = useTranslation()\n\n  return (\n    <div className=\"lpStakingBanner\">\n      <p>\n        {t(\"lpMustStakeForRewards\")} &lt;\n        <a href={stakingLink} target=\"_blank\" rel=\"noopener noreferrer\">\n          {t(\"stakeHere\")}\n        </a>\n        &gt;\n      </p>\n    </div>\n  )\n}\n\nexport default LPStakingBanner\n","import \"./Modal.scss\"\n\nimport React, { ReactElement, ReactNode } from \"react\"\n\ninterface Props {\n  isOpen: boolean\n  onClose: () => void\n  children: ReactNode\n  height?: string\n}\n\nfunction Modal({ isOpen, onClose, children }: Props): ReactElement | null {\n  if (!isOpen) return null\n  else\n    return (\n      // Modal container, provide the dark background\n      <div\n        className=\"modal\"\n        onClick={(e: React.MouseEvent<HTMLSpanElement, MouseEvent>): void => {\n          if (e.target === e.currentTarget) {\n            onClose()\n          }\n        }}\n      >\n        {/* Modal content */}\n        <div className=\"modalContent\">\n          <span\n            className=\"close\"\n            onClick={(\n              e: React.MouseEvent<HTMLSpanElement, MouseEvent>,\n            ): void => {\n              e.stopPropagation()\n              onClose()\n            }}\n          >\n            &times;\n          </span>\n          {children}\n        </div>\n      </div>\n    )\n}\n\nexport default Modal\n","import \"./MyShareCard.scss\"\n\nimport { POOLS_MAP, PoolTypes, TOKENS_MAP } from \"../constants\"\nimport { Partners, UserShareType } from \"../hooks/usePoolData\"\nimport React, { ReactElement } from \"react\"\nimport { formatBNToPercentString, formatBNToString } from \"../utils\"\n\nimport { Zero } from \"@ethersproject/constants\"\nimport { commify } from \"@ethersproject/units\"\nimport { useTranslation } from \"react-i18next\"\n\ninterface Props {\n  data: UserShareType | null\n}\n\nfunction MyShareCard({ data }: Props): ReactElement | null {\n  const { t } = useTranslation()\n\n  if (!data) return null\n  const { type: poolType } = POOLS_MAP[data.name]\n  const formattedDecimals = poolType === PoolTypes.USD ? 2 : 4\n\n  const formattedData = {\n    share: formatBNToPercentString(data.share, 18),\n    shareAmount: commify(\n      formatBNToString(data.underlyingTokensAmount, 18, formattedDecimals),\n    ),\n    usdBalance: commify(formatBNToString(data.usdBalance, 18, 2)),\n    lpTokenBalance: commify(\n      formatBNToString(data.lpTokenBalance, 18, formattedDecimals),\n    ),\n    amountsStaked: Object.keys(data.amountsStaked).reduce((acc, key) => {\n      const value = data.amountsStaked[key as keyof typeof data.amountsStaked]\n      return value\n        ? {\n            ...acc,\n            [key]: commify(formatBNToString(value, 18, formattedDecimals)),\n          }\n        : acc\n    }, {} as typeof data.amountsStaked),\n    tokens: data.tokens.map((coin) => {\n      const token = TOKENS_MAP[coin.symbol]\n      return {\n        symbol: token.symbol,\n        name: token.name,\n        value: commify(formatBNToString(coin.value, 18, formattedDecimals)),\n      }\n    }),\n  }\n  const stakingUrls = {\n    keep: \"https://dashboard.keep.network/liquidity\",\n    sharedStake: \"https://dashboard.keep.network/liquidity\",\n    alchemix: \"https://app.alchemix.fi/farms\",\n  }\n\n  return (\n    <div className=\"myShareCard\">\n      <h4>{t(\"myShare\")}</h4>\n      <div className=\"info\">\n        <div className=\"poolShare\">\n          <span>\n            {formattedData.share} {t(\"ofPool\")}\n          </span>\n        </div>\n        <div className=\"infoItem\">\n          <span className=\"label bold\">{`${t(\"usdBalance\")}: `}</span>\n          <span className=\"value\">{`$${formattedData.usdBalance}`}</span>\n        </div>\n        <div className=\"infoItem\">\n          <span className=\"label bold\">{`${t(\"poolTokenBalance\")}: `}</span>\n          <span className=\"value\">{`${formattedData.shareAmount}`}</span>\n        </div>\n        <div className=\"infoItem\">\n          <span className=\"label bold\">{`${t(\"lpTokenBalance\")}: `}</span>\n          <span className=\"value\">{formattedData.lpTokenBalance}</span>\n          {Object.keys(data.amountsStaked).map((key) => {\n            return data.amountsStaked[key as Partners]?.gt(Zero) ? (\n              <span className=\"value\">\n                &nbsp;\n                <a\n                  href={stakingUrls[key as Partners]}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  ({formattedData.amountsStaked[key as Partners]} {t(\"staked\")})\n                </a>\n              </span>\n            ) : null\n          })}\n        </div>\n      </div>\n      <div className=\"currency\">\n        {formattedData.tokens.map((coin) => (\n          <div key={coin.symbol}>\n            <span className=\"tokenName\">{coin.symbol}</span>\n            <span className=\"tokenValue\">{coin.value}</span>\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n\nexport default MyShareCard\n","import \"./PoolInfoCard.scss\"\n\nimport {\n  POOLS_MAP,\n  POOL_FEE_PRECISION,\n  PoolTypes,\n  TOKENS_MAP,\n} from \"../constants\"\nimport React, { ReactElement } from \"react\"\nimport { formatBNToPercentString, formatBNToString } from \"../utils\"\n\nimport { PoolDataType } from \"../hooks/usePoolData\"\nimport ToolTip from \"./ToolTip\"\nimport { commify } from \"@ethersproject/units\"\nimport { useTranslation } from \"react-i18next\"\n\ninterface Props {\n  data: PoolDataType | null\n}\n\nfunction PoolInfoCard({ data }: Props): ReactElement | null {\n  const { t } = useTranslation()\n  if (data == null) return null\n  const { type: poolType, underlyingPool } = POOLS_MAP[data?.name]\n  const formattedDecimals = poolType === PoolTypes.USD ? 2 : 4\n  const swapFee = data?.swapFee\n    ? formatBNToPercentString(data.swapFee, POOL_FEE_PRECISION)\n    : null\n  const formattedData = {\n    name: data?.name,\n    swapFee,\n    aParameter: data?.aParameter\n      ? commify(formatBNToString(data.aParameter, 0, 0))\n      : \"-\",\n    virtualPrice: data?.virtualPrice\n      ? commify(formatBNToString(data.virtualPrice, 18, 5))\n      : \"-\",\n    utilization: data?.utilization\n      ? formatBNToPercentString(data.utilization, 18, 0)\n      : \"-\",\n    reserve: data?.reserve\n      ? commify(formatBNToString(data.reserve, 18, 2))\n      : \"-\",\n    adminFee: swapFee,\n    volume: data?.volume ? commify(formatBNToString(data.volume, 0, 0)) : \"-\",\n    tokens:\n      data?.tokens.map((coin) => {\n        const token = TOKENS_MAP[coin.symbol]\n        return {\n          symbol: token.symbol,\n          name: token.name,\n          icon: token.icon,\n          percent: coin.percent,\n          value: commify(formatBNToString(coin.value, 18, formattedDecimals)),\n        }\n      }) || [],\n  }\n\n  return (\n    <div className=\"poolInfoCard\">\n      {underlyingPool ? (\n        <ToolTip content={t(\"metapool\")}>\n          <h4 className=\"underline\">{formattedData.name}</h4>\n        </ToolTip>\n      ) : (\n        <h4>{formattedData.name}</h4>\n      )}\n      <div className=\"info\">\n        <div className=\"infoItem\">\n          <span className=\"label bold\">{`${t(\"fee\")}:`}</span>\n          <span className=\"value\">{formattedData.swapFee}</span>\n        </div>\n        <div className=\"infoItem\">\n          <ToolTip content={t(\"aParameterTooltip\")}>\n            <span className=\"label bold underline\">{`${t(\n              \"aParameter\",\n            )}:`}</span>\n          </ToolTip>\n          <span className=\"value\">{formattedData.aParameter}</span>\n        </div>\n        <div className=\"infoItem\">\n          <span className=\"label bold\">{`${t(\"virtualPrice\")}:`}</span>\n          <span className=\"value\">{formattedData.virtualPrice}</span>\n        </div>\n        {/* <div className=\"infoItem\">\n          <span className=\"label bold\">{`${t(\"utilization\")}:`}</span>\n          <span className=\"value\">{formattedData.utilization}</span>\n        </div> */}\n        <div className=\"infoItem\">\n          <span className=\"label bold\">{`${t(\"totalLocked\")}:`}</span>\n          <span className=\"value\">{`$${formattedData.reserve}`}</span>\n        </div>\n        {/* <div className=\"twoColumn\">\n          <div className=\"infoItem\">\n            <span className=\"label bold\">{t(\"dailyVolume\") + \": \"}</span>\n            <span className=\"value\">{formattedData.volume}</span>\n          </div>\n        </div> */}\n      </div>\n      <div className=\"divider\" />\n      <div className=\"bottom\">\n        <h4>{t(\"currencyReserves\")}</h4>\n        <span>{`$${formattedData.reserve} ${t(\"inTotal\")}`}</span>\n        <div className=\"tokenList\">\n          {formattedData.tokens.map((token, index) => (\n            <div className=\"token\" key={index}>\n              <img alt=\"icon\" src={token.icon} />\n              <span className=\"bold\">{`${token.symbol} ${token.percent}`}</span>\n              <span className=\"tokenValue\">{token.value}</span>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default PoolInfoCard\n","import \"./Button.scss\"\n\nimport React, { ReactElement } from \"react\"\n\nimport classNames from \"classnames\"\n\ntype Props = {\n  disabled?: boolean\n  kind?: \"primary\" | \"secondary\" | \"ternary\" | \"cancel\" | \"temporary\"\n  size?: \"xlarge\" | \"large\" | \"medium\" | \"small\"\n  onClick?: (e: React.MouseEvent<HTMLButtonElement>) => void\n}\nexport default function Button(\n  props: React.PropsWithChildren<Props>,\n): ReactElement {\n  const { kind = \"primary\", size = \"large\", ...buttonProps } = props\n  return (\n    <button className={classNames(\"button\", kind, size)} {...buttonProps} />\n  )\n}\n","import \"./HighPriceImpactConfirmation.scss\"\n\nimport React, { ReactElement } from \"react\"\n\nimport CheckboxInput from \"./CheckboxInput\"\nimport { useTranslation } from \"react-i18next\"\n\ninterface Props {\n  checked: boolean\n  onCheck: () => void\n}\nexport default function HighPriceImpactConfirmation({\n  checked,\n  onCheck,\n}: Props): ReactElement {\n  const { t } = useTranslation()\n  return (\n    <div className=\"highPriceImpactConfirmation\">\n      {t(\"highPriceImpactConfirmation\")}\n      <div className=\"confirmationBox\">\n        <span>{t(\"iConfirm\")}</span>{\" \"}\n        <CheckboxInput checked={checked} onChange={onCheck} />\n      </div>\n    </div>\n  )\n}\n","import { BigNumber } from \"ethers\"\nimport { GasPrices } from \"../state/user\"\nimport { NumberInputState } from \"./numberInputState\"\n\nexport function gasBNFromState(\n  gasPricesGwei: {\n    gasStandard?: number\n    gasFast?: number\n    gasInstant?: number\n  },\n  gasSelected: GasPrices,\n  gasCustom?: NumberInputState,\n): BigNumber {\n  const { gasStandard = 0, gasFast = 0, gasInstant = 0 } = gasPricesGwei\n  let gasPrice\n  if (gasSelected === GasPrices.Custom) {\n    gasPrice = gasCustom?.valueSafe\n  } else if (gasSelected === GasPrices.Fast) {\n    gasPrice = gasFast\n  } else if (gasSelected === GasPrices.Instant) {\n    gasPrice = gasInstant\n  } else {\n    gasPrice = gasStandard\n  }\n  return BigNumber.from(gasPrice)\n}\n\nexport function formatGasToString(\n  gasPricesGwei: {\n    gasStandard?: number\n    gasFast?: number\n    gasInstant?: number\n  },\n  gasSelected: GasPrices,\n  gasCustom?: NumberInputState,\n): string {\n  return gasBNFromState(gasPricesGwei, gasSelected, gasCustom).toString()\n}\n","import { BigNumber } from \"@ethersproject/bignumber\"\nimport { NumberInputState } from \"./numberInputState\"\nimport { Slippages } from \"../state/user\"\nimport { formatUnits } from \"@ethersproject/units\"\n\n/**\n * Given an input value and slippage redux state values, do the math.\n * @param {BigNumber} inputValue\n * @param {Slippages} slippageSelected\n * @param {NumberInputState} slippageCustom\n * @param {boolean} add\n * @return {BigNumber}\n */\nexport function _applySlippage(\n  inputValue: BigNumber,\n  slippageSelected: Slippages,\n  slippageCustom?: NumberInputState,\n  add = false,\n): BigNumber {\n  let numerator\n  let denominator\n  if (slippageSelected === Slippages.Custom && !!slippageCustom) {\n    denominator = BigNumber.from(10).pow(slippageCustom.precision + 2)\n    numerator = add\n      ? denominator.add(slippageCustom.valueSafe)\n      : denominator.sub(slippageCustom.valueSafe)\n  } else if (slippageSelected === Slippages.OneTenth) {\n    denominator = 1000\n    numerator = denominator + (add ? 1 : -1)\n  } else {\n    // default to 1%\n    denominator = 100\n    numerator = denominator + (add ? 1 : -1)\n  }\n  return inputValue.mul(numerator).div(denominator)\n}\n\nexport function addSlippage(\n  inputValue: BigNumber,\n  slippageSelected: Slippages,\n  slippageCustom?: NumberInputState,\n): BigNumber {\n  return _applySlippage(inputValue, slippageSelected, slippageCustom, true)\n}\n\nexport function subtractSlippage(\n  inputValue: BigNumber,\n  slippageSelected: Slippages,\n  slippageCustom?: NumberInputState,\n): BigNumber {\n  return _applySlippage(inputValue, slippageSelected, slippageCustom, false)\n}\n\nexport function formatSlippageToString(\n  slippageSelected: Slippages,\n  slippageCustom?: NumberInputState,\n): string {\n  if (slippageSelected === Slippages.Custom && !!slippageCustom) {\n    return formatUnits(slippageCustom.valueSafe, slippageCustom?.precision)\n  } else if (slippageSelected === Slippages.OneTenth) {\n    return formatUnits(BigNumber.from(100), 3)\n  } else if (slippageSelected === Slippages.One) {\n    return formatUnits(BigNumber.from(100), 2)\n  } else {\n    return \"N/A\"\n  }\n}\n","import { BigNumber } from \"@ethersproject/bignumber\"\nimport { Zero } from \"@ethersproject/constants\"\n\nexport function isHighPriceImpact(priceImpact: BigNumber): boolean {\n  // assumes that priceImpact has 18d precision\n  const negOne = BigNumber.from(10)\n    .pow(18 - 2)\n    .mul(-1)\n  return priceImpact.lte(negOne)\n}\n\nexport function calculatePriceImpact(\n  tokenInputAmount: BigNumber, // assumed to be 18d precision\n  tokenOutputAmount: BigNumber,\n  virtualPrice = BigNumber.from(10).pow(18),\n  isWithdraw = false,\n): BigNumber {\n  // We want to multiply the lpTokenAmount by virtual price\n  // Deposits: (VP * output) / input - 1\n  // Swaps: (1 * output) / input - 1\n  // Withdraws: output / (input * VP) - 1\n  if (tokenInputAmount.lte(0)) return Zero\n\n  return isWithdraw\n    ? tokenOutputAmount\n        .mul(BigNumber.from(10).pow(36))\n        .div(tokenInputAmount.mul(virtualPrice))\n        .sub(BigNumber.from(10).pow(18))\n    : virtualPrice\n        .mul(tokenOutputAmount)\n        .div(tokenInputAmount)\n        .sub(BigNumber.from(10).pow(18))\n}\n","import \"./ReviewDeposit.scss\"\n\nimport React, { ReactElement, useState } from \"react\"\nimport { commify, formatBNToPercentString, formatBNToString } from \"../utils\"\n\nimport { AppState } from \"../state/index\"\nimport Button from \"./Button\"\nimport { DepositTransaction } from \"../interfaces/transactions\"\nimport HighPriceImpactConfirmation from \"./HighPriceImpactConfirmation\"\nimport { formatGasToString } from \"../utils/gas\"\nimport { formatSlippageToString } from \"../utils/slippage\"\nimport { isHighPriceImpact } from \"../utils/priceImpact\"\nimport { useSelector } from \"react-redux\"\nimport { useTranslation } from \"react-i18next\"\n\ninterface Props {\n  onClose: () => void\n  onConfirm: () => void\n  transactionData: DepositTransaction\n}\n\nfunction ReviewDeposit({\n  onClose,\n  onConfirm,\n  transactionData,\n}: Props): ReactElement {\n  const { t } = useTranslation()\n  const {\n    slippageCustom,\n    slippageSelected,\n    gasPriceSelected,\n    gasCustom,\n  } = useSelector((state: AppState) => state.user)\n  const { gasStandard, gasFast, gasInstant } = useSelector(\n    (state: AppState) => state.application,\n  )\n  const [\n    hasConfirmedHighPriceImpact,\n    setHasConfirmedHighPriceImpact,\n  ] = useState(false)\n  const isHighPriceImpactTxn = isHighPriceImpact(transactionData.priceImpact)\n\n  return (\n    <div className=\"reviewDeposit\">\n      <h3>{t(\"reviewDeposit\")}</h3>\n      <div className=\"table\">\n        <h4>{t(\"depositing\")}</h4>\n        <div className=\"tokenList\">\n          {transactionData.from.items.map(({ token, amount }) => (\n            <div className=\"eachToken\" key={token.symbol}>\n              <div className=\"token\">\n                <img src={token.icon} alt=\"icon\" />\n                <span>{token.symbol}</span>\n              </div>\n              <div className=\"value\">\n                <span className=\"value\">\n                  {commify(formatBNToString(amount, token.decimals))}\n                </span>\n              </div>\n            </div>\n          ))}\n          <div className=\"eachToken\">\n            <div className=\"token\">\n              <b>{t(\"total\")}</b>\n            </div>\n            <div className=\"value\">\n              <b className=\"value\">\n                {commify(\n                  formatBNToString(transactionData.from.totalAmount, 18),\n                )}\n              </b>\n            </div>\n          </div>\n        </div>\n        <div className=\"divider\" style={{ height: \"1px\", width: \"100%\" }}></div>\n        <h4>{t(\"receiving\")}</h4>\n        <div className=\"tokenList\">\n          <div className=\"eachToken\" key={transactionData.to.item.token.symbol}>\n            <div className=\"token\">\n              <img src={transactionData.to.item.token.icon} alt=\"icon\" />\n              <span>{transactionData.to.item.token.symbol}</span>\n            </div>\n            <div className=\"value\">\n              <span className=\"value\">\n                {commify(\n                  formatBNToString(\n                    transactionData.to.item.amount,\n                    transactionData.to.item.token.decimals,\n                  ),\n                )}\n              </span>\n            </div>\n          </div>\n        </div>\n        <div className=\"divider\" style={{ height: \"1px\", width: \"100%\" }}></div>\n        <div className=\"depositInfoItem\">\n          <span className=\"label\">{t(\"shareOfPool\")}</span>\n          <span className=\"value\">\n            {formatBNToPercentString(transactionData.shareOfPool, 18)}\n          </span>\n        </div>\n        <div className=\"depositInfoItem\">\n          <span className=\"label\">{t(\"gas\")}</span>\n          <span className=\"value\">\n            {formatGasToString(\n              { gasStandard, gasFast, gasInstant },\n              gasPriceSelected,\n              gasCustom,\n            )}{\" \"}\n            GWEI\n          </span>\n        </div>\n        {transactionData.txnGasCost?.valueUSD && (\n          <div className=\"depositInfoItem\">\n            <span className=\"label\">{t(\"estimatedTxCost\")}</span>\n            <span className=\"value\">\n              {`≈$${commify(\n                formatBNToString(transactionData.txnGasCost.valueUSD, 2, 2),\n              )}`}\n            </span>\n          </div>\n        )}\n        <div className=\"depositInfoItem\">\n          <span className=\"label\">{t(\"maxSlippage\")}</span>\n          <span className=\"value\">\n            {formatSlippageToString(slippageSelected, slippageCustom)}%\n          </span>\n        </div>\n        <div className=\"depositInfoItem\">\n          <span className=\"label\">{t(\"rates\")}</span>\n          <div className=\"rates value\">\n            {transactionData.from.items.map(\n              ({ token, singleTokenPriceUSD }) => (\n                <span key={token.symbol}>\n                  1 {token.symbol} = $\n                  {commify(formatBNToString(singleTokenPriceUSD, 18, 2))}\n                </span>\n              ),\n            )}\n            {[transactionData.to.item].map(({ token, singleTokenPriceUSD }) => (\n              <span key={token.symbol}>\n                1 {token.symbol} = $\n                {commify(formatBNToString(singleTokenPriceUSD, 18, 2))}\n              </span>\n            ))}\n          </div>\n        </div>\n      </div>\n      {isHighPriceImpactTxn && (\n        <HighPriceImpactConfirmation\n          checked={hasConfirmedHighPriceImpact}\n          onCheck={(): void =>\n            setHasConfirmedHighPriceImpact((prevState) => !prevState)\n          }\n        />\n      )}\n      <div className=\"bottom\">\n        <p>{t(\"estimatedOutput\")}</p>\n        <div className=\"buttonWrapper\">\n          <Button\n            onClick={onConfirm}\n            kind=\"primary\"\n            disabled={isHighPriceImpactTxn && !hasConfirmedHighPriceImpact}\n          >\n            {t(\"confirmDeposit\")}\n          </Button>\n          <Button onClick={onClose} kind=\"cancel\">\n            {t(\"cancel\")}\n          </Button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ReviewDeposit\n","import { LPTOKEN_TO_POOL_MAP, TOKENS_MAP } from \"../constants\"\nimport React, { ReactElement } from \"react\"\nimport { calculatePrice, commify } from \"../utils\"\nimport { AppState } from \"../state/index\"\nimport { BigNumber } from \"ethers\"\nimport { Zero } from \"@ethersproject/constants\"\nimport { formatBNToString } from \"../utils\"\nimport styles from \"./TokenInput.module.scss\"\nimport usePoolData from \"../hooks/usePoolData\"\nimport { useSelector } from \"react-redux\"\nimport { useTranslation } from \"react-i18next\"\n\ninterface Props {\n  symbol: string\n  icon: string\n  max?: string\n  inputValue: string\n  onChange: (value: string) => void\n  disabled?: boolean\n  readonly?: boolean\n}\n\nfunction TokenInput({\n  symbol,\n  icon,\n  max,\n  inputValue,\n  onChange,\n  disabled,\n  readonly,\n}: Props): ReactElement {\n  const { t } = useTranslation()\n  const { name } = TOKENS_MAP[symbol]\n\n  let tokenUSDValue: number | BigNumber | undefined\n  const poolName = LPTOKEN_TO_POOL_MAP[symbol]\n  const [poolData] = usePoolData(poolName)\n  const { tokenPricesUSD } = useSelector((state: AppState) => state.application)\n\n  if (poolData.lpTokenPriceUSD != Zero) {\n    tokenUSDValue = parseFloat(\n      formatBNToString(poolData.lpTokenPriceUSD, 18, 2),\n    )\n  } else {\n    tokenUSDValue = tokenPricesUSD?.[symbol]\n  }\n\n  function onChangeInput(e: React.ChangeEvent<HTMLInputElement>): void {\n    const { decimals } = TOKENS_MAP[symbol]\n    // remove all chars that aren't a digit or a period\n    const newValue = e.target.value.replace(/[^\\d|.]/g, \"\")\n    // disallow more than one period\n    if (newValue.indexOf(\".\") !== newValue.lastIndexOf(\".\")) return\n    const parsedValue = parseFloat(\"0\" + newValue)\n    const periodIndex = newValue.indexOf(\".\")\n    const isValidInput = newValue === \"\" || !isNaN(parsedValue)\n    const isValidPrecision =\n      periodIndex === -1 || newValue.length - 1 - periodIndex <= decimals\n    if (isValidInput && isValidPrecision) {\n      // don't allow input longer than the token allows\n      onChange(newValue)\n    }\n  }\n\n  return (\n    <div>\n      {max != null && (\n        <div className={styles.balanceContainer}>\n          <span>{t(\"balance\")}:</span>\n          &nbsp;\n          <a onClick={() => onChange(String(max))}>{max}</a>\n        </div>\n      )}\n\n      <div className={styles.tokenInputContainer} id=\"tokenInput\">\n        <img alt=\"icon\" src={icon} />\n        <div className={styles.tokenSymbolAndName}>\n          <p className={styles.boldText}>{symbol}</p>\n          <p className={styles.smallText}>{name}</p>\n        </div>\n        <div className={styles.inputGroup}>\n          <input\n            autoComplete=\"off\"\n            autoCorrect=\"off\"\n            type=\"text\"\n            placeholder=\"0.0\"\n            spellCheck=\"false\"\n            disabled={disabled ? true : false}\n            readOnly={readonly}\n            value={inputValue}\n            onChange={onChangeInput}\n            onFocus={(e: React.ChangeEvent<HTMLInputElement>): void =>\n              e.target.select()\n            }\n          />\n          <p className={styles.smallText}>\n            ≈$\n            {commify(\n              formatBNToString(\n                calculatePrice(inputValue, tokenUSDValue),\n                18,\n                2,\n              ),\n            )}\n          </p>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default TokenInput\n","import \"./ThemeChanger.scss\"\n\nimport { AppDispatch, AppState } from \"../state\"\nimport React, { ReactElement, useEffect } from \"react\"\nimport { useDispatch, useSelector } from \"react-redux\"\n\nimport { updateDarkMode } from \"../state/user\"\nimport { useColorMode } from \"@chakra-ui/react\"\n\nconst ThemeChanger = (): ReactElement => {\n  const dispatch = useDispatch<AppDispatch>()\n  const { colorMode, toggleColorMode } = useColorMode()\n  const { userDarkMode } = useSelector((state: AppState) => state.user)\n\n  useEffect(() => {\n    if (userDarkMode) {\n      document.body.classList.add(\"dark\")\n    } else {\n      document.body.classList.remove(\"dark\")\n    }\n  }, [userDarkMode])\n\n  return (\n    <div className=\"themeChanger\">\n      <button\n        onClick={(): void => {\n          dispatch(updateDarkMode(!userDarkMode))\n          if (\n            (userDarkMode && colorMode === \"dark\") ||\n            (!userDarkMode && colorMode === \"light\")\n          ) {\n            toggleColorMode()\n          }\n        }}\n      >\n        {userDarkMode ? \"☾\" : \"☀\"}\n      </button>\n    </div>\n  )\n}\n\nexport default ThemeChanger\n","import React, { ReactElement } from \"react\"\nimport useCopyClipboard from \"../hooks/useCopyClipboard\"\n\nexport default function CopyHelper(props: {\n  toCopy: string\n  children?: React.ReactNode\n}): ReactElement {\n  const [isCopied, setCopied] = useCopyClipboard()\n\n  return (\n    <button className=\"textStyle\" onClick={() => setCopied(props.toCopy)}>\n      {isCopied ? (\n        <>\n          {/* Shows check icon after copied */}\n          <svg\n            width=\"16\"\n            height=\"16\"\n            viewBox=\"0 0 16 16\"\n            fill=\"none\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"buttonGroupIcon\"\n          >\n            <path d=\"M13.4063 4L12.7 4.7125C10.7532 6.66354 8.67606 8.87808 6.73125 10.8563L4.04375 8.64376L3.26875 8.00625L2 9.55L2.76875 10.1875L6.16875 12.9875L6.875 13.5687L7.5125 12.925C9.6663 10.7666 11.9996 8.24244 14.1125 6.125L14.8188 5.4125L13.4063 4V4Z\" />\n          </svg>\n          <span className=\"textStyle\">Copied!</span>\n        </>\n      ) : (\n        // Shows copy icon when isCopied = false\n        <svg\n          width=\"16\"\n          height=\"16\"\n          viewBox=\"0 0 16 16\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          className=\"buttonGroupIcon\"\n        >\n          <path\n            fillRule=\"evenodd\"\n            clipRule=\"evenodd\"\n            d=\"M5.99998 2H12.6667C13.4 2 14 2.6 14 3.33333V10C14 10.7333 13.4 11.3333 12.6667 11.3333H11.2667V12.1333C11.2667 13.1274 10.4608 13.9333 9.46665 13.9333H3.86665C2.87254 13.9333 2.06665 13.1274 2.06665 12.1333V6.53333C2.06665 5.53922 2.87254 4.73333 3.86665 4.73333H4.66665V3.33333C4.66665 2.6 5.25998 2 5.99998 2ZM4.66665 5.93333H3.86665C3.53528 5.93333 3.26665 6.20196 3.26665 6.53333V12.1333C3.26665 12.4647 3.53528 12.7333 3.86665 12.7333H9.46665C9.79802 12.7333 10.0667 12.4647 10.0667 12.1333V11.3333H5.99998C5.25998 11.3333 4.66665 10.7333 4.66665 10V5.93333ZM5.99998 10H12.6667V3.33333H5.99998V10Z\"\n          />\n        </svg>\n      )}\n      {isCopied ? \"\" : props.children}\n    </button>\n  )\n}\n","import { useCallback, useEffect, useState } from \"react\"\nimport copy from \"copy-to-clipboard\"\n\nexport default function useCopyClipboard(\n  timeout = 500,\n): [boolean, (toCopy: string) => void] {\n  const [isCopied, setIsCopied] = useState(false)\n  const staticCopy = useCallback((text) => {\n    const didCopy = copy(text)\n    setIsCopied(didCopy)\n  }, [])\n\n  useEffect(() => {\n    if (isCopied) {\n      const hide = setTimeout(() => {\n        setIsCopied(false)\n      }, timeout)\n\n      return () => {\n        clearTimeout(hide)\n      }\n    }\n    return undefined\n  }, [isCopied, setIsCopied, timeout])\n\n  return [isCopied, staticCopy]\n}\n","import React, { ReactElement, useEffect, useRef } from \"react\"\n\nimport Jazzicon from \"@metamask/jazzicon\"\nimport styled from \"@emotion/styled\"\nimport { useActiveWeb3React } from \"../hooks\"\n\nconst StyledIdenticonContainer = styled.div`\n  height: 24px;\n  width: 24px;\n  border-radius: 1.125rem;\n  display: inline-block;\n  vertical-align: text-bottom;\n`\n\nexport default function Identicon(): ReactElement {\n  const ref = useRef<HTMLDivElement>()\n\n  const { account } = useActiveWeb3React()\n\n  useEffect(() => {\n    if (account && ref.current) {\n      ref.current.innerHTML = \"\"\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n      ref.current.appendChild(Jazzicon(24, parseInt(account.slice(2, 10), 16)))\n    }\n  }, [account])\n\n  // https://github.com/DefinitelyTyped/DefinitelyTyped/issues/30451\n  return (\n    <StyledIdenticonContainer ref={ref as React.RefObject<HTMLDivElement>} />\n  )\n}\n","export function getFormattedShortTime(timestamp: string | number): string {\n  const timestampNumber =\n    typeof timestamp === \"string\" ? parseInt(timestamp) : timestamp\n  const timeoptions = {\n    month: \"numeric\",\n    day: \"numeric\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  } as const\n  return new Date(timestampNumber * 1000)\n    .toLocaleTimeString([], timeoptions)\n    .replace(\",\", \"\")\n}\n","import { ChainId, POOLS_MAP, Pool } from \"../constants\"\nimport { find } from \"lodash\"\n\nexport function getPoolByAddress(\n  targetAddress: string,\n  chainId: ChainId,\n): Pool | undefined {\n  return find(POOLS_MAP, (pool) => {\n    return pool.addresses[chainId].toLowerCase() === targetAddress\n  })\n}\n","import \"./Transactions.scss\"\nimport React, { ReactElement, useCallback, useEffect, useState } from \"react\"\nimport { getEtherscanLink } from \"../utils/getEtherscanLink\"\nimport { getFormattedShortTime } from \"../utils/dateTime\"\nimport { getPoolByAddress } from \"../utils/getPoolByAddress\"\nimport { useActiveWeb3React } from \"../hooks\"\nimport { useTranslation } from \"react-i18next\"\n\ninterface Response {\n  data: {\n    addLiquidityEvents: [\n      {\n        swap: {\n          id: string\n        }\n        timestamp: string\n        transaction: string\n      },\n    ]\n    removeLiquidityEvents: [\n      {\n        swap: {\n          id: string\n        }\n        timestamp: string\n        transaction: string\n      },\n    ]\n    swaps: [\n      {\n        address: string\n        exchanges: [\n          {\n            boughtId: string\n            tokensBought: string\n            soldId: string\n            tokensSold: string\n            timestamp: string\n            transaction: string\n          },\n        ]\n      },\n    ]\n  }\n}\n\ninterface Transaction {\n  object: string\n  transaction: string\n  time: string\n  timestamp: number\n  status?: string\n}\n\nexport default function Transactions(): ReactElement {\n  const SADDLE_SUBGRAPH_URL =\n    \"https://api.thegraph.com/subgraphs/name/saddle-finance/saddle\"\n  const { t } = useTranslation()\n  const { chainId, account } = useActiveWeb3React()\n  const [transactionList, setTransactionList] = useState<Transaction[]>([])\n\n  const fetchTxn = useCallback(async () => {\n    if (!account || !chainId) return\n\n    const newTransactionList: Transaction[] = []\n    const time24Hrs = Math.floor(Date.now() / 1000) - 60 * 60 * 24 // 24hrs\n    const query = `\n      {\n        addLiquidityEvents(where:{provider: \"${account}\", timestamp_gte: ${time24Hrs}}) {\n          swap {\n            id\n          }\n          transaction\n          timestamp\n        }\n        removeLiquidityEvents(where:{provider:\"${account}\", timestamp_gte: ${time24Hrs}}) {\n          swap {\n            id\n          }\n          transaction\n          timestamp\n        }\n        swaps {\n          address\n          exchanges(where:{buyer:\"${account}\", timestamp_gte: ${time24Hrs}}) {\n            boughtId\n            soldId\n            timestamp\n            transaction\n          }\n        }\n      }\n    `\n\n    await fetch(SADDLE_SUBGRAPH_URL, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ query }),\n    })\n      .then((res) => res.json())\n      .then((result: Response) => {\n        const { addLiquidityEvents, removeLiquidityEvents, swaps } = result.data\n        addLiquidityEvents.map((event) => {\n          const poolName = getPoolByAddress(event.swap.id, chainId)?.name\n          if (poolName) {\n            newTransactionList.push({\n              object: `${t(\"depositIn\")} ${poolName}`,\n              transaction: event.transaction,\n              time: getFormattedShortTime(event.timestamp),\n              timestamp: parseInt(event.timestamp),\n            })\n          }\n        })\n\n        removeLiquidityEvents.map((event) => {\n          const poolName = getPoolByAddress(event.swap.id, chainId)?.name\n          if (poolName) {\n            newTransactionList.push({\n              object: `${t(\"withdrawFrom\")} ${poolName}`,\n              transaction: event.transaction,\n              time: getFormattedShortTime(event.timestamp),\n              timestamp: parseInt(event.timestamp),\n            })\n          }\n        })\n\n        swaps.map(({ address, exchanges }) => {\n          const poolTokens = getPoolByAddress(address, chainId)?.poolTokens\n          if (exchanges && poolTokens) {\n            exchanges.map(({ soldId, boughtId, transaction, timestamp }) => {\n              const soldToken = poolTokens[parseInt(soldId)].symbol\n              const boughtToken = poolTokens[parseInt(boughtId)].symbol\n\n              newTransactionList.push({\n                object: `${t(\"swap\")} ${soldToken} ${t(\"toBe\")} ${boughtToken}`,\n                transaction: transaction,\n                time: getFormattedShortTime(timestamp),\n                timestamp: parseInt(timestamp),\n              })\n            })\n          }\n        })\n        setTransactionList(\n          newTransactionList.sort((a, b) => b.timestamp - a.timestamp),\n        )\n      })\n      .catch(console.error)\n  }, [chainId, t, account])\n\n  useEffect(() => {\n    void fetchTxn()\n  }, [fetchTxn])\n\n  return (\n    <>\n      <div className=\"titleRow\">\n        <h4 className=\"txn\">{t(\"recentTransactions\")}</h4>\n        <button\n          className=\"textStyle clear\"\n          onClick={(): void => {\n            setTransactionList([])\n          }}\n        >\n          {t(\"clear\")}\n        </button>\n      </div>\n      <div className=\"transactionList\">\n        {transactionList.length !== 0 ? (\n          transactionList.map((txn, index) => (\n            <div key={index} className=\"transactionItem\">\n              <span className=\"transactionObject\">{txn.object}</span>\n              <a\n                href={getEtherscanLink(txn.transaction, \"tx\")}\n                target=\"_blank\"\n                rel=\"noreferrer\"\n                className=\"transactionLink\"\n              >\n                {/* link icon */}\n                <svg\n                  width=\"16\"\n                  height=\"16\"\n                  viewBox=\"0 0 16 16\"\n                  fill=\"none\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path d=\"M11.6667 11.6667H4.33333V4.33333H8V3H4.33333C3.59333 3 3 3.6 3 4.33333V11.6667C3 12.4 3.59333 13 4.33333 13H11.6667C12.4 13 13 12.4 13 11.6667V8H11.6667V11.6667ZM9.33333 2V3.33333H11.7267L6.17333 8.88667L7.11333 9.82667L12.6667 4.27333V6.66667H14V2H9.33333Z\" />\n                </svg>\n              </a>\n              <span className=\"transactionTime\">{txn.time}</span>\n            </div>\n          ))\n        ) : (\n          <span style={{ fontSize: \"16px\" }}>\n            {t(\"yourRecentTransactions\")}\n          </span>\n        )}\n      </div>\n    </>\n  )\n}\n","import { isAddress } from \"./index\"\n\nexport function shortenAddress(address: string, chars = 4): string {\n  const parsed = isAddress(address)\n  if (!parsed) {\n    throw Error(`Invalid 'address' parameter '${address}'.`)\n  }\n  return `${parsed.substring(0, chars + 2)}...${parsed.substring(42 - chars)}`\n}\n","import { useEffect, useRef } from \"react\"\n\n// Source: https://github.com/austintgriffith/eth-hooks/blob/master/src/Poller.ts\n\nconst usePoller = (fn: () => void, delay: number): void => {\n  const savedCallback = useRef<() => void>()\n\n  // Remember the latest fn.\n  useEffect((): void => {\n    savedCallback.current = fn\n  }, [fn])\n\n  // Set up the interval.\n  useEffect((): void | (() => void) => {\n    // eslint-disable-next-line @typescript-eslint/explicit-function-return-type\n    function tick() {\n      if (savedCallback.current) savedCallback.current()\n    }\n\n    if (delay !== null) {\n      const id = setInterval(tick, delay)\n      // eslint-disable-next-line @typescript-eslint/explicit-function-return-type\n      return () => clearInterval(id)\n    }\n  }, [delay])\n\n  // run at start too\n  useEffect(() => {\n    fn()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n}\n\nexport default usePoller\n","import {\n  BLOCK_TIME,\n  ChainId,\n  ROSE_TOKENS_MAP,\n  TOKENS_MAP,\n  TokensMap,\n} from \"../../constants\"\nimport { Contract, Provider } from \"ethcall\"\nimport { MulticallContract, MulticallProvider } from \"../../types/ethcall\"\n\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport ERC20_ABI from \"../../constants/abis/erc20.json\"\nimport { Erc20 } from \"../../../types/ethers-contracts/Erc20\"\nimport { useActiveWeb3React } from \"../../hooks\"\nimport usePoller from \"../../hooks/usePoller\"\nimport { useState } from \"react\"\n\nconst useTokenBalancesHelper = (\n  tokenMap: TokensMap,\n): { [token: string]: BigNumber } | null => {\n  const { account, chainId, library } = useActiveWeb3React()\n  const [balances, setBalances] = useState<{ [token: string]: BigNumber }>({})\n\n  const ethcallProvider = new Provider() as MulticallProvider\n\n  usePoller((): void => {\n    async function pollBalances(): Promise<void> {\n      if (!library || !chainId || !account) return\n\n      await ethcallProvider.init(library)\n      // override the contract address when using aurora\n      if (chainId == ChainId.AURORA_TESTNET) {\n        ethcallProvider.multicallAddress =\n          \"0x508B1508AAd923fB24F6d13cD74Ac640fD8B66E8\"\n      } else if (chainId == ChainId.AURORA_MAINNET) {\n        ethcallProvider.multicallAddress =\n          \"0x49eb1F160e167aa7bA96BdD88B6C1f2ffda5212A\"\n      }\n\n      const tokens = Object.values(tokenMap)\n      const balanceCalls = tokens\n        .map((t) => {\n          return new Contract(\n            t.addresses[chainId],\n            ERC20_ABI,\n          ) as MulticallContract<Erc20>\n        })\n        .map((c) => c.balanceOf(account))\n      const balances = await ethcallProvider.all(balanceCalls, \"latest\")\n      const ethBalance = await library.getBalance(account)\n      setBalances(\n        tokens.reduce(\n          (acc, t, i) => ({\n            ...acc,\n            [t.symbol]: balances[i],\n          }),\n          { ETH: ethBalance },\n        ),\n      )\n    }\n    if (account) {\n      void pollBalances()\n    }\n  }, BLOCK_TIME)\n\n  return balances\n}\n\nexport function usePoolTokenBalances(): { [token: string]: BigNumber } | null {\n  return useTokenBalancesHelper(TOKENS_MAP)\n}\n\nexport function useRoseTokenBalances(): { [token: string]: BigNumber } | null {\n  return useTokenBalancesHelper(ROSE_TOKENS_MAP)\n}\n","import \"./AccountDetails.scss\"\n\nimport React, { ReactElement } from \"react\"\nimport { commify, formatBNToString } from \"../utils\"\nimport Copy from \"./Copy\"\nimport Identicon from \"./Identicon\"\nimport { SUPPORTED_WALLETS } from \"../constants\"\nimport Transactions from \"./Transactions\"\nimport { Zero } from \"@ethersproject/constants\"\nimport { find } from \"lodash\"\nimport { getEtherscanLink } from \"../utils/getEtherscanLink\"\nimport { shortenAddress } from \"../utils/shortenAddress\"\nimport { useActiveWeb3React } from \"../hooks\"\nimport { useRoseTokenBalances } from \"../state/wallet/hooks\"\nimport { useTranslation } from \"react-i18next\"\n\ninterface Props {\n  openOptions: () => void\n}\n\nexport default function AccountDetail({ openOptions }: Props): ReactElement {\n  const { t } = useTranslation()\n  const { account, connector } = useActiveWeb3React()\n  const tokenBalances = useRoseTokenBalances()\n  const roseBalanceFormatted = commify(\n    formatBNToString(tokenBalances?.ROSE || Zero, 18, 5),\n  )\n\n  const connectorName = find(SUPPORTED_WALLETS, [\"connector\", connector])?.name\n\n  return (\n    <div className=\"accountDetail\">\n      <div className=\"upperSection\">\n        <h3 className=\"accountTitle\">{t(\"account\")}</h3>\n        <div className=\"accountControl\">\n          <span className=\"label\">\n            {t(\"connectedWith\")}&nbsp;\n            {connectorName}\n          </span>\n          <span className=\"label\">{t(\"balance\")}</span>\n          <div className=\"data\">\n            <Identicon />\n            <span className=\"address\">\n              {account && shortenAddress(account)}\n            </span>\n            {account && (\n              <a\n                href={getEtherscanLink(account, \"address\")}\n                target=\"_blank\"\n                rel=\"noreferrer\"\n              >\n                {/* link icon */}\n                <svg\n                  width=\"16\"\n                  height=\"16\"\n                  viewBox=\"0 0 16 16\"\n                  fill=\"none\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path d=\"M11.6667 11.6667H4.33333V4.33333H8V3H4.33333C3.59333 3 3 3.6 3 4.33333V11.6667C3 12.4 3.59333 13 4.33333 13H11.6667C12.4 13 13 12.4 13 11.6667V8H11.6667V11.6667ZM9.33333 2V3.33333H11.7267L6.17333 8.88667L7.11333 9.82667L12.6667 4.27333V6.66667H14V2H9.33333Z\" />\n                </svg>\n              </a>\n            )}\n          </div>\n          <span className=\"data\">{roseBalanceFormatted}🌹</span>\n          <div className=\"buttonGroup\">\n            {account && (\n              <Copy toCopy={account}>\n                <span className=\"textStyle\">{t(\"copyAddress\")}</span>\n              </Copy>\n            )}\n          </div>\n          <div className=\"buttonGroup\">\n            <button\n              className=\"textStyle\"\n              onClick={() => {\n                openOptions()\n              }}\n            >\n              {/* change Icon */}\n              <svg\n                width=\"16\"\n                height=\"16\"\n                viewBox=\"0 0 16 16\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"buttonGroupIcon\"\n              >\n                <g clipPath=\"url(#clip0)\">\n                  <path d=\"M6.07194 14.0719C6.19014 14.1901 6.35016 14.2568 6.5168 14.2574C6.68343 14.2579 6.84304 14.1922 6.9605 14.0747L13.2552 7.78006L13.2659 11.2235C13.2693 11.3883 13.3372 11.5455 13.4551 11.6613C13.573 11.7772 13.7313 11.8424 13.8961 11.8429C14.0608 11.8434 14.2188 11.7792 14.3359 11.6641C14.453 11.549 14.52 11.3922 14.5223 11.2274L14.5065 6.26722C14.5061 6.14303 14.4688 6.02154 14.3995 5.91808C14.3301 5.81462 14.2318 5.73384 14.1169 5.68595C14.0021 5.63805 13.8758 5.62518 13.754 5.64897C13.6323 5.67275 13.5206 5.73212 13.433 5.81959L6.06916 13.1834C5.9517 13.3008 5.88601 13.4605 5.88653 13.6271C5.88705 13.7937 5.95374 13.9537 6.07194 14.0719ZM10.2919 2.6785L2.92808 10.0423C2.84046 10.1298 2.72873 10.1891 2.60699 10.2129C2.48525 10.2367 2.35897 10.2238 2.24409 10.1759C2.12922 10.128 2.0309 10.0473 1.96156 9.9438C1.89221 9.84034 1.85496 9.71885 1.85449 9.59466L1.83869 4.63443C1.83698 4.55101 1.8519 4.46819 1.88258 4.3908C1.91326 4.31341 1.95908 4.243 2.01737 4.18368C2.07566 4.12435 2.14526 4.07731 2.2221 4.04529C2.29894 4.01327 2.38148 3.99691 2.46491 3.99717C2.54833 3.99743 2.63098 4.01431 2.70802 4.04681C2.78506 4.07931 2.85495 4.12679 2.91362 4.18648C2.97228 4.24616 3.01854 4.31686 3.04971 4.39445C3.08087 4.47203 3.0963 4.55495 3.09512 4.63836L3.10588 8.08182L9.40054 1.78716C9.518 1.6697 9.6776 1.604 9.84424 1.60452C10.0109 1.60505 10.1709 1.67174 10.2891 1.78994C10.4073 1.90814 10.474 2.06816 10.4745 2.23479C10.475 2.40143 10.4093 2.56103 10.2919 2.6785Z\" />\n                </g>\n                <defs>\n                  <clipPath id=\"clip0\">\n                    <rect width=\"16\" height=\"16\" />\n                  </clipPath>\n                </defs>\n              </svg>\n              {t(\"changeAccount\")}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"lowerSection\">\n        <Transactions />\n      </div>\n    </div>\n  )\n}\n","import { Metric } from \"web-vitals\"\n\nexport function logEvent(name: string, params: Record<string, unknown>): void {\n  // gtag is only loaded in index.html when NODE_ENV is set to production, so check if it's a function\n  if (typeof window.gtag === \"function\") {\n    window.gtag(\"event\", name, params)\n  } else {\n    console.debug(`Logging event ${name} with parameters:`, params)\n  }\n}\n\nexport function logError(error: ErrorEvent): void {\n  logEvent(\"exception\", {\n    description: `${error.message} @ ${error.filename}:${error.lineno}:${error.colno}`,\n    fatal: true,\n  })\n}\n\n// See: https://github.com/GoogleChrome/web-vitals#using-gtagjs-google-analytics-4\nexport function sendWebVitalsToGA({ name, delta, value, id }: Metric): void {\n  logEvent(name, {\n    // Use the metric delta as the event's value parameter.\n    value: delta,\n    // Everything below is a custom event parameter.\n    web_vitals_metric_id: id, // Needed to aggregate events.\n    web_vitals_metric_value: value, // Optional\n    // Any additional params or metadata (e.g. debug information) can be\n    // set here as well, within the following limitations:\n    // https://support.google.com/analytics/answer/9267744\n  })\n}\n","import \"./ConnectWallet.scss\"\n\nimport React, { ReactElement } from \"react\"\nimport { UnsupportedChainIdError, useWeb3React } from \"@web3-react/core\"\nimport { SUPPORTED_WALLETS } from \"../constants\"\nimport { logEvent } from \"../utils/googleAnalytics\"\nimport { map } from \"lodash\"\nimport { useTranslation } from \"react-i18next\"\n\ninterface Props {\n  onClose: () => void\n}\n\nfunction ConnectWallet({ onClose }: Props): ReactElement {\n  const { t } = useTranslation()\n  const { activate } = useWeb3React()\n\n  return (\n    <div className=\"connectWallet\">\n      <h3>{t(\"connectWallet\")}</h3>\n      <div className=\"walletList\">\n        {map(SUPPORTED_WALLETS, (wallet, index) => (\n          <button\n            key={index}\n            onClick={(): void => {\n              activate(wallet.connector, undefined, true).catch((error) => {\n                if (error instanceof UnsupportedChainIdError) {\n                  void activate(wallet.connector) // a little janky...can't use setError because the connector isn't set\n                } else {\n                  // TODO: handle error\n                }\n              })\n              logEvent(\"change_wallet\", { name: wallet.name })\n              onClose()\n            }}\n          >\n            <span>{wallet.name}</span>\n            <img src={wallet.icon} alt=\"icon\" className=\"icon\" />\n          </button>\n        ))}\n      </div>\n      <p>\n        {t(\"dontHaveWallet\") + \" \"}\n        <a href=\"https://ethereum.org/en/wallets/\" target=\"blank\">\n          {t(\"getWallet\")}\n        </a>\n      </p>\n    </div>\n  )\n}\n\nexport default ConnectWallet\n","import React, { ReactElement } from \"react\"\nimport { Button } from \"@chakra-ui/react\"\nimport { SUPPORTED_CHAINS } from \"../constants\"\nimport styles from \"./SupportedChains.module.scss\"\nimport useAddNetworkToMetamask from \"../hooks/useAddNetworkToMetamask\"\nimport { useTranslation } from \"react-i18next\"\n\ninterface Props {\n  openOptions: () => void\n}\n\nexport default function SupportedChains({ openOptions }: Props): ReactElement {\n  const { t } = useTranslation()\n  const addNetwork = useAddNetworkToMetamask()\n  return (\n    <div className={styles.supportedChains}>\n      <h3>{t(\"supportedChains\")}</h3>\n      <h5>{t(\"supportedChainsDescription\")}</h5>\n      <div className={styles.chainList}>\n        {Object.entries(SUPPORTED_CHAINS).map(([key, val], index) => (\n          <div key={index} className={styles.chain}>\n            <div className={styles.chainInfo}>\n              <h4>{val.name}</h4>\n              <span>{key}</span>\n            </div>\n            <div className={styles.chainInfo}>\n              <p>\n                <i>{val.rpc}</i>\n              </p>\n              <div className={styles.addNetwork}>\n                <Button\n                  variant=\"light\"\n                  size=\"md\"\n                  width=\"150px\"\n                  onClick={() => addNetwork(+key)}\n                >\n                  {t(\"addToWallet\")}\n                </Button>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n      <button\n        className={styles.textStyle}\n        onClick={() => {\n          openOptions()\n        }}\n      >\n        {/* change Icon */}\n        <svg\n          width=\"16\"\n          height=\"16\"\n          viewBox=\"0 0 16 16\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          className={styles.buttonGroupIcon}\n        >\n          <g clipPath=\"url(#clip1)\">\n            <path d=\"M6.07194 14.0719C6.19014 14.1901 6.35016 14.2568 6.5168 14.2574C6.68343 14.2579 6.84304 14.1922 6.9605 14.0747L13.2552 7.78006L13.2659 11.2235C13.2693 11.3883 13.3372 11.5455 13.4551 11.6613C13.573 11.7772 13.7313 11.8424 13.8961 11.8429C14.0608 11.8434 14.2188 11.7792 14.3359 11.6641C14.453 11.549 14.52 11.3922 14.5223 11.2274L14.5065 6.26722C14.5061 6.14303 14.4688 6.02154 14.3995 5.91808C14.3301 5.81462 14.2318 5.73384 14.1169 5.68595C14.0021 5.63805 13.8758 5.62518 13.754 5.64897C13.6323 5.67275 13.5206 5.73212 13.433 5.81959L6.06916 13.1834C5.9517 13.3008 5.88601 13.4605 5.88653 13.6271C5.88705 13.7937 5.95374 13.9537 6.07194 14.0719ZM10.2919 2.6785L2.92808 10.0423C2.84046 10.1298 2.72873 10.1891 2.60699 10.2129C2.48525 10.2367 2.35897 10.2238 2.24409 10.1759C2.12922 10.128 2.0309 10.0473 1.96156 9.9438C1.89221 9.84034 1.85496 9.71885 1.85449 9.59466L1.83869 4.63443C1.83698 4.55101 1.8519 4.46819 1.88258 4.3908C1.91326 4.31341 1.95908 4.243 2.01737 4.18368C2.07566 4.12435 2.14526 4.07731 2.2221 4.04529C2.29894 4.01327 2.38148 3.99691 2.46491 3.99717C2.54833 3.99743 2.63098 4.01431 2.70802 4.04681C2.78506 4.07931 2.85495 4.12679 2.91362 4.18648C2.97228 4.24616 3.01854 4.31686 3.04971 4.39445C3.08087 4.47203 3.0963 4.55495 3.09512 4.63836L3.10588 8.08182L9.40054 1.78716C9.518 1.6697 9.6776 1.604 9.84424 1.60452C10.0109 1.60505 10.1709 1.67174 10.2891 1.78994C10.4073 1.90814 10.474 2.06816 10.4745 2.23479C10.475 2.40143 10.4093 2.56103 10.2919 2.6785Z\" />\n          </g>\n          <defs>\n            <clipPath id=\"clip1\">\n              <rect width=\"16\" height=\"16\" />\n            </clipPath>\n          </defs>\n        </svg>\n        {t(\"changeAccount\")}\n      </button>\n    </div>\n  )\n}\n","// TODO: create types\n/* eslint @typescript-eslint/no-unsafe-member-access: 0 */\nimport { SUPPORTED_CHAINS, SupportedChains } from \"../constants\"\nimport { toHex } from \"../utils\"\nimport { useCallback } from \"react\"\n\nexport default function useAddNetworkToMetamask(): (\n  chainId: SupportedChains,\n) => void {\n  const { ethereum } = window\n\n  const addNetwork = useCallback(\n    async (chainId: SupportedChains) => {\n      if (ethereum) {\n        try {\n          await ethereum.request({\n            method: \"wallet_switchEthereumChain\",\n            params: [\n              {\n                chainId: toHex(chainId),\n              },\n            ],\n          })\n          // eslint-disable-next-line\n        } catch (error: any) {\n          // This error code indicates that the chain has not been added to MetaMask.\n          if (error.code === 4902) {\n            await ethereum.request({\n              method: \"wallet_addEthereumChain\",\n              params: [\n                {\n                  chainId: toHex(chainId),\n                  chainName: SUPPORTED_CHAINS[chainId].name,\n                  rpcUrls: [SUPPORTED_CHAINS[chainId].rpc],\n                },\n              ],\n            })\n          }\n        }\n      }\n    },\n    [ethereum],\n  )\n\n  return addNetwork\n}\n","import \"./Web3Status.scss\"\n\nimport React, { ReactElement, useEffect, useState } from \"react\"\nimport AccountDetails from \"./AccountDetails\"\nimport { ChainId } from \"../constants\"\nimport ConnectWallet from \"./ConnectWallet\"\nimport Identicon from \"./Identicon\"\nimport Modal from \"./Modal\"\nimport SupportedChains from \"./SupportedChains\"\nimport { injected } from \"../connectors\"\nimport { useTranslation } from \"react-i18next\"\nimport { useWeb3React } from \"@web3-react/core\"\n\nconst WALLET_VIEWS = {\n  OPTIONS: \"options\",\n  ACCOUNT: \"account\",\n}\n\nfunction chainIdToName(chainId: number | undefined) {\n  if (typeof chainId == undefined) {\n    return \"\"\n  }\n  switch (chainId) {\n    case ChainId.AURORA_TESTNET:\n      return \"Aurora Testnet\"\n    case ChainId.AURORA_MAINNET:\n      return \"Aurora\"\n    default:\n      return \"Unknown Network\"\n  }\n}\n\nconst Web3Status = (): ReactElement => {\n  const { account, chainId, error } = useWeb3React()\n  const [modalOpen, setModalOpen] = useState(false)\n  const [walletConnected, setWalletConnected] = useState(false)\n  void injected.isAuthorized().then((isAuthorized) => {\n    setWalletConnected(isAuthorized)\n  })\n  const [walletView, setWalletView] = useState(WALLET_VIEWS.ACCOUNT)\n  const { t } = useTranslation()\n\n  // always reset to account view\n  useEffect(() => {\n    if (modalOpen) {\n      setWalletView(WALLET_VIEWS.ACCOUNT)\n    }\n  }, [modalOpen])\n\n  return (\n    <div className=\"walletStatus\">\n      <button type=\"button\" onClick={(): void => setModalOpen(true)}>\n        {account ? (\n          <div className=\"hasAccount\">\n            <div className=\"network\">{chainIdToName(chainId)}</div>\n            <span className=\"address\">\n              {account.substring(0, 6)}...\n              {account.substring(account.length - 4, account.length)}\n            </span>\n\n            <Identicon />\n          </div>\n        ) : error || walletConnected ? (\n          <div className=\"unsupported\">{t(\"unsupported\")}</div>\n        ) : (\n          <div className=\"noAccount\">{t(\"connectWallet\")}</div>\n        )}\n      </button>\n      <Modal isOpen={modalOpen} onClose={(): void => setModalOpen(false)}>\n        {account && walletView === WALLET_VIEWS.ACCOUNT ? (\n          <AccountDetails\n            openOptions={() => setWalletView(WALLET_VIEWS.OPTIONS)}\n          />\n        ) : (error || walletConnected) &&\n          walletView !== WALLET_VIEWS.OPTIONS ? (\n          <SupportedChains\n            openOptions={() => setWalletView(WALLET_VIEWS.OPTIONS)}\n          />\n        ) : (\n          <ConnectWallet onClose={(): void => setModalOpen(false)} />\n        )}\n      </Modal>\n    </div>\n  )\n}\n\nexport default Web3Status\n","import { Token } from \"../constants\"\nimport { imageIconToUrl } from \"../utils\"\nimport { useActiveWeb3React } from \"./index\"\nimport { useCallback } from \"react\"\n\nexport default function useAddTokenToMetamask(\n  token: Token | undefined,\n): () => Promise<void> {\n  const { library, chainId } = useActiveWeb3React()\n\n  const addToken = useCallback(async (): Promise<void> => {\n    if (library && window.ethereum && token && chainId) {\n      try {\n        await window.ethereum.request({\n          method: \"wallet_watchAsset\",\n          params: {\n            //@ts-ignore // need this for incorrect ethers provider type\n            type: \"ERC20\",\n            options: {\n              address: token.addresses[chainId],\n              symbol: token.symbol,\n              decimals: token.decimals,\n              image: imageIconToUrl(token.icon),\n            },\n          },\n        })\n      } catch (e) {\n        console.log(e)\n      }\n    }\n  }, [library, token, chainId])\n\n  return addToken\n}\n","import \"./TopMenu.scss\"\n\nimport {\n  Menu,\n  MenuButton,\n  MenuGroup,\n  MenuItem,\n  MenuList,\n} from \"@chakra-ui/react\"\nimport { ROSE, SROSE } from \"../constants\"\nimport React, { ReactElement } from \"react\"\n\nimport { FaCog } from \"react-icons/fa\"\nimport { Link } from \"react-router-dom\"\nimport ThemeChanger from \"./ThemeChanger\"\nimport ToolTip from \"./ToolTip\"\nimport Web3Status from \"./Web3Status\"\nimport classNames from \"classnames\"\nimport useAddTokenToMetamask from \"../hooks/useAddTokenToMetamask\"\nimport { useTranslation } from \"react-i18next\"\n\ninterface Props {\n  activeTab: string\n}\n\nfunction TopMenu({ activeTab }: Props): ReactElement {\n  const { t } = useTranslation()\n  const addRoseToken = useAddTokenToMetamask(ROSE)\n  const addStRoseToken = useAddTokenToMetamask(SROSE)\n\n  return (\n    <header className=\"top\">\n      <h1>\n        <Link to=\"/\">Rose</Link>\n      </h1>\n\n      <ul className=\"nav\">\n        <li>\n          <Link to=\"/\" className={classNames({ active: activeTab === \"swap\" })}>\n            {t(\"swap\")}\n          </Link>\n        </li>\n        <li>\n          <Link\n            to=\"/pools\"\n            className={classNames({\n              active:\n                activeTab === \"pools\" ||\n                activeTab === \"deposit\" ||\n                activeTab === \"withdraw\",\n            })}\n          >\n            {t(\"pools\")}\n          </Link>\n        </li>\n        <li>\n          <Link\n            to=\"/farms\"\n            className={classNames({\n              active: activeTab === \"farms\" || activeTab === \"farm\",\n            })}\n          >\n            {t(\"farms\")}\n          </Link>\n        </li>\n        <li>\n          <Link\n            to=\"/stake\"\n            className={classNames({\n              active: activeTab === \"stake\",\n              // add additional checks here in case stake will require subpages\n            })}\n          >\n            {t(\"stake\")}\n          </Link>\n        </li>\n        <li>\n          <ToolTip content={t(\"underconstruction\")}>\n            <Link\n              to=\"#\"\n              className={classNames({\n                active: activeTab === \"borrow\",\n              })}\n            >\n              <span className=\"disabled\">{t(\"borrow\")}</span>\n            </Link>\n          </ToolTip>\n        </li>\n        <li>\n          <Menu>\n            <MenuButton>\n              <Link to=\"#\">Bridge↗</Link>\n            </MenuButton>\n            <MenuList>\n              <MenuGroup>\n                <MenuItem>\n                  <a\n                    href=\"https://rainbowbridge.app/transfer\"\n                    target=\"_blank\"\n                    rel=\"noreferrer\"\n                  >\n                    Rainbow Bridge↗\n                  </a>\n                </MenuItem>\n                <MenuItem>\n                  <a\n                    href=\"https://app.allbridge.io/bridge\"\n                    target=\"_blank\"\n                    rel=\"noreferrer\"\n                  >\n                    Allbridge↗\n                  </a>\n                </MenuItem>\n              </MenuGroup>\n            </MenuList>\n          </Menu>\n        </li>\n      </ul>\n      <Web3Status />\n      <Menu>\n        <MenuButton className=\"addToken\">\n          <FaCog />\n        </MenuButton>\n        <MenuList>\n          <MenuGroup title=\"ADD TOKEN TO WALLET\">\n            <MenuItem\n              onClick={async () => {\n                await addRoseToken()\n              }}\n            >\n              ROSE🌹\n            </MenuItem>\n            <MenuItem onClick={async () => await addStRoseToken()}>\n              stROSE🌷\n            </MenuItem>\n          </MenuGroup>\n        </MenuList>\n      </Menu>\n      <ThemeChanger />\n    </header>\n  )\n}\n\nexport default TopMenu\n","import \"./DepositPage.scss\"\n\nimport {\n  ALETH_POOL_NAME,\n  FRAX_STABLES_LP_POOL_NAME,\n  VETH2_POOL_NAME,\n  isMetaPool,\n} from \"../constants\"\nimport { Button, Center } from \"@chakra-ui/react\"\nimport ConfirmTransaction, { ModalType } from \"./ConfirmTransaction\"\nimport { PoolDataType, UserShareType } from \"../hooks/usePoolData\"\nimport React, { ReactElement, useState } from \"react\"\nimport { Trans, useTranslation } from \"react-i18next\"\n\nimport AdvancedOptions from \"./AdvancedOptions\"\nimport BackButton from \"./BackButton\"\nimport { ContractReceipt } from \"@ethersproject/contracts\"\nimport { DepositTransaction } from \"../interfaces/transactions\"\nimport LPStakingBanner from \"./LPStakingBanner\"\nimport Modal from \"./Modal\"\nimport MyShareCard from \"./MyShareCard\"\nimport PoolInfoCard from \"./PoolInfoCard\"\nimport ReviewDeposit from \"./ReviewDeposit\"\n// import { Switch } from \"@chakra-ui/react\"\nimport TokenInput from \"./TokenInput\"\nimport TopMenu from \"./TopMenu\"\nimport { Zero } from \"@ethersproject/constants\"\nimport { formatBNToPercentString } from \"../utils\"\nimport { logEvent } from \"../utils/googleAnalytics\"\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\ninterface Props {\n  title: string\n  onConfirmTransaction: () => Promise<ContractReceipt | void>\n  onChangeTokenInputValue: (tokenSymbol: string, value: string) => void\n  onToggleDepositWrapped: () => void\n  shouldDepositWrapped: boolean\n  tokens: Array<{\n    symbol: string\n    name: string\n    icon: string\n    max: string\n    inputValue: string\n  }>\n  exceedsWallet: boolean\n  selected?: { [key: string]: any }\n  poolData: PoolDataType | null\n  myShareData: UserShareType | null\n  transactionData: DepositTransaction\n}\n\n/* eslint-enable @typescript-eslint/no-explicit-any */\nconst DepositPage = (props: Props): ReactElement => {\n  const { t } = useTranslation()\n  const {\n    tokens,\n    exceedsWallet,\n    poolData,\n    myShareData,\n    transactionData,\n    // shouldDepositWrapped,\n    onChangeTokenInputValue,\n    onConfirmTransaction,\n    // onToggleDepositWrapped,\n  } = props\n\n  const [currentModal, setCurrentModal] = useState<string | null>(null)\n\n  const validDepositAmount =\n    transactionData.to.totalAmount.gt(0) && !exceedsWallet\n  const shouldDisplayWrappedOption = isMetaPool(poolData?.name)\n\n  return (\n    <div className=\"deposit\">\n      <TopMenu activeTab={\"deposit\"} />\n      {poolData?.aprs?.keep?.apr.gt(Zero) &&\n        myShareData?.lpTokenBalance.gt(0) && (\n          <LPStakingBanner\n            stakingLink={\"https://dashboard.keep.network/liquidity\"}\n          />\n        )}\n      {poolData?.name === VETH2_POOL_NAME &&\n        myShareData?.lpTokenBalance.gt(0) && (\n          <LPStakingBanner stakingLink={\"https://www.sharedstake.org/earn\"} />\n        )}\n      {poolData?.name === ALETH_POOL_NAME &&\n        myShareData?.lpTokenBalance.gt(0) && (\n          <LPStakingBanner stakingLink={\"https://app.alchemix.fi/farms\"} />\n        )}\n\n      <div className=\"content\">\n        <div className=\"left\">\n          <div className=\"form\">\n            <h3>{t(\"addLiquidity\")}</h3>\n            {exceedsWallet ? (\n              <div className=\"error\">{t(\"depositBalanceExceeded\")}</div>\n            ) : null}\n            {poolData?.isPaused && poolData?.name === VETH2_POOL_NAME ? (\n              <div className=\"error\">\n                <Trans i18nKey=\"sgtPoolPaused\" t={t}>\n                  This pool is paused, please see{\" \"}\n                  <a\n                    href=\"https://medium.com/immunefi/sharedstake-insider-exploit-postmortem-17fa93d5c90e\"\n                    target=\"_blank\"\n                    rel=\"noreferrer\"\n                    style={{ textDecoration: \"underline\" }}\n                  >\n                    this postmortem\n                  </a>{\" \"}\n                  for more information.\n                </Trans>\n              </div>\n            ) : null}\n            {/* disable deposit wrapped button until gas limit is raised on aurora */}\n            {/* {shouldDisplayWrappedOption && (\n              <div className=\"wrappedDeposit\">\n                <Switch\n                  colorScheme=\"red\"\n                  onChange={onToggleDepositWrapped}\n                  isChecked={shouldDepositWrapped}\n                />\n                <span>\n                  <small>{t(\"depositWrapped\")}</small>\n                </span>\n              </div>\n            )} */}\n            {shouldDisplayWrappedOption && (\n              <p className=\"wrappedInfo\">\n                Deposit to the{\" \"}\n                <a href=\"/#/pools/stables/deposit\">Stables Pool</a> to get\n                RoseStablesLP.\n              </p>\n            )}\n            {poolData?.name === FRAX_STABLES_LP_POOL_NAME && (\n              <p className=\"wrappedInfo\">\n                This pool is outdated. Please{\" \"}\n                <a href=\"/#/pools/frax-stableslp/withdraw\">\n                  go here to withdraw any liquidity\n                </a>{\" \"}\n                from this pool and{\" \"}\n                <a href=\"/#/pools/frax/deposit\">\n                  use the new Frax pool instead\n                </a>\n                .\n              </p>\n            )}\n            {tokens.map((token, index) => (\n              <div key={index}>\n                <TokenInput\n                  {...token}\n                  disabled={poolData?.isPaused}\n                  onChange={(value): void =>\n                    onChangeTokenInputValue(token.symbol, value)\n                  }\n                />\n                {index === tokens.length - 1 ? (\n                  \"\"\n                ) : (\n                  <div className=\"formSpace\"></div>\n                )}\n              </div>\n            ))}\n            <div className={\"transactionInfoContainer\"}>\n              <div className=\"transactionInfo\">\n                {poolData?.aprs?.keep?.apr.gt(Zero) && (\n                  <div className=\"transactionInfoItem\">\n                    <a\n                      href=\"https://docs.saddle.finance/faq#what-are-saddles-liquidity-provider-rewards\"\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      <span>{`KEEP APR:`}</span>\n                    </a>{\" \"}\n                    <span className=\"value\">\n                      {formatBNToPercentString(poolData.aprs.keep.apr, 18)}\n                    </span>\n                  </div>\n                )}\n                {poolData?.aprs?.sharedStake?.apr.gt(Zero) && (\n                  <div className=\"transactionInfoItem\">\n                    <a\n                      href=\"https://docs.saddle.finance/faq#what-are-saddles-liquidity-provider-rewards\"\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      <span>{`SGT APR:`}</span>\n                    </a>{\" \"}\n                    <span className=\"value\">\n                      {formatBNToPercentString(\n                        poolData.aprs.sharedStake.apr,\n                        18,\n                      )}\n                    </span>\n                  </div>\n                )}\n                <div className=\"transactionInfoItem\">\n                  {transactionData.priceImpact.gte(0) ? (\n                    <span className=\"bonus\">{`${t(\"bonus\")}: `}</span>\n                  ) : (\n                    <span className=\"slippage\">{t(\"priceImpact\")}</span>\n                  )}\n                  <span\n                    className={\n                      \"value \" +\n                      (transactionData.priceImpact.gte(0)\n                        ? \"bonus\"\n                        : \"slippage\")\n                    }\n                  >\n                    {\" \"}\n                    {formatBNToPercentString(\n                      transactionData.priceImpact,\n                      18,\n                      4,\n                    )}\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n          <BackButton\n            route=\"/pools\"\n            wrapperClass=\"goBack\"\n            buttonText=\"Go back to pools\"\n          />\n          <AdvancedOptions />\n          <Center width=\"100%\" py={6}>\n            <Button\n              variant=\"primary\"\n              size=\"lg\"\n              width=\"240px\"\n              onClick={(): void => {\n                setCurrentModal(\"review\")\n              }}\n              disabled={!validDepositAmount || poolData?.isPaused}\n            >\n              {t(\"deposit\")}\n            </Button>\n          </Center>\n        </div>\n        <div className=\"infoPanels\">\n          <MyShareCard data={myShareData} />\n          <div\n            style={{\n              display: myShareData ? \"block\" : \"none\",\n            }}\n            className=\"divider\"\n          ></div>{\" \"}\n          <PoolInfoCard data={poolData} />\n        </div>\n        <Modal\n          isOpen={!!currentModal}\n          onClose={(): void => setCurrentModal(null)}\n        >\n          {currentModal === \"review\" ? (\n            <ReviewDeposit\n              transactionData={transactionData}\n              onConfirm={(): void => {\n                setCurrentModal(ModalType.CONFIRM)\n                logEvent(\n                  \"deposit\",\n                  (poolData && { pool: poolData?.name }) || {},\n                )\n                onConfirmTransaction?.()\n                  .then((res) => {\n                    if (res?.status) {\n                      setCurrentModal(ModalType.SUCCESS)\n                    } else {\n                      setCurrentModal(ModalType.FAILED)\n                    }\n                  })\n                  .catch(() => {\n                    setCurrentModal(ModalType.FAILED)\n                  })\n              }}\n              onClose={(): void => setCurrentModal(null)}\n            />\n          ) : null}\n          {currentModal === ModalType.CONFIRM ? (\n            <ConfirmTransaction />\n          ) : currentModal === ModalType.FAILED ? (\n            <ConfirmTransaction\n              description={t(\"txFailed_deposit\")}\n              title={t(\"failedTitle\")}\n              type={ModalType.FAILED}\n            />\n          ) : currentModal === ModalType.SUCCESS ? (\n            <ConfirmTransaction\n              title={t(\"successTitle\")}\n              description={t(\"txConfirmed_deposit\")}\n              type={ModalType.SUCCESS}\n            />\n          ) : null}\n        </Modal>\n      </div>\n    </div>\n  )\n}\n\nexport default DepositPage\n","import { BigNumber } from \"@ethersproject/bignumber\"\nimport { ContractReceipt } from \"ethers\"\nimport { ContractTransaction } from \"@ethersproject/contracts\"\nimport { Erc20 } from \"../../types/ethers-contracts/Erc20\"\nimport { MaxUint256 } from \"@ethersproject/constants\"\nimport { RoseStablesLP } from \"../../types/ethers-contracts/RoseStablesLP\"\nimport { Zero } from \"@ethersproject/constants\"\n\n/**\n * Checks if a spender is allowed to spend some amount of a token.\n * Approves them to spend if they're not already allowed.\n * Won't make requests if spendingValue eq 0\n * @param {Contract} srcTokenContract\n * @param {string} swapAddress\n * @param {string} spenderAddress\n * @param {BigNumber} spendingValue\n * @param {boolean} infiniteApproval\n * @param {{}} callbacks\n * @return {Promise<void>}\n */\nexport default async function checkAndApproveTokenForTrade(\n  srcTokenContract: Erc20 | RoseStablesLP,\n  swapAddress: string,\n  spenderAddress: string,\n  spendingValue: BigNumber, // max is MaxUint256\n  infiniteApproval = false,\n  gasPrice: BigNumber,\n  callbacks: {\n    onTransactionStart?: (\n      transaction?: ContractTransaction,\n    ) => (() => void) | undefined\n    onTransactionSuccess?: (transaction: ContractReceipt) => () => void\n    onTransactionError?: (error: Error | string) => () => void\n  } = {},\n): Promise<void> {\n  if (srcTokenContract == null) return\n  if (spendingValue.eq(0)) return\n  const tokenName = await srcTokenContract.name()\n  const existingAllowance = await srcTokenContract.allowance(\n    spenderAddress,\n    swapAddress,\n  )\n\n  console.log(`swap address: ${swapAddress}`)\n  console.log(\n    `Existing ${tokenName} Allowance: ${existingAllowance.toString()}`,\n  )\n  console.log(`Spending ${spendingValue.toString()} ${tokenName}`)\n  if (existingAllowance.gte(spendingValue)) return\n  console.log(`need to approve`)\n  async function approve(amount: BigNumber): Promise<void> {\n    try {\n      const cleanupOnStart = callbacks.onTransactionStart?.()\n      const approvalTransaction = await srcTokenContract.approve(\n        swapAddress,\n        amount,\n        {\n          gasPrice,\n        },\n      )\n      const confirmedTransaction = await approvalTransaction.wait()\n      cleanupOnStart?.()\n      callbacks.onTransactionSuccess?.(confirmedTransaction)\n    } catch (error) {\n      callbacks.onTransactionError?.(error as string)\n      throw error\n    }\n  }\n  if (existingAllowance.gt(\"0\")) {\n    // Reset to 0 before updating approval\n    await approve(Zero)\n  }\n  await approve(infiniteApproval ? MaxUint256 : spendingValue)\n  console.debug(`Approving ${tokenName} spend of ${spendingValue.toString()}`)\n}\n","import { PayloadAction, createSlice } from \"@reduxjs/toolkit\"\nimport { FarmStats } from \"../utils/fetchFarmStats\"\n\nimport { SwapStatsReponse } from \"../utils/getSwapStats\"\nimport { TRANSACTION_TYPES } from \"../constants\"\n\ninterface GasPrices {\n  gasStandard?: number\n  gasFast?: number\n  gasInstant?: number\n}\ninterface SwapStats {\n  [swapAddress: string]: {\n    oneDayVolume: string\n    apy: string\n    tvl: string\n    utilization: string\n  }\n}\nexport interface TokenPricesUSD {\n  [tokenSymbol: string]: number\n}\ninterface LastTransactionTimes {\n  [transactionType: string]: number\n}\n\ninterface UpdatedFarmStats {\n  [farmName: string]: FarmStats\n}\n\ntype ApplicationState = GasPrices & { tokenPricesUSD?: TokenPricesUSD } & {\n  lastTransactionTimes: LastTransactionTimes\n} & { swapStats?: SwapStats } & { farmStats?: UpdatedFarmStats }\n\nconst initialState: ApplicationState = {\n  lastTransactionTimes: {\n    [TRANSACTION_TYPES.STAKE]: 0,\n  },\n}\n\nconst applicationSlice = createSlice({\n  name: \"application\",\n  initialState,\n  reducers: {\n    updateGasPrices(state, action: PayloadAction<GasPrices>): void {\n      const { gasStandard, gasFast, gasInstant } = action.payload\n      state.gasStandard = gasStandard\n      state.gasFast = gasFast\n      state.gasInstant = gasInstant\n    },\n    updateFarmStats(state, action: PayloadAction<UpdatedFarmStats>): void {\n      state.farmStats = {\n        ...state.farmStats,\n        ...action.payload,\n      }\n    },\n    updateTokensPricesUSD(state, action: PayloadAction<TokenPricesUSD>): void {\n      state.tokenPricesUSD = action.payload\n    },\n    updateLastTransactionTimes(\n      state,\n      action: PayloadAction<LastTransactionTimes>,\n    ): void {\n      state.lastTransactionTimes = {\n        ...state.lastTransactionTimes,\n        ...action.payload,\n      }\n    },\n    updateSwapStats(state, action: PayloadAction<SwapStatsReponse>): void {\n      const formattedPayload = Object.keys(action.payload).reduce(\n        (acc, key) => {\n          const { APY, TVL, oneDayVolume: ODV } = action.payload[key]\n          if (isNaN(APY) || isNaN(TVL) || isNaN(ODV)) {\n            return acc\n          }\n          const apy = APY.toFixed(18)\n          const tvl = TVL.toFixed(18)\n          const oneDayVolume = ODV.toFixed(18)\n          const utilization = (TVL > 0 ? ODV / TVL : 0).toFixed(18)\n          return {\n            ...acc,\n            [key]: {\n              apy,\n              tvl,\n              oneDayVolume,\n              utilization,\n            },\n          }\n        },\n        {},\n      )\n      state.swapStats = formattedPayload\n    },\n  },\n})\n\nexport const {\n  updateGasPrices,\n  updateTokensPricesUSD,\n  updateLastTransactionTimes,\n  updateSwapStats,\n  updateFarmStats,\n} = applicationSlice.actions\n\nexport default applicationSlice.reducer\n","/* eslint-disable */\nimport { DepositTransaction, TransactionItem } from \"../interfaces/transactions\"\nimport { POOLS_MAP, PoolName, Token, isMetaPool } from \"../constants\"\nimport React, { ReactElement, useEffect, useMemo, useState } from \"react\"\nimport { TokensStateType, useTokenFormState } from \"../hooks/useTokenFormState\"\nimport { formatBNToString, getContract, shiftBNDecimals } from \"../utils\"\nimport usePoolData, { PoolDataType } from \"../hooks/usePoolData\"\n\nimport { AppState } from \"../state\"\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport { Contract, ContractReceipt } from \"@ethersproject/contracts\"\nimport DepositPage from \"../components/DepositPage\"\nimport FRAX_POOL_DEPOSIT from \"../constants/abis/FraxPoolDeposit.json\"\nimport { TokenPricesUSD } from \"../state/application\"\nimport { Zero } from \"@ethersproject/constants\"\nimport { calculatePriceImpact } from \"../utils/priceImpact\"\nimport { formatGasToString } from \"../utils/gas\"\nimport { parseUnits } from \"@ethersproject/units\"\nimport { useActiveWeb3React } from \"../hooks\"\nimport { useApproveAndDeposit } from \"../hooks/useApproveAndDeposit\"\nimport { usePoolContract } from \"../hooks/useContract\"\nimport { usePoolTokenBalances } from \"../state/wallet/hooks\"\nimport { useSelector } from \"react-redux\"\n\ninterface Props {\n  poolName: PoolName\n}\n\nfunction Deposit({ poolName }: Props): ReactElement | null {\n  const POOL = POOLS_MAP[poolName]\n  const { account, library, chainId } = useActiveWeb3React()\n  const approveAndDeposit = useApproveAndDeposit(poolName)\n  const [poolData, userShareData] = usePoolData(poolName)\n  // const swapContract = useSwapContract(poolName)\n  const poolContract = usePoolContract(poolName)\n  const allTokens = useMemo(() => {\n    return Array.from(\n      new Set(POOL.poolTokens.concat(POOL.underlyingPoolTokens || [])),\n    )\n  }, [POOL.poolTokens, POOL.underlyingPoolTokens])\n  const [tokenFormState, updateTokenFormState] = useTokenFormState(allTokens)\n  const [shouldDepositWrapped, setShouldDepositWrapped] = useState(false)\n  useEffect(() => {\n    // empty out previous token state when switchng between wrapped and unwrapped\n    if (shouldDepositWrapped) {\n      updateTokenFormState(\n        POOL.poolTokens.reduce(\n          (acc, { symbol }) => ({\n            ...acc,\n            [symbol]: \"\",\n          }),\n          {},\n        ),\n      )\n    } else {\n      updateTokenFormState(\n        (POOL.underlyingPoolTokens || []).reduce(\n          (acc, { symbol }) => ({\n            ...acc,\n            [symbol]: \"\",\n          }),\n          {},\n        ),\n      )\n    }\n  }, [\n    shouldDepositWrapped,\n    updateTokenFormState,\n    POOL.poolTokens,\n    POOL.underlyingPoolTokens,\n  ])\n  const tokenBalances = usePoolTokenBalances()\n  const { tokenPricesUSD, gasStandard, gasFast, gasInstant } = useSelector(\n    (state: AppState) => state.application,\n  )\n\n  // Merge underlying token usd prices and tokenPricesUSD array\n  const [underlyingPoolData] = usePoolData(POOL.underlyingPool)\n  let newTokenPricesUSD\n  if (underlyingPoolData.lpTokenPriceUSD != Zero) {\n    const underlyingTokenUSDValue = parseFloat(\n      formatBNToString(poolData.lpTokenPriceUSD, 18, 2),\n    )\n    newTokenPricesUSD = {\n      ...tokenPricesUSD,\n      ...{\n        [underlyingPoolData.lpToken]: underlyingTokenUSDValue,\n      },\n    }\n  }\n\n  const { gasPriceSelected, gasCustom } = useSelector(\n    (state: AppState) => state.user,\n  )\n  const gasPrice = BigNumber.from(\n    formatGasToString(\n      { gasStandard, gasFast, gasInstant },\n      gasPriceSelected,\n      gasCustom,\n    ),\n  )\n  const [estDepositLPTokenAmount, setEstDepositLPTokenAmount] = useState(Zero)\n  const [priceImpact, setPriceImpact] = useState(Zero)\n  const isMetaSwap = isMetaPool(POOL.name)\n  const metaSwapContract = useMemo(() => {\n    if (isMetaSwap && chainId && library) {\n      return getContract(\n        POOL.metaSwapAddresses?.[chainId] as string,\n        JSON.stringify(FRAX_POOL_DEPOSIT),\n        library,\n        account ?? undefined,\n      ) as Contract\n    }\n    return null\n  }, [isMetaSwap, chainId, library, POOL.metaSwapAddresses, account])\n\n  const exceedsWallet = allTokens.some(({ symbol }) => {\n    const exceedsBoolean = (tokenBalances?.[symbol] || Zero).lt(\n      BigNumber.from(tokenFormState[symbol].valueSafe),\n    )\n    return exceedsBoolean\n  })\n\n  useEffect(() => {\n    // evaluate if a new deposit will exceed the pool's per-user limit\n    async function calculateMaxDeposits(): Promise<void> {\n      if (\n        poolContract == null ||\n        userShareData == null ||\n        poolData == null ||\n        account == null ||\n        exceedsWallet\n      ) {\n        setEstDepositLPTokenAmount(Zero)\n        return\n      }\n      const tokenInputSum = parseUnits(\n        allTokens\n          .reduce(\n            (sum, { symbol }) => sum + (+tokenFormState[symbol].valueRaw || 0),\n            0,\n          )\n          .toFixed(18),\n        18,\n      )\n      let depositLPTokenAmount\n      if (poolData.totalLocked.gt(0) && tokenInputSum.gt(0)) {\n        if (shouldDepositWrapped) {\n          depositLPTokenAmount = metaSwapContract\n            ? await metaSwapContract.calc_token_amount(\n                (POOL.underlyingPoolTokens || []).map(({ symbol }) =>\n                  BigNumber.from(tokenFormState[symbol].valueSafe),\n                ),\n                true, // deposit boolean\n              )\n            : Zero\n        } else {\n          const txnAmounts: BigNumber[] = POOL.poolTokens.map((poolToken) => {\n            return BigNumber.from(tokenFormState[poolToken.symbol].valueSafe)\n          })\n          depositLPTokenAmount = await poolContract.calc_token_amount(\n            txnAmounts,\n            true, // deposit boolean\n          )\n        }\n      } else {\n        // when pool is empty, estimate the lptokens by just summing the input instead of calling contract\n        depositLPTokenAmount = tokenInputSum\n      }\n      setEstDepositLPTokenAmount(depositLPTokenAmount)\n\n      setPriceImpact(\n        calculatePriceImpact(\n          tokenInputSum,\n          depositLPTokenAmount,\n          poolData.virtualPrice,\n        ),\n      )\n    }\n    void calculateMaxDeposits()\n  }, [\n    poolData,\n    tokenFormState,\n    poolContract,\n    userShareData,\n    account,\n    POOL.poolTokens,\n    POOL.underlyingPoolTokens,\n    metaSwapContract,\n    shouldDepositWrapped,\n    allTokens,\n    exceedsWallet,\n  ])\n\n  // A represention of tokens used for UI\n  const tokens = (shouldDepositWrapped\n    ? POOL.underlyingPoolTokens || []\n    : POOL.poolTokens\n  ).map(({ symbol, name, icon, decimals }) => ({\n    symbol,\n    name,\n    icon,\n    max: formatBNToString(tokenBalances?.[symbol] || Zero, decimals),\n    inputValue: tokenFormState[symbol].valueRaw,\n  }))\n\n  async function onConfirmTransaction(): Promise<ContractReceipt | void> {\n    const receipt = await approveAndDeposit(\n      tokenFormState,\n      shouldDepositWrapped,\n    )\n    // Clear input after deposit\n    updateTokenFormState(\n      allTokens.reduce(\n        (acc, t) => ({\n          ...acc,\n          [t.symbol]: \"\",\n        }),\n        {},\n      ),\n    )\n\n    return receipt\n  }\n  function updateTokenFormValue(symbol: string, value: string): void {\n    updateTokenFormState({ [symbol]: value })\n  }\n  const depositTransaction = buildTransactionData(\n    tokenFormState,\n    poolData,\n    shouldDepositWrapped ? POOL.underlyingPoolTokens || [] : POOL.poolTokens,\n    POOL.lpToken,\n    priceImpact,\n    estDepositLPTokenAmount,\n    gasPrice,\n    newTokenPricesUSD,\n  )\n\n  return (\n    <DepositPage\n      onConfirmTransaction={onConfirmTransaction}\n      onChangeTokenInputValue={updateTokenFormValue}\n      onToggleDepositWrapped={() =>\n        setShouldDepositWrapped((prevState) => !prevState)\n      }\n      shouldDepositWrapped={shouldDepositWrapped}\n      title={poolName}\n      tokens={tokens}\n      exceedsWallet={exceedsWallet}\n      poolData={poolData}\n      myShareData={userShareData}\n      transactionData={depositTransaction}\n    />\n  )\n}\n\nfunction buildTransactionData(\n  tokenFormState: TokensStateType,\n  poolData: PoolDataType | null,\n  poolTokens: Token[],\n  poolLpToken: Token,\n  priceImpact: BigNumber,\n  estDepositLPTokenAmount: BigNumber,\n  gasPrice: BigNumber,\n  tokenPricesUSD?: TokenPricesUSD,\n): DepositTransaction {\n  const from = {\n    items: [] as TransactionItem[],\n    totalAmount: Zero,\n    totalValueUSD: Zero,\n  }\n  const TOTAL_AMOUNT_DECIMALS = 18\n  poolTokens.forEach((token) => {\n    const { symbol, decimals } = token\n    const amount = BigNumber.from(tokenFormState[symbol].valueSafe)\n    const usdPriceBN = parseUnits(\n      (tokenPricesUSD?.[symbol] || 0).toFixed(2),\n      18,\n    )\n    if (amount.lte(\"0\")) return\n    const item = {\n      token,\n      amount,\n      singleTokenPriceUSD: usdPriceBN,\n      valueUSD: amount.mul(usdPriceBN).div(BigNumber.from(10).pow(decimals)),\n    }\n    from.items.push(item)\n    from.totalAmount = from.totalAmount.add(\n      shiftBNDecimals(amount, TOTAL_AMOUNT_DECIMALS - decimals),\n    )\n    from.totalValueUSD = from.totalValueUSD.add(usdPriceBN)\n  })\n\n  const lpTokenPriceUSD = poolData?.lpTokenPriceUSD || Zero\n  const toTotalValueUSD = estDepositLPTokenAmount\n    .mul(lpTokenPriceUSD)\n    ?.div(BigNumber.from(10).pow(poolLpToken.decimals))\n  const to = {\n    item: {\n      token: poolLpToken,\n      amount: estDepositLPTokenAmount,\n      singleTokenPriceUSD: lpTokenPriceUSD,\n      valueUSD: toTotalValueUSD,\n    },\n    totalAmount: estDepositLPTokenAmount,\n    totalValueUSD: toTotalValueUSD,\n  }\n  const shareOfPool = poolData?.totalLocked.gt(0)\n    ? estDepositLPTokenAmount\n        .mul(BigNumber.from(10).pow(18))\n        .div(estDepositLPTokenAmount.add(poolData?.totalLocked))\n    : BigNumber.from(10).pow(18)\n  // const gasAmount = calculateGasEstimate(\"addLiquidity\").mul(gasPrice) // units of gas * GWEI/Unit of gas\n  const gasAmount = BigNumber.from(0)\n\n  const txnGasCost = {\n    amount: gasAmount,\n    valueUSD: tokenPricesUSD?.ETH\n      ? parseUnits(tokenPricesUSD.ETH.toFixed(2), 18) // USD / ETH  * 10^18\n          .mul(gasAmount) // GWEI\n          .div(BigNumber.from(10).pow(25)) // USD / ETH * GWEI * ETH / GWEI = USD\n      : null,\n  }\n\n  return {\n    from,\n    to,\n    priceImpact,\n    shareOfPool,\n    txnGasCost,\n  }\n}\n\nexport default Deposit\n","/* eslint-disable */\nimport { POOLS_MAP, PoolName, TRANSACTION_TYPES, Token } from \"../constants\"\nimport {\n  useAllContracts,\n  useLPTokenContract,\n  usePoolContract,\n} from \"./useContract\"\nimport { useDispatch, useSelector } from \"react-redux\"\n\nimport { AppState } from \"../state\"\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport { ContractReceipt } from \"@ethersproject/contracts\"\nimport { Erc20 } from \"../../types/ethers-contracts/Erc20\"\nimport { FraxPoolDeposit } from \"../../types/ethers-contracts/FraxPoolDeposit\"\nimport FRAX_POOL_DEPOSIT from \"../constants/abis/FraxPoolDeposit.json\"\nimport { NumberInputState } from \"../utils/numberInputState\"\nimport { Zero } from \"@ethersproject/constants\"\nimport checkAndApproveTokenForTrade from \"../utils/checkAndApproveTokenForTrade\"\nimport { getContract } from \"../utils\"\nimport { subtractSlippage } from \"../utils/slippage\"\nimport { updateLastTransactionTimes } from \"../state/application\"\nimport { useActiveWeb3React } from \".\"\nimport { useMemo } from \"react\"\n\ninterface ApproveAndDepositStateArgument {\n  [tokenSymbol: string]: NumberInputState\n}\n\nexport function useApproveAndDeposit(\n  poolName: PoolName,\n): (\n  state: ApproveAndDepositStateArgument,\n  shouldDepositWrapped?: boolean,\n) => Promise<ContractReceipt | void> {\n  const dispatch = useDispatch()\n  // const swapContract = useSwapContract(poolName)\n  const poolContract = usePoolContract(poolName)\n  const lpTokenContract = useLPTokenContract(poolName)\n  const tokenContracts = useAllContracts()\n  const { account, chainId, library } = useActiveWeb3React()\n  const { slippageCustom, slippageSelected, infiniteApproval } = useSelector(\n    (state: AppState) => state.user,\n  )\n  const POOL = POOLS_MAP[poolName]\n  const metaSwapContract = useMemo(() => {\n    if (POOL.metaSwapAddresses && chainId && library) {\n      return getContract(\n        POOL.metaSwapAddresses?.[chainId],\n        JSON.stringify(FRAX_POOL_DEPOSIT),\n        library,\n        account ?? undefined,\n      ) as FraxPoolDeposit\n    }\n    return null\n  }, [chainId, library, POOL.metaSwapAddresses, account])\n\n  return async function approveAndDeposit(\n    state: ApproveAndDepositStateArgument,\n    shouldDepositWrapped = false,\n  ): Promise<ContractReceipt | void> {\n    try {\n      if (!account) throw new Error(\"Wallet must be connected\")\n      if (\n        !poolContract ||\n        !lpTokenContract ||\n        (shouldDepositWrapped && !metaSwapContract)\n      )\n        throw new Error(\"Swap contract is not loaded\")\n\n      const poolTokens = shouldDepositWrapped\n        ? (POOL.underlyingPoolTokens as Token[])\n        : POOL.poolTokens\n      const effectiveSwapContract = shouldDepositWrapped\n        ? (metaSwapContract as FraxPoolDeposit)\n        : poolContract\n\n      // const gasPrice = parseUnits(String(gasPriceUnsafe) || \"45\", 9)\n      const gasPrice = Zero\n      const approveSingleToken = async (token: Token): Promise<void> => {\n        const spendingValue = BigNumber.from(state[token.symbol].valueSafe)\n        if (spendingValue.isZero()) return\n        const tokenContract = tokenContracts?.[token.symbol] as Erc20\n        if (tokenContract == null) return\n        await checkAndApproveTokenForTrade(\n          tokenContract,\n          effectiveSwapContract.address,\n          account,\n          spendingValue,\n          infiniteApproval,\n          gasPrice,\n          {\n            onTransactionError: (error) => {\n              console.error(error)\n              throw new Error(\"Your transaction could not be completed\")\n            },\n          },\n        )\n        return\n      }\n      // For each token being deposited, check the allowance and approve it if necessary\n      for (const token of poolTokens) {\n        await approveSingleToken(token)\n      }\n\n      const effectivePoolContract = effectiveSwapContract\n      const txnAmounts: BigNumber[] = poolTokens.map((poolToken) => {\n        return BigNumber.from(state[poolToken.symbol].valueSafe)\n      })\n\n      const isFirstTransaction = (await lpTokenContract.totalSupply()).isZero()\n      let minToMint: BigNumber\n      if (isFirstTransaction) {\n        minToMint = BigNumber.from(\"0\")\n      } else {\n        minToMint = await effectivePoolContract.calc_token_amount(\n          txnAmounts,\n          true, // deposit boolean\n        )\n      }\n\n      minToMint = subtractSlippage(minToMint, slippageSelected, slippageCustom)\n      \n      // const swapFlashLoanContract = effectiveSwapContract as RoseStablesPool\n      const spendTransaction = await effectivePoolContract.add_liquidity(\n        txnAmounts,\n        minToMint,\n        {\n          gasPrice,\n        },\n      )\n\n      // notifyHandler(spendTransaction.hash, \"deposit\")\n\n      const receipt = await spendTransaction.wait()\n      dispatch(\n        updateLastTransactionTimes({\n          [TRANSACTION_TYPES.DEPOSIT]: Date.now(),\n        }),\n      )\n      return receipt\n    } catch (e) {\n      console.error(e)\n      // notifyCustomError(e as Error)\n    }\n  }\n}\n","import {\n  NumberInputState,\n  numberInputStateCreator,\n} from \"../utils/numberInputState\"\nimport React, { useCallback, useMemo } from \"react\"\n\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport { Token } from \"../constants\"\n\nexport interface TokensStateType {\n  [token: string]: NumberInputState\n}\ntype UpdateTokensStateType = (newState: {\n  [token: string]: string | BigNumber\n}) => void\ntype UseTokenFormStateReturnType = [TokensStateType, UpdateTokensStateType]\n\nexport function useTokenFormState(\n  tokens: Token[],\n): UseTokenFormStateReturnType {\n  // Token input state handlers\n  const tokenInputStateCreators: {\n    [tokenSymbol: string]: ReturnType<typeof numberInputStateCreator>\n  } = useMemo(\n    () =>\n      tokens.reduce(\n        (acc, token) => ({\n          ...acc,\n          [token.symbol]: numberInputStateCreator(\n            token.decimals,\n            BigNumber.from(\"0\"),\n          ),\n        }),\n        {},\n      ),\n    [tokens],\n  )\n\n  // Token input values, both \"raw\" and formatted \"safe\" BigNumbers\n  const [tokenFormState, setTokenFormState] = React.useState<TokensStateType>(\n    tokens.reduce(\n      (acc, token) => ({\n        ...acc,\n        [token.symbol]: tokenInputStateCreators[token.symbol](\"\"),\n      }),\n      {},\n    ),\n  )\n\n  // function updateTokenFormValue(tokenSymbol: string, value: string): void {\n  //   setTokenFormState((prevState) => ({\n  //     ...prevState,\n  //     [tokenSymbol]: tokenInputStateCreators[tokenSymbol](value),\n  //   }))\n  // }\n  const updateTokenFormState = useCallback(\n    (newState: { [symbol: string]: string | BigNumber }) => {\n      const convertedNewState = Object.keys(newState).reduce(\n        (acc, symbol) => ({\n          ...acc,\n          [symbol]: tokenInputStateCreators[symbol](newState[symbol]),\n        }),\n        {},\n      )\n      setTokenFormState((prevState) => ({\n        ...prevState,\n        ...convertedNewState,\n      }))\n    },\n    [tokenInputStateCreators],\n  )\n\n  return [tokenFormState, updateTokenFormState]\n}\n","import React, { ReactElement } from \"react\"\nimport BackButton from \"./BackButton\"\nimport styles from \"./FarmFooter.module.scss\"\n\nconst FarmFooter = (): ReactElement => {\n  return (\n    <div className={styles.farmFooter}>\n      <BackButton\n        route=\"/farms\"\n        wrapperClass={styles.goBack}\n        buttonText=\"Go back to farms\"\n      />\n    </div>\n  )\n}\n\nexport default FarmFooter\n","// TODO: create types\n/* eslint @typescript-eslint/no-unsafe-member-access: 0 */\n/* eslint @typescript-eslint/no-unsafe-call: 0 */\n/* eslint @typescript-eslint/no-unsafe-assignment: 0 */\n/* eslint @typescript-eslint/no-explicit-any: 0 */\nimport {\n  Button,\n  FormControl,\n  FormErrorMessage,\n  Input,\n  InputGroup,\n  InputLeftElement,\n  InputRightElement,\n  Text,\n} from \"@chakra-ui/react\"\nimport { Field, FieldAttributes, Form, Formik } from \"formik\"\nimport React, { ReactElement, ReactNode } from \"react\"\nimport { ContractReceipt } from \"@ethersproject/contracts\"\nimport parseStringToBigNumber from \"../utils/parseStringToBigNumber\"\nimport styles from \"./StakeForm.module.scss\"\nimport { useTranslation } from \"react-i18next\"\n\ninterface Props {\n  fieldName: string\n  token: string\n  tokenIcon: string\n  max: string\n  isLoading: boolean\n  submitButtonLabel: string\n  formDescription?: ReactNode\n  handleSubmit: (amount: string) => Promise<ContractReceipt | void>\n  validator: (amount: string) => string | undefined\n  handlePreSubmit?: () => void\n  handlePostSubmit?: (receipt: ContractReceipt | null) => void\n  handleInputChanged?: (value: string) => void\n}\nfunction StakeForm(props: Props): ReactElement {\n  const { t } = useTranslation()\n  const {\n    fieldName,\n    token,\n    tokenIcon,\n    max,\n    isLoading,\n    submitButtonLabel,\n    formDescription,\n    handleSubmit,\n    handleInputChanged,\n    handlePreSubmit,\n    handlePostSubmit,\n    validator,\n  } = props\n  return (\n    <div className={styles.inputContainer}>\n      <Formik\n        initialValues={{ [fieldName]: \"\" }}\n        onSubmit={async (values, actions) => {\n          handlePreSubmit?.()\n          const valueSafe = parseStringToBigNumber(values?.[fieldName], 18)\n          actions.resetForm({ values: { [fieldName]: \"\" } })\n          const receipt = (await handleSubmit(\n            valueSafe.value.toString(),\n          )) as ContractReceipt\n          handlePostSubmit?.(receipt)\n        }}\n      >\n        {(props) => (\n          <Form>\n            <Field name={fieldName} validate={validator}>\n              {({ field, form }: FieldAttributes<any>) => (\n                <FormControl\n                  isInvalid={\n                    form.errors?.[fieldName] && form.touched?.[fieldName]\n                  }\n                >\n                  <InputGroup>\n                    <InputLeftElement\n                      pointerEvents=\"none\"\n                      color=\"gray.300\"\n                      fontSize=\"1.2em\"\n                    >\n                      <img src={tokenIcon} alt=\"roseIcon\" />\n                    </InputLeftElement>\n                    <Input\n                      {...field}\n                      autoComplete=\"off\"\n                      autoCorrect=\"off\"\n                      isInvalid={form.errors?.[fieldName]}\n                      placeholder={`${token} Token`}\n                      variant=\"primary\"\n                      onChange={(e) => {\n                        props.handleChange(e)\n                        handleInputChanged?.(e.target.value)\n                      }}\n                    />\n                    <InputRightElement width=\"4rem\">\n                      <Button\n                        variant=\"light\"\n                        size=\"sm\"\n                        onClick={() => {\n                          handleInputChanged?.(max)\n                          props.setFieldTouched(fieldName, true)\n                          props.setFieldValue(fieldName, max)\n                        }}\n                      >\n                        {t(\"max\")}\n                      </Button>\n                    </InputRightElement>\n                  </InputGroup>\n                  {props.isValid && props.dirty ? (\n                    <Text mt=\"5px\" fontSize=\"sm\" as=\"i\">\n                      You are about to {fieldName} ≈{+props.values?.[fieldName]}{\" \"}\n                      {token} {\"Token\"}\n                    </Text>\n                  ) : (\n                    <FormErrorMessage>\n                      {form.errors?.[fieldName]}\n                    </FormErrorMessage>\n                  )}\n                </FormControl>\n              )}\n            </Field>\n            {formDescription ? (\n              <div className={styles.stakeInfoContainer}>\n                <div className={styles.infoMessage}>\n                  <span>{formDescription}</span>\n                </div>\n              </div>\n            ) : null}\n\n            <div className={styles.submitButton}>\n              <Button\n                variant=\"primary\"\n                isLoading={isLoading}\n                size=\"lg\"\n                width=\"450px\"\n                type=\"submit\"\n                disabled={!props.isValid || !props.dirty}\n              >\n                {props.isValid ? submitButtonLabel : props.errors?.[fieldName]}\n              </Button>\n            </div>\n          </Form>\n        )}\n      </Formik>\n    </div>\n  )\n}\n\nexport default StakeForm\n","import { BigNumber } from \"@ethersproject/bignumber\"\nimport { Erc20 } from \"../../types/ethers-contracts/Erc20\"\nimport { RoseFraxLP } from \"../../types/ethers-contracts/RoseFraxLP\"\nimport { RoseStablesLP } from \"../../types/ethers-contracts/RoseStablesLP\"\n\nexport default async function checkTokenAllowance(\n  srcTokenContract: Erc20 | RoseStablesLP | RoseFraxLP | null,\n  swapAddress: string,\n  spenderAddress: string,\n  spendingValue: BigNumber,\n): Promise<boolean> {\n  if (srcTokenContract == null) return false\n  if (spendingValue.eq(0)) return false\n\n  const existingAllowance = await srcTokenContract.allowance(\n    spenderAddress,\n    swapAddress,\n  )\n\n  if (existingAllowance.gte(spendingValue)) return true\n\n  return false\n}\n","import { Erc20 } from \"../../types/ethers-contracts/Erc20\"\nimport { RoseFraxLP } from \"../../types/ethers-contracts/RoseFraxLP\"\nimport { RoseStablesFarm } from \"../../types/ethers-contracts/RoseStablesFarm\"\nimport { RoseStablesLP } from \"../../types/ethers-contracts/RoseStablesLP\"\nimport checkTokenAllowance from \"../utils/checkTokenAllowance\"\nimport parseStringToBigNumber from \"../utils/parseStringToBigNumber\"\nimport { useActiveWeb3React } from \".\"\nimport { useState } from \"react\"\n\nexport function useCheckTokenRequiresApproval(\n  srcTokenContract: Erc20 | RoseStablesLP | RoseFraxLP | null,\n  dstTokenContract: RoseStablesFarm | Erc20 | null,\n  timeout = 500,\n): [boolean, boolean, (spendingValue: string) => void] {\n  const { account } = useActiveWeb3React()\n  const [approved, setApproved] = useState<boolean>(false)\n  const [loading, setLoading] = useState<boolean>(false)\n  const [timer, setTimer] = useState<NodeJS.Timer>()\n  const checkApproval = function tokenRequiresApproval(\n    spendingValue: string,\n  ): void {\n    try {\n      if (!account) throw new Error(\"Wallet must be connected\")\n      if (!srcTokenContract || !dstTokenContract)\n        throw new Error(\"Contracts are not loaded\")\n      const valueSafe = parseStringToBigNumber(spendingValue, 18)\n      clearTimeout(timer as NodeJS.Timer)\n      setLoading(true)\n      const newTimer = setTimeout(() => {\n        checkTokenAllowance(\n          srcTokenContract,\n          dstTokenContract.address,\n          account,\n          valueSafe.value,\n        )\n          .then((isApproved) => {\n            setApproved(isApproved)\n            setLoading(false)\n          })\n          .catch((e) => console.error(e))\n      }, timeout)\n      setTimer(newTimer)\n    } catch (e) {\n      console.error(e)\n    }\n  }\n  return [approved, loading, checkApproval]\n}\n","import React, { ReactElement } from \"react\"\nimport { Tab, TabList, TabPanel, TabPanels, Tabs } from \"@chakra-ui/react\"\nimport { Trans, useTranslation } from \"react-i18next\"\nimport {\n  useFarmContract,\n  useLPTokenContractForFarm,\n} from \"../hooks/useContract\"\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport { ContractReceipt } from \"@ethersproject/contracts\"\nimport { FarmName } from \"../constants\"\nimport { ModalType } from \"./ConfirmTransaction\"\nimport StakeForm from \"./StakeForm\"\nimport { Zero } from \"@ethersproject/constants\"\nimport { formatBNToString } from \"../utils\"\nimport { parseUnits } from \"@ethersproject/units\"\nimport styles from \"./FarmTabs.module.scss\"\nimport { useApproveAndDepositFarm } from \"../hooks/useApproveAndDepositFarm\"\nimport { useCheckTokenRequiresApproval } from \"../hooks/useCheckTokenRequiresApproval\"\nimport { useWithdrawFarm } from \"../hooks/useWithdrawFarm\"\n\ninterface Props {\n  lpTokenName: string\n  lpTokenIcon: string\n  balance: BigNumber\n  deposited: BigNumber\n  farmName: FarmName\n  poolName: string\n  handleModal: (modalType: ModalType, tx?: string | undefined) => void\n}\n\nconst FarmTabs = (props: Props): ReactElement => {\n  const {\n    lpTokenName,\n    balance,\n    deposited,\n    farmName,\n    lpTokenIcon,\n    poolName,\n    handleModal,\n  } = props\n  const { t } = useTranslation()\n  const farm = useApproveAndDepositFarm(farmName)\n  const withdraw = useWithdrawFarm(farmName)\n\n  const farmContract = useFarmContract(farmName)\n  const lpTokenContract = useLPTokenContractForFarm(farmName)\n\n  const [\n    approved,\n    loading,\n    checkLpTokenApproved,\n  ] = useCheckTokenRequiresApproval(lpTokenContract, farmContract)\n\n  const validateBalance = (amount: string) => {\n    const generalValidation = validateAmount(amount)\n    if (generalValidation) {\n      return generalValidation\n    }\n    if (parseUnits(amount, 18).gt(balance)) {\n      return t(\"insufficientBalance\")\n    }\n  }\n\n  const validateDeposited = (amount: string) => {\n    const generalValidation = validateAmount(amount)\n    if (generalValidation) {\n      return generalValidation\n    }\n    if (parseUnits(amount, 18).gt(deposited)) {\n      return t(\"insufficientBalance\")\n    }\n  }\n\n  const validateAmount = (amount: string) => {\n    const decimalRegex = /^[0-9]\\d*(\\.\\d{1,18})?$/\n    if (!amount) {\n      return t(\"You must enter a value.\")\n    }\n    if (!decimalRegex.exec(amount)) {\n      return t(\"Invalid number.\")\n    }\n    if (parseUnits(amount, 18).lte(Zero)) {\n      return t(\"Enter a positive amount.\")\n    }\n    return null\n  }\n\n  const postDeposit = (receipt: ContractReceipt | null) => {\n    if (receipt?.status) {\n      handleModal(ModalType.SUCCESS, t(\"deposit\"))\n    } else {\n      handleModal(ModalType.FAILED, t(\"deposit\"))\n    }\n  }\n\n  const postWithdraw = (receipt: ContractReceipt | null) => {\n    if (receipt?.status) {\n      handleModal(ModalType.SUCCESS, t(\"Withdraw\"))\n    } else {\n      handleModal(ModalType.FAILED, t(\"Withdraw\"))\n    }\n  }\n\n  return (\n    <div className={styles.farmTabs}>\n      <Tabs isFitted variant=\"primary\">\n        <TabList mb=\"1em\">\n          <Tab>{t(\"deposit\")}</Tab>\n          <Tab>{t(\"Withdraw\")}</Tab>\n        </TabList>\n        <TabPanels>\n          <TabPanel>\n            <h4 className={styles.farmTitle}>\n              {t(\"farm\")} {lpTokenName}\n            </h4>\n            <StakeForm\n              fieldName={\"deposit\"}\n              token={lpTokenName}\n              tokenIcon={lpTokenIcon}\n              submitButtonLabel={\n                approved\n                  ? t(\"deposit\")\n                  : t(\"approveAnd\", { action: t(\"deposit\") })\n              }\n              isLoading={loading}\n              formDescription={\n                <Trans t={t} i18nKey=\"farmDescription\">\n                  {{ tokenName: lpTokenName }}\n                  <b>{{ poolName: poolName }}</b>\n                </Trans>\n              }\n              max={formatBNToString(balance || Zero, 18, 18)}\n              handleSubmit={farm}\n              handlePostSubmit={postDeposit}\n              handlePreSubmit={() => handleModal(ModalType.CONFIRM)}\n              handleInputChanged={checkLpTokenApproved}\n              validator={validateBalance}\n            />\n          </TabPanel>\n          <TabPanel>\n            <h4 className={styles.farmTitle}>\n              {t(\"Withdraw\")} {lpTokenName}\n            </h4>\n            <StakeForm\n              fieldName={\"withdraw\"}\n              token={lpTokenName}\n              tokenIcon={lpTokenIcon}\n              isLoading={false}\n              submitButtonLabel={t(\"Withdraw\")}\n              formDescription={\n                <Trans t={t} i18nKey=\"farmDescription\">\n                  {{ tokenName: lpTokenName }}\n                  <b>{{ poolName: poolName }}</b>\n                </Trans>\n              }\n              max={formatBNToString(deposited || Zero, 18, 18)}\n              handleSubmit={withdraw}\n              validator={validateDeposited}\n              handlePostSubmit={postWithdraw}\n              handlePreSubmit={() => handleModal(ModalType.CONFIRM)}\n            />\n          </TabPanel>\n        </TabPanels>\n      </Tabs>\n    </div>\n  )\n}\n\nexport default FarmTabs\n","import { FarmName, TRANSACTION_TYPES } from \"../constants\"\nimport { useFarmContract, useLPTokenContractForFarm } from \"./useContract\"\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport { ContractReceipt } from \"@ethersproject/contracts\"\nimport { RoseStablesFarm } from \"../../types/ethers-contracts/RoseStablesFarm\"\nimport { Zero } from \"@ethersproject/constants\"\nimport checkAndApproveTokenForTrade from \"../utils/checkAndApproveTokenForTrade\"\nimport { updateLastTransactionTimes } from \"../state/application\"\nimport { useActiveWeb3React } from \".\"\nimport { useDispatch } from \"react-redux\"\n\nexport function useApproveAndDepositFarm(\n  farmName: FarmName,\n): (amount: string) => Promise<ContractReceipt | void> {\n  const dispatch = useDispatch()\n  const farmContract = useFarmContract(farmName) as RoseStablesFarm\n  const lpTokenContract = useLPTokenContractForFarm(farmName)\n  const { account } = useActiveWeb3React()\n  return async function approveAndStake(\n    amount: string,\n  ): Promise<ContractReceipt | void> {\n    try {\n      if (!account) throw new Error(\"Wallet must be connected\")\n      if (!farmContract) throw new Error(\"Farm contract is not loaded\")\n      if (!lpTokenContract) throw new Error(\"LP Token contract is not loaded\")\n      const gasPrice = Zero\n      const amountToStake = BigNumber.from(amount)\n      await checkAndApproveTokenForTrade(\n        lpTokenContract,\n        farmContract.address,\n        account,\n        amountToStake,\n        true,\n        gasPrice,\n        {\n          onTransactionError: (error) => {\n            console.error(error)\n            throw new Error(\"Your transaction could not be completed\")\n          },\n        },\n      )\n      const tx = await farmContract.stake(amountToStake)\n      const receipt = await tx.wait()\n      dispatch(\n        updateLastTransactionTimes({\n          [TRANSACTION_TYPES.DEPOSIT]: Date.now(),\n        }),\n      )\n      return receipt\n    } catch (e) {\n      console.error(e)\n    }\n  }\n}\n","import { FarmName, TRANSACTION_TYPES } from \"../constants\"\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport { ContractReceipt } from \"@ethersproject/contracts\"\nimport { updateLastTransactionTimes } from \"../state/application\"\nimport { useActiveWeb3React } from \".\"\nimport { useDispatch } from \"react-redux\"\nimport { useFarmContract } from \"./useContract\"\n\nexport function useWithdrawFarm(\n  farmName: FarmName,\n): (amount: string) => Promise<ContractReceipt | void> {\n  const dispatch = useDispatch()\n  const farmContract = useFarmContract(farmName)\n  const { account } = useActiveWeb3React()\n  return async function approveAndStake(\n    amount: string,\n  ): Promise<ContractReceipt | void> {\n    try {\n      if (!account) throw new Error(\"Wallet must be connected\")\n      if (!farmContract) throw new Error(\"Rose contract is not loaded\")\n      const amountToWithdraw = BigNumber.from(amount)\n      const tx = await farmContract.withdraw(amountToWithdraw)\n      const receipt = await tx.wait()\n      dispatch(\n        updateLastTransactionTimes({\n          [TRANSACTION_TYPES.WITHDRAW]: Date.now(),\n        }),\n      )\n      return receipt\n    } catch (e) {\n      console.error(e)\n    }\n  }\n}\n","/* eslint-disable */\nimport { motion } from \"framer-motion\"\nimport { useEffect, useRef, useState } from \"react\"\nimport useWindowSize from \"../hooks/useWindowSize\"\nimport \"./AnimatingNumber.scss\"\n\nfunction usePrevious(value) {\n  const ref = useRef()\n\n  useEffect(() => {\n    ref.current = value\n  })\n\n  return ref.current\n}\n\nfunction formatForDisplay(number = 0, precision = 2) {\n  return parseFloat(Math.max(number, 0)).toFixed(precision).split(\"\").reverse()\n}\n\nfunction DecimalColumn() {\n  return (\n    <div>\n      <div>.</div>\n    </div>\n  )\n}\n\nfunction NumberColumn({ digit, delta }) {\n  const [position, setPosition] = useState(0)\n  const [animationClass, setAnimationClass] = useState(null)\n  const previousDigit = usePrevious(digit)\n  const columnContainer = useRef()\n  const [width, height] = useWindowSize()\n\n  const setColumnToNumber = (number) => {\n    setPosition(columnContainer.current.clientHeight * parseInt(number, 10))\n  }\n\n  useEffect(() => setAnimationClass(previousDigit !== digit ? delta : \"\"), [\n    digit,\n    delta,\n  ])\n  useEffect(() => setColumnToNumber(digit), [digit, width, height])\n\n  return (\n    <div className=\"ticker-column-container\" ref={columnContainer}>\n      <motion.div\n        animate={{ y: position }}\n        className={`ticker-column ${animationClass}`}\n        onAnimationComplete={() => setAnimationClass(\"\")}\n      >\n        {[9, 8, 7, 6, 5, 4, 3, 2, 1, 0].map((num) => (\n          <div key={num} className=\"ticker-digit\">\n            {num}\n          </div>\n        ))}\n      </motion.div>\n      <span className=\"number-placeholder\">0</span>\n    </div>\n  )\n}\n\nexport default function AnimatingNumber({ value, precision = 2 }) {\n  const numArray = formatForDisplay(value, precision)\n  const previousNumber = usePrevious(value)\n\n  let delta = null\n  if (value > previousNumber) delta = \"increase\"\n  if (value < previousNumber) delta = \"decrease\"\n\n  return (\n    <motion.div layout className=\"ticker-view\">\n      {numArray.map((number, index) =>\n        number === \".\" ? (\n          <DecimalColumn key={index} />\n        ) : (\n          <NumberColumn key={index} digit={number} delta={delta} />\n        ),\n      )}\n    </motion.div>\n  )\n}\n","import { useLayoutEffect, useState } from \"react\"\n\nexport default function useWindowSize(): [number, number] {\n  const [size, setSize] = useState<[number, number]>([0, 0])\n  useLayoutEffect(() => {\n    function updateSize() {\n      setSize([window.innerWidth, window.innerHeight])\n    }\n    window.addEventListener(\"resize\", updateSize)\n    updateSize()\n    return () => window.removeEventListener(\"resize\", updateSize)\n  }, [])\n  return size\n}\n","import React, { ReactElement } from \"react\"\nimport AnimatingNumber from \"./AnimateNumber\"\nimport { Button } from \"@chakra-ui/react\"\nimport { ModalType } from \"./ConfirmTransaction\"\nimport styles from \"./HarvestRewards.module.scss\"\nimport { useTranslation } from \"react-i18next\"\n\ninterface Props {\n  rewardBalance: string\n  handleModal: (modalType: ModalType, tx?: string | undefined) => void\n}\n\nconst HarvestRewards = ({\n  rewardBalance,\n  handleModal,\n}: Props): ReactElement => {\n  const { t } = useTranslation()\n  return (\n    <div className={styles.harvestRewards}>\n      <div className={styles.harvestTitle}>\n        <h4 className={styles.title}>{t(\"rewards\")}</h4>\n      </div>\n      <div className={styles.rewardBalance}>\n        <AnimatingNumber\n          value={+rewardBalance}\n          precision={+rewardBalance ? 5 : 1}\n        ></AnimatingNumber>\n        <h4 className={styles.title}>&nbsp;ROSE</h4>\n      </div>\n      <div className={styles.buttonWrapper}>\n        <Button\n          variant=\"primary\"\n          size=\"lg\"\n          width=\"270px\"\n          disabled={+rewardBalance <= 0}\n          onClick={() => handleModal(ModalType.APPROVE)}\n        >\n          {t(\"harvestRewards\")}\n        </Button>\n      </div>\n    </div>\n  )\n}\n\nexport default HarvestRewards\n","import {\n  Divider,\n  Stat,\n  StatGroup,\n  StatLabel,\n  StatNumber,\n} from \"@chakra-ui/react\"\nimport React, { ReactElement } from \"react\"\nimport styles from \"./StakeDetails.module.scss\"\n\ninterface StakeStats {\n  statLabel: string\n  statValue: string\n}\ninterface StakedDetailsView {\n  tokenName: string\n  amount: string\n  icon: string\n  title?: string\n}\ninterface Props {\n  balanceView: StakedDetailsView\n  stakedView: StakedDetailsView\n  stats?: StakeStats[]\n}\nconst StakeDetails = (props: Props): ReactElement => {\n  const { balanceView, stakedView, stats } = props\n  return (\n    <div className={styles.stakeDetailsContainer}>\n      <div className={styles.stakeDetails}>\n        <div className={styles.row}>\n          <h3 className={styles.title}>{balanceView.title}</h3>\n        </div>\n        <div className={styles.row}>\n          <div className={styles.icon}>\n            <img src={balanceView.icon} alt=\"tokenIcon\" />\n          </div>\n          <div className={styles.balanceDetails}>\n            <StatGroup>\n              <Stat>\n                <StatLabel>{balanceView.tokenName}</StatLabel>\n                <StatNumber fontSize=\"18px\">{balanceView.amount}</StatNumber>\n              </Stat>\n            </StatGroup>\n          </div>\n        </div>\n      </div>\n      <Divider />\n      <div className={styles.stakeDetails}>\n        <div className={styles.row}>\n          <h3 className={styles.title}>{stakedView.title}</h3>\n        </div>\n        <div className={styles.row}>\n          <div className={styles.icon}>\n            <img src={stakedView.icon} alt=\"tokenIcon\" />\n          </div>\n          <div className={styles.balanceDetails}>\n            <StatGroup>\n              <Stat>\n                <StatLabel>{stakedView.tokenName}</StatLabel>\n                <StatNumber fontSize=\"18px\">{stakedView.amount}</StatNumber>\n              </Stat>\n            </StatGroup>\n          </div>\n        </div>\n      </div>\n      {stats && (\n        <>\n          <Divider />\n          <div className={styles.statsDetails}>\n            {stats.map(({ statLabel, statValue }, index) => {\n              return (\n                <div className={styles.statRow} key={index}>\n                  <div className={styles.statLabel}>{statLabel}</div>\n                  <div className={styles.statValue}>{statValue}</div>\n                </div>\n              )\n            })}\n          </div>\n        </>\n      )}\n    </div>\n  )\n}\n\nexport default StakeDetails\n","import ConfirmTransaction, {\n  ConfirmTransactionProps,\n  ModalType,\n} from \"./ConfirmTransaction\"\nimport React, { ReactElement, useState } from \"react\"\nimport { commify, formatBNToShortString, formatBNToString } from \"../utils\"\nimport { AppState } from \"../state\"\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport { Button } from \"@chakra-ui/react\"\nimport FarmFooter from \"./FarmFooter\"\nimport { FarmName } from \"../constants\"\nimport FarmTabs from \"./FarmTabs\"\nimport HarvestRewards from \"./HarvestRewards\"\nimport Modal from \"./Modal\"\nimport StakeDetails from \"./StakeDetails\"\nimport styles from \"./FarmPage.module.scss\"\nimport useClaimReward from \"../hooks/useClaimReward\"\nimport useEarnedRewards from \"../hooks/useEarnedRewards\"\nimport useFarmExit from \"../hooks/useFarmExit\"\nimport { useSelector } from \"react-redux\"\nimport { useTranslation } from \"react-i18next\"\n\ninterface Props {\n  lpTokenName: string\n  lpTokenIcon: string\n  balance: BigNumber\n  deposited: BigNumber\n  farmName: FarmName\n  poolName: string\n}\n\nconst FarmPage = (props: Props): ReactElement => {\n  const { lpTokenName, lpTokenIcon, balance, deposited, farmName } = props\n  const formattedBalance = commify(formatBNToString(balance, 18, 5))\n  const formattedDeposited = commify(formatBNToString(deposited, 18, 5))\n  const rewardsEarned = useEarnedRewards(farmName)\n  const exit = useFarmExit(farmName)\n  const getReward = useClaimReward(farmName)\n  const [\n    currentModal,\n    setCurrentModal,\n  ] = useState<ConfirmTransactionProps | null>(null)\n  const { farmStats } = useSelector((state: AppState) => state.application)\n  const tvl = farmStats?.[farmName]?.tvl\n  const formattedTvl = tvl\n    ? `$${formatBNToShortString(BigNumber.from(tvl), 18)}`\n    : \"-\"\n  const apr = farmStats?.[farmName]?.apr || \"-\"\n  const { t } = useTranslation()\n\n  const updateModal = (modalType: ModalType, tx?: string): void => {\n    switch (modalType) {\n      case ModalType.CONFIRM:\n        setCurrentModal({ type: ModalType.CONFIRM })\n        break\n      case ModalType.SUCCESS:\n        setCurrentModal({\n          type: ModalType.SUCCESS,\n          title: t(\"successTitle\"),\n          description: t(\"txConfirmed\", { tx }),\n        })\n        break\n      case ModalType.FAILED:\n        setCurrentModal({\n          type: ModalType.FAILED,\n          title: t(\"failedTitle\"),\n          description: t(\"txFailed\", { tx }),\n        })\n        break\n      case ModalType.APPROVE:\n        setCurrentModal({\n          type: ModalType.APPROVE,\n          title: t(\"chooseOption\"),\n          description:\n            \"Please choose between harvest or withdraw and harvest (claim everything from this farm).\",\n        })\n        break\n      default:\n        break\n    }\n  }\n\n  return (\n    <div className={styles.farmPage}>\n      <Modal\n        isOpen={!!currentModal}\n        onClose={(): void => setCurrentModal(null)}\n      >\n        <ConfirmTransaction\n          description={currentModal?.description}\n          title={currentModal?.title}\n          type={currentModal?.type}\n        >\n          {currentModal?.type === ModalType.APPROVE ? (\n            <div className={styles.approveButtons}>\n              <Button\n                variant=\"primary\"\n                onClick={async () => {\n                  updateModal(ModalType.CONFIRM)\n                  const receipt = await getReward()\n                  if (receipt?.status) {\n                    updateModal(ModalType.SUCCESS, t(\"harvestRewards\"))\n                  } else {\n                    updateModal(ModalType.FAILED, t(\"harvestRewards\"))\n                  }\n                }}\n              >\n                {t(\"harvestRewards\")}\n              </Button>\n              <Button\n                variant=\"outline\"\n                onClick={async () => {\n                  updateModal(ModalType.CONFIRM)\n                  const receipt = await exit()\n                  if (receipt?.status) {\n                    updateModal(ModalType.SUCCESS, t(\"withdrawAndHarvest\"))\n                  } else {\n                    updateModal(ModalType.FAILED, t(\"withdrawAndHarvest\"))\n                  }\n                }}\n              >\n                {t(\"withdrawAndHarvest\")}\n              </Button>\n            </div>\n          ) : null}\n        </ConfirmTransaction>\n      </Modal>\n      <FarmTabs {...props} handleModal={updateModal} />\n      <StakeDetails\n        balanceView={{\n          title: t(\"balance\"),\n          tokenName: lpTokenName,\n          icon: lpTokenIcon,\n          amount: formattedBalance,\n        }}\n        stakedView={{\n          title: t(\"deposited\"),\n          tokenName: lpTokenName,\n          icon: lpTokenIcon,\n          amount: formattedDeposited,\n        }}\n        stats={[\n          {\n            statLabel: \"TVL\",\n            statValue: formattedTvl,\n          },\n          {\n            statLabel: \"APR\",\n            statValue: apr,\n          },\n        ]}\n      />\n      <HarvestRewards rewardBalance={rewardsEarned} handleModal={updateModal} />\n      <FarmFooter />\n    </div>\n  )\n}\n\nexport default FarmPage\n","import { BLOCK_TIME, FarmName } from \"../constants\"\nimport { useFarmContract, useRoseContract } from \"./useContract\"\nimport { Zero } from \"@ethersproject/constants\"\nimport { formatBNToString } from \"../utils\"\nimport { useActiveWeb3React } from \".\"\nimport usePoller from \"./usePoller\"\nimport { useState } from \"react\"\n\nexport default function useEarnedRewards(farmName: FarmName): string {\n  const { account } = useActiveWeb3React()\n\n  const [rewardsEarned, setRewardsEarned] = useState<string>(\"0.0\")\n  const roseContract = useRoseContract()\n  const farmContract = useFarmContract(farmName)\n\n  usePoller(() => {\n    async function pollRewards(): Promise<void> {\n      if (!account) throw new Error(\"Wallet must be connected\")\n      if (!farmContract || !roseContract)\n        throw new Error(\"Contracts are not loaded\")\n\n      const earned = await farmContract.earned(account, roseContract.address)\n\n      setRewardsEarned(formatBNToString(earned || Zero, 18, 5))\n    }\n    if (account) {\n      void pollRewards()\n    }\n  }, BLOCK_TIME)\n\n  return rewardsEarned\n}\n","import { FarmName, TRANSACTION_TYPES } from \"../constants\"\nimport { ContractReceipt } from \"@ethersproject/contracts\"\nimport { updateLastTransactionTimes } from \"../state/application\"\nimport { useActiveWeb3React } from \".\"\nimport { useDispatch } from \"react-redux\"\nimport { useFarmContract } from \"./useContract\"\n\nexport default function useFarmExit(\n  farmName: FarmName,\n): () => Promise<ContractReceipt | void> {\n  const farmContract = useFarmContract(farmName)\n  const { account } = useActiveWeb3React()\n  const dispatch = useDispatch()\n  return async function exitFarm(): Promise<ContractReceipt | void> {\n    try {\n      if (!account) throw new Error(\"Wallet must be connected\")\n      if (!farmContract) throw new Error(\"Rose Farm contract is not loaded\")\n\n      const tx = await farmContract.exit()\n      const receipt = await tx.wait()\n      dispatch(\n        updateLastTransactionTimes({\n          [TRANSACTION_TYPES.WITHDRAW]: Date.now(),\n        }),\n      )\n      return receipt\n    } catch (e) {\n      console.error(e)\n    }\n  }\n}\n","import { ContractReceipt } from \"@ethersproject/contracts\"\nimport { FarmName } from \"../constants\"\nimport { useActiveWeb3React } from \".\"\nimport { useFarmContract } from \"./useContract\"\n\nexport default function useClaimReward(\n  farmName: FarmName,\n): () => Promise<ContractReceipt | void> {\n  const farmContract = useFarmContract(farmName)\n  const { account } = useActiveWeb3React()\n  return async function claimReward(): Promise<ContractReceipt | void> {\n    try {\n      if (!account) throw new Error(\"Wallet must be connected\")\n      if (!farmContract) throw new Error(\"Rose Farm contract is not loaded\")\n\n      const tx = await farmContract.getReward()\n      return await tx.wait()\n    } catch (e) {\n      console.error(e)\n    }\n  }\n}\n","import { FarmName, TRANSACTION_TYPES } from \"../constants\"\nimport { useEffect, useState } from \"react\"\nimport { AppState } from \"../state\"\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport { Zero } from \"@ethersproject/constants\"\nimport { useActiveWeb3React } from \".\"\nimport { useFarmContract } from \"./useContract\"\nimport { useSelector } from \"react-redux\"\n\nexport default function useCalculateFarmDeposited(\n  balance: BigNumber | undefined,\n  farmName: FarmName,\n): BigNumber {\n  const { account } = useActiveWeb3React()\n\n  const [depositedBalance, setDepositedBalance] = useState<BigNumber>(Zero)\n  const farmContract = useFarmContract(farmName)\n  const { lastTransactionTimes } = useSelector(\n    (state: AppState) => state.application,\n  )\n  const lastDepositTime = lastTransactionTimes[TRANSACTION_TYPES.DEPOSIT]\n  const lastWithdrawTime = lastTransactionTimes[TRANSACTION_TYPES.WITHDRAW]\n\n  useEffect(() => {\n    async function calculateDeposit(): Promise<void> {\n      if (!account || !farmContract) {\n        setDepositedBalance(Zero)\n        return\n      }\n\n      const deposited = await farmContract.balanceOf(account)\n\n      setDepositedBalance(deposited || Zero)\n    }\n    void calculateDeposit()\n  }, [account, farmContract, lastDepositTime, lastWithdrawTime, balance])\n\n  return depositedBalance\n}\n","import { AddressZero, Zero } from \"@ethersproject/constants\"\nimport { FARMS_MAP, FarmName, TRANSACTION_TYPES } from \"../constants\"\nimport { useEffect, useState } from \"react\"\nimport { AppState } from \"../state\"\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport LPTOKEN_UNGUARDED_ABI from \"../constants/abis/lpTokenUnguarded.json\"\nimport { LpTokenUnguarded } from \"../../types/ethers-contracts/LpTokenUnguarded\"\nimport { getContract } from \"../utils\"\nimport { useActiveWeb3React } from \".\"\nimport { useSelector } from \"react-redux\"\n\nexport interface FarmDataType {\n  lpTokenBalance: BigNumber\n}\n\nexport type FarmDataHookReturnType = FarmDataType\n\nconst emptyFarmData = {\n  lpTokenBalance: Zero,\n} as FarmDataType\n\nexport default function useFarmData(\n  farmName: FarmName,\n): FarmDataHookReturnType {\n  const { account, library, chainId } = useActiveWeb3React()\n  const { lastTransactionTimes } = useSelector(\n    (state: AppState) => state.application,\n  )\n  const lastDepositTime = lastTransactionTimes[TRANSACTION_TYPES.DEPOSIT]\n  const lastWithdrawTime = lastTransactionTimes[TRANSACTION_TYPES.WITHDRAW]\n\n  const [farmData, setFarmData] = useState<FarmDataHookReturnType>(\n    emptyFarmData,\n  )\n\n  useEffect(() => {\n    async function getFarmData(): Promise<void> {\n      if (library == null || chainId == null) return\n\n      const FARM = FARMS_MAP[farmName]\n\n      const lpTokenContract = getContract(\n        FARM.lpToken.addresses[chainId],\n        LPTOKEN_UNGUARDED_ABI,\n        library,\n        account ?? undefined,\n      ) as LpTokenUnguarded\n      let userLpTokenBalance: BigNumber\n      try {\n        userLpTokenBalance = await lpTokenContract.balanceOf(\n          account || AddressZero,\n        )\n      } catch (e) {\n        console.log(e)\n      }\n\n      setFarmData((prevState) => ({\n        ...prevState,\n        lpTokenBalance: userLpTokenBalance,\n      }))\n    }\n    void getFarmData()\n  }, [lastDepositTime, lastWithdrawTime, farmName, account, library, chainId])\n\n  return farmData\n}\n","import { FARMS_MAP, FarmName } from \"../constants\"\nimport React, { ReactElement } from \"react\"\nimport FarmPage from \"../components/FarmPage\"\nimport TopMenu from \"../components/TopMenu\"\nimport { Zero } from \"@ethersproject/constants\"\nimport styles from \"./Farm.module.scss\"\nimport useCalculateFarmDeposited from \"../hooks/useCalculateFarmDeposited\"\nimport useFarmData from \"../hooks/useFarmData\"\n\ninterface Props {\n  farmName: FarmName\n}\n\nconst Farm = ({ farmName }: Props): ReactElement => {\n  const farmData = useFarmData(farmName)\n  const { lpToken, poolName } = FARMS_MAP[farmName]\n  const deposited = useCalculateFarmDeposited(\n    farmData?.lpTokenBalance,\n    farmName,\n  )\n  return (\n    <div className={styles.farm}>\n      <TopMenu activeTab=\"farm\" />\n      <div className={styles.container}>\n        <FarmPage\n          farmName={farmName}\n          poolName={poolName}\n          lpTokenName={lpToken.name}\n          lpTokenIcon={lpToken.icon}\n          balance={farmData?.lpTokenBalance || Zero}\n          deposited={deposited}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default Farm\n","import {\n  Button,\n  Stat,\n  StatGroup,\n  StatLabel,\n  StatNumber,\n} from \"@chakra-ui/react\"\nimport React, { ReactElement } from \"react\"\nimport { Trans, useTranslation } from \"react-i18next\"\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport { FarmName } from \"../constants\"\nimport { FarmStats } from \"../utils/fetchFarmStats\"\nimport { Link } from \"react-router-dom\"\nimport { Zero } from \"@ethersproject/constants\"\nimport classNames from \"classnames\"\nimport { formatBNToShortString } from \"../utils\"\nimport styles from \"./FarmsOverview.module.scss\"\nimport useCalculateFarmDeposited from \"../hooks/useCalculateFarmDeposited\"\nimport useFarmData from \"../hooks/useFarmData\"\n\ninterface Props {\n  farmRoute: string\n  farmName: string\n  poolName: string\n  lpTokenName: string\n  isRose: boolean\n  farmStats?: FarmStats\n  poolUrl?: string\n}\n\nfunction FarmsOverview(props: Props): ReactElement {\n  const {\n    farmRoute,\n    farmName,\n    poolName,\n    poolUrl,\n    lpTokenName,\n    isRose,\n    farmStats,\n  } = props\n  const { t } = useTranslation()\n  const formattedTvl = farmStats?.tvl\n    ? `$${formatBNToShortString(BigNumber.from(farmStats.tvl), 18)}`\n    : \"-\"\n  const formattedApr = farmStats?.apr || \"-\"\n\n  const farmData = useFarmData(farmName as FarmName)\n  const deposited = useCalculateFarmDeposited(\n    farmData?.lpTokenBalance,\n    farmName as FarmName,\n  )\n\n  return (\n    <div className={styles.farmsOverview}>\n      <div className={styles.container}>\n        <div className={styles.row}>\n          <div className={styles.titleBox}>\n            <h4 className={styles.title}>{farmName}</h4>\n            <a href={poolUrl} target={isRose ? \"\" : \"_blank\"} rel=\"noreferrer\">\n              <FarmTag isRose={isRose}>\n                {poolName}\n                {isRose ? null : <sup>↗</sup>}\n              </FarmTag>\n            </a>\n          </div>\n          <StatGroup\n            display=\"flex\"\n            flexWrap=\"nowrap\"\n            justifyContent=\"space-between\"\n            minWidth=\"115px\"\n          >\n            <Stat mr={2}>\n              <StatLabel>TVL</StatLabel>\n              <StatNumber fontSize=\"13px\">{formattedTvl}</StatNumber>\n            </Stat>\n            <Stat>\n              <StatLabel>APR</StatLabel>\n              <StatNumber fontSize=\"13px\">{formattedApr}</StatNumber>\n            </Stat>\n          </StatGroup>\n        </div>\n        <div className={styles.balanceInfo}>\n          <div style={{ display: \"flex\", gap: \"5px\" }}>\n            <div className={styles.tokenBalanceText}>LP Token Balance:</div>\n            <div className={styles.tokenBalanceValue}>{`${formatBNToShortString(\n              farmData?.lpTokenBalance || Zero,\n              18,\n            )}`}</div>\n          </div>\n          <div style={{ display: \"flex\", gap: \"5px\" }}>\n            <div className={styles.tokenBalanceText}>Deposited:</div>\n            <div className={styles.tokenBalanceValue}>{`${formatBNToShortString(\n              deposited,\n              18,\n            )}`}</div>\n          </div>\n        </div>\n        <div className={styles.farmDescription}>\n          <p>\n            {isRose ? (\n              <Trans t={t} i18nKey=\"farmDescription\">\n                {{ tokenName: lpTokenName }}\n                <Link to={`pools/${farmRoute}/deposit`}>\n                  {{ poolName: poolName }}\n                </Link>\n              </Trans>\n            ) : (\n              <Trans t={t} i18nKey=\"farmDescription\">\n                {{ tokenName: lpTokenName }}\n                <a\n                  className={styles.external}\n                  href={poolUrl}\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                >\n                  {{ poolName: poolName }}\n                </a>\n              </Trans>\n            )}\n          </p>\n          <div className={styles.farmButton}>\n            <Link to={`farms/${farmRoute}`}>\n              <Button variant=\"primary\" disabled={false} width=\"100px\">\n                {t(\"Farm\")}\n              </Button>\n            </Link>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction FarmTag(props: { children?: React.ReactNode; isRose: boolean }) {\n  const { isRose, ...tagProps } = props\n  return (\n    <span\n      className={classNames(styles.tag, { [styles.rose]: isRose })}\n      {...tagProps}\n    />\n  )\n}\n\nexport default FarmsOverview\n","import React, { ReactElement } from \"react\"\nimport { AppState } from \"../state\"\nimport { FARMS_MAP } from \"../constants\"\nimport FarmsOverview from \"../components/FarmsOverview\"\nimport TopMenu from \"../components/TopMenu\"\nimport styles from \"./Farms.module.scss\"\nimport { useSelector } from \"react-redux\"\n\nfunction Farms(): ReactElement {\n  const { farmStats } = useSelector((state: AppState) => state.application)\n  return (\n    <div className={styles.farms}>\n      <TopMenu activeTab=\"farms\" />\n      <div className={styles.container}>\n        {Object.values(FARMS_MAP)\n          .sort((a) => {\n            return a.isRose ? 1 : -1\n          })\n          .map((farm) => (\n            <FarmsOverview\n              key={farm.name}\n              farmStats={farmStats?.[farm.name]}\n              farmName={farm.name}\n              farmRoute={farm.route}\n              poolName={farm.poolName}\n              poolUrl={farm.poolUrl}\n              lpTokenName={farm.lpToken.name}\n              isRose={farm.isRose}\n            />\n          ))}\n      </div>\n    </div>\n  )\n}\n\nexport default Farms\n","import {\n  BLOCK_TIME,\n  ChainId,\n  IS_VIRTUAL_SWAP_ACTIVE,\n  SWAP_TYPES,\n  Token,\n} from \"../constants\"\nimport { useCallback, useEffect, useState } from \"react\"\n\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport { Bridge } from \"../../types/ethers-contracts/Bridge\"\nimport { Event } from \"ethers\"\nimport { Zero } from \"@ethersproject/constants\"\nimport { getTokenByAddress } from \"../utils\"\nimport { omit } from \"lodash\"\nimport { useActiveWeb3React } from \"./\"\nimport { useBridgeContract } from \"./useContract\"\n\nexport interface PendingSwap {\n  swapType: SWAP_TYPES\n  settleableAtTimestamp: number\n  secondsRemaining: number\n  synthTokenFrom: Token\n  synthBalance: BigNumber\n  tokenTo: Token\n  itemId: string\n  transactionHash: string\n  timestamp: number\n  events: Array<SettlementEvent | WithdrawEvent>\n}\n\ninterface SwapEvent {\n  timestamp: number\n  itemId: string\n  transactionHash: string // used for deduping\n  type: \"settlement\" | \"withdraw\"\n}\nexport interface SettlementEvent extends SwapEvent {\n  fromToken: Token\n  fromAmount: BigNumber\n  toToken: Token\n  toAmount: BigNumber\n  type: \"settlement\"\n}\nexport interface WithdrawEvent extends SwapEvent {\n  synthToken: Token\n  amount: BigNumber\n  type: \"withdraw\"\n}\n\ntype BridgeEventSettle = {\n  requester: string\n  itemId: BigNumber\n  settleFrom: string\n  settleFromAmount: BigNumber\n  settleTo: string\n  settleToAmount: BigNumber\n  isFinal: boolean\n}\n\ntype BridgeEventWithdraw = {\n  requester: string\n  itemId: BigNumber\n  synth: string\n  synthAmount: BigNumber\n  isFinal: boolean\n}\n\ntype BridgeEventGenericSwap = {\n  requester: string\n  itemId: BigNumber\n  // other fields exist but we don't use them\n}\n\ntype State = {\n  pendingSwaps: Omit<PendingSwap, \"events\">[]\n  settlements: { [itemId: string]: SettlementEvent[] }\n  withdraws: { [itemId: string]: WithdrawEvent[] }\n}\n\nconst VIRTUAL_SWAP_TOPICS = [\n  \"TokenToSynth\",\n  \"SynthToToken\",\n  \"TokenToToken\",\n] as const\nconst SETTLE = \"Settle\"\nconst WITHDRAW = \"Withdraw\"\n\nconst usePendingSwapData = (): PendingSwap[] => {\n  const { account, chainId, library } = useActiveWeb3React()\n  const bridgeContract = useBridgeContract()\n  const [state, setState] = useState<State>({\n    pendingSwaps: [],\n    settlements: {},\n    withdraws: {},\n  })\n  const queryStartBlock =\n    chainId === ChainId.HARDHAT\n      ? 0\n      : -1 * Math.round((365 * 24 * 60 * 60 * 1000) / BLOCK_TIME) // approx number of blocks in 1 year\n\n  // update the secondsRemaining every 15s\n  useEffect(() => {\n    const timer = setInterval(() => {\n      void library?.getBlock(\"latest\").then(({ timestamp }) => {\n        // block timestamp in secs\n        setState((prevState) => {\n          const shouldUpdateState = prevState.pendingSwaps.some(\n            ({ secondsRemaining }) => secondsRemaining > 0,\n          )\n          if (!shouldUpdateState) return prevState\n          return {\n            ...prevState,\n            pendingSwaps: prevState.pendingSwaps.map((swap) => {\n              let secondsRemaining = Math.floor(\n                swap.settleableAtTimestamp / 1000 - timestamp,\n              )\n              secondsRemaining = Math.max(secondsRemaining, 0)\n              return { ...swap, secondsRemaining }\n            }),\n          }\n        })\n      })\n    }, 15 * 1000)\n    return () => {\n      clearInterval(timer)\n    }\n  }, [library])\n  const pendingSwapEventListener = useCallback(\n    (...listenerArgs) => {\n      const event = listenerArgs[listenerArgs.length - 1] as Event\n      const itemIdArg = event.args?.itemId as BigNumber | null\n      if (itemIdArg == null || bridgeContract == null || chainId == null) return\n      const itemId = itemIdArg.toString()\n      void fetchPendingSwapInfo(bridgeContract, event, chainId).then(\n        (fetchedPendingSwap) => {\n          if (fetchedPendingSwap == null) return\n          setState((prevState) => {\n            return {\n              ...prevState,\n              pendingSwaps: [\n                ...prevState.pendingSwaps.filter(\n                  ({ itemId: existingItemId }) => itemId !== existingItemId,\n                ),\n                fetchedPendingSwap,\n              ],\n            }\n          })\n        },\n      )\n    },\n    [bridgeContract, chainId, setState],\n  )\n  const settleEventListener = useCallback(\n    (...listenerArgs) => {\n      const event = listenerArgs[listenerArgs.length - 1] as Event\n      if (chainId == null) return\n      void parseSettlementFromEvent(event, chainId).then((settlement) => {\n        if (settlement == null) return\n        setState((prevState) => {\n          const pendingSwap = prevState.pendingSwaps.find(\n            ({ itemId }) => itemId === settlement.itemId,\n          )\n          const newPendingSwapBalance = pendingSwap\n            ? pendingSwap.synthBalance.sub(settlement.fromAmount)\n            : Zero\n          const prevSettlements = prevState.settlements[settlement.itemId] || []\n          const txnsSet = new Set(\n            prevSettlements.map(({ transactionHash }) => transactionHash),\n          )\n          if (newPendingSwapBalance.lte(Zero)) {\n            // if this action empties the pending swap balance, remove it from state\n            return removeItemFromState(prevState, settlement.itemId)\n          } else if (!txnsSet.has(settlement.transactionHash)) {\n            return {\n              ...prevState,\n              settlements: {\n                ...prevState.settlements,\n                [settlement.itemId]: prevSettlements.concat(settlement),\n              },\n            }\n          } else {\n            return prevState\n          }\n        })\n      })\n    },\n    [chainId, setState],\n  )\n  const withdrawEventListener = useCallback(\n    (...listenerArgs) => {\n      const event = listenerArgs[listenerArgs.length - 1] as Event\n      if (chainId == null) return\n      void parseWithdrawFromEvent(event, chainId).then((withdraw) => {\n        if (withdraw == null) return\n        setState((prevState) => {\n          const pendingSwap = prevState.pendingSwaps.find(\n            ({ itemId }) => itemId === withdraw.itemId,\n          )\n          const newPendingSwapBalance = pendingSwap\n            ? pendingSwap.synthBalance.sub(withdraw.amount)\n            : Zero\n          const prevWithdraws = prevState.withdraws[withdraw.itemId] || []\n          const txnsSet = new Set(\n            prevWithdraws.map(({ transactionHash }) => transactionHash),\n          )\n          if (newPendingSwapBalance.lte(Zero)) {\n            // if this action empties the pending swap balance, remove it from state\n            return removeItemFromState(prevState, withdraw.itemId)\n          } else if (!txnsSet.has(withdraw.transactionHash)) {\n            return {\n              ...prevState,\n              withdraws: {\n                ...prevState.withdraws,\n                [withdraw.itemId]: prevWithdraws.concat(withdraw),\n              },\n            }\n          } else {\n            return prevState\n          }\n        })\n      })\n    },\n    [chainId, setState],\n  )\n  // attach listeners for events\n  useEffect(() => {\n    function attachPendingSwapEventListeners() {\n      if (bridgeContract == null || account == null) return\n      const virtualSwapTopicFilters = VIRTUAL_SWAP_TOPICS.map((topic) =>\n        bridgeContract.filters[topic](account, null, null, null, null, null),\n      )\n      const settleFilter = bridgeContract.filters[SETTLE](\n        account,\n        null,\n        null,\n        null,\n        null,\n        null,\n        null,\n      )\n      const withdrawFilter = bridgeContract.filters[WITHDRAW](\n        account,\n        null,\n        null,\n        null,\n        null,\n      )\n\n      virtualSwapTopicFilters.forEach((filter) => {\n        void bridgeContract.on(filter, pendingSwapEventListener)\n      })\n      bridgeContract.on(settleFilter, settleEventListener)\n      bridgeContract.on(withdrawFilter, withdrawEventListener)\n      return () => {\n        virtualSwapTopicFilters.forEach((filter) => {\n          void bridgeContract.off(filter, pendingSwapEventListener)\n        })\n        bridgeContract.off(settleFilter, settleEventListener)\n        bridgeContract.off(withdrawFilter, withdrawEventListener)\n      }\n    }\n    void attachPendingSwapEventListeners()\n  }, [\n    bridgeContract,\n    account,\n    settleEventListener,\n    withdrawEventListener,\n    pendingSwapEventListener,\n  ])\n  // initial fetch of events\n  useEffect(() => {\n    async function fetchExistingEvents() {\n      if (!IS_VIRTUAL_SWAP_ACTIVE || !account || !bridgeContract || !chainId)\n        return\n\n      await Promise.all([\n        fetchAndPopulatePendingSwaps(\n          bridgeContract,\n          setState,\n          account,\n          chainId,\n          queryStartBlock,\n        ),\n        fetchAndPopulateWithdraws(\n          bridgeContract,\n          setState,\n          account,\n          chainId,\n          queryStartBlock,\n        ),\n        fetchAndPopulateSettlements(\n          bridgeContract,\n          setState,\n          account,\n          chainId,\n          queryStartBlock,\n        ),\n      ])\n    }\n    void fetchExistingEvents()\n  }, [bridgeContract, setState, account, chainId, queryStartBlock])\n\n  return state.pendingSwaps.map((swap) => {\n    // merge swaps + settlements state\n    return {\n      ...swap,\n      events: [\n        ...(state.settlements[swap.itemId] || []),\n        ...(state.withdraws[swap.itemId] || []),\n      ].sort((a, b) => a.timestamp - b.timestamp),\n    }\n  })\n}\n\nasync function fetchAndPopulatePendingSwaps(\n  bridgeContract: Bridge,\n  setState: (callback: (state: State) => State) => void,\n  account: string,\n  chainId: ChainId,\n  startBlock: number,\n): Promise<void> {\n  // Step 1: create event filters\n  const eventFilters = VIRTUAL_SWAP_TOPICS.map((topic) => {\n    return bridgeContract.filters[topic](account, null, null, null, null, null)\n  })\n  // Step 2: run queries and get matching events\n  let events\n  events = await Promise.all(\n    eventFilters.map((filter) =>\n      bridgeContract.queryFilter(filter, startBlock, \"latest\"),\n    ),\n  )\n  events = events.flat()\n\n  // Step 3: fetch aync data via bridge contract\n  let fetchedPendingSwaps = await Promise.all(\n    events.map((event) => fetchPendingSwapInfo(bridgeContract, event, chainId)),\n  )\n  fetchedPendingSwaps = fetchedPendingSwaps.filter(Boolean)\n  if (fetchedPendingSwaps.length === 0) return\n\n  // Step 4: write to state\n  setState((prevState) => {\n    return {\n      ...prevState,\n      pendingSwaps: fetchedPendingSwaps as PendingSwap[],\n    }\n  })\n}\nasync function fetchAndPopulateWithdraws(\n  bridgeContract: Bridge,\n  setState: (callback: (state: State) => State) => void,\n  account: string,\n  chainId: ChainId,\n  startBlock: number,\n): Promise<void> {\n  // Step 1: create event filter\n  const eventFilter = bridgeContract.filters[WITHDRAW](\n    account,\n    null,\n    null,\n    null,\n    null,\n  )\n\n  // Step 2: run queries and get matching events\n  const events = await bridgeContract.queryFilter(\n    eventFilter,\n    startBlock,\n    \"latest\",\n  )\n  // Step 3: get each event's block\n  const withdraws = await Promise.all(\n    events.map((event) => parseWithdrawFromEvent(event, chainId)),\n  )\n\n  // Step 4: write to state\n  if (withdraws.length === 0) return\n  setState((prevState) => {\n    const newState = { ...prevState }\n    withdraws.forEach((withdraw) => {\n      if (withdraw == null) return\n      const existingWithdraws = newState.withdraws[withdraw.itemId]\n      newState.withdraws[withdraw.itemId] = (existingWithdraws || []).concat(\n        withdraw,\n      )\n    })\n    return newState\n  })\n}\nasync function fetchAndPopulateSettlements(\n  bridgeContract: Bridge,\n  setState: (callback: (state: State) => State) => void,\n  account: string,\n  chainId: ChainId,\n  startBlock: number,\n): Promise<void> {\n  // Step 1: create event filter\n  const eventFilter = bridgeContract.filters[SETTLE](\n    account,\n    null,\n    null,\n    null,\n    null,\n    null,\n    null,\n  )\n\n  // Step 2: run queries and get matching events\n  const events = await bridgeContract.queryFilter(\n    eventFilter,\n    startBlock,\n    \"latest\",\n  )\n  // Step 3: get each event's block\n  const settlements = await Promise.all(\n    events.map((event) => parseSettlementFromEvent(event, chainId)),\n  )\n\n  // Step 4: write to state\n  if (settlements.length === 0) return\n  setState((prevState) => {\n    const newState = { ...prevState }\n    settlements.forEach((settlement) => {\n      if (settlement == null) return\n      const existingSettlements = newState.settlements[settlement.itemId]\n      newState.settlements[settlement.itemId] = (\n        existingSettlements || []\n      ).concat(settlement)\n    })\n    return newState\n  })\n}\n\nasync function parseSettlementFromEvent(\n  event: Event,\n  chainId: ChainId,\n): Promise<SettlementEvent | null> {\n  // Settlements are final\n  const settlement = (event.args as unknown) as BridgeEventSettle // TODO would love to set this from the typechain type\n  if (settlement == null) return null\n  const fromToken = getTokenByAddress(settlement.settleFrom, chainId)\n  const toToken = getTokenByAddress(settlement.settleTo, chainId)\n  if (fromToken == null || toToken == null) return null\n  return event\n    .getBlock()\n    .then(({ timestamp }) => {\n      return {\n        fromAmount: settlement.settleFromAmount,\n        fromToken,\n        itemId: settlement.itemId.toString(),\n        timestamp,\n        toAmount: settlement.settleToAmount,\n        toToken,\n        transactionHash: event.transactionHash,\n        type: \"settlement\" as const,\n      }\n    })\n    .catch(() => null)\n}\n\nasync function parseWithdrawFromEvent(\n  event: Event,\n  chainId: ChainId,\n): Promise<WithdrawEvent | null> {\n  const withdraw = (event.args as unknown) as BridgeEventWithdraw\n  if (withdraw == null) return null\n  const synthToken = getTokenByAddress(withdraw.synth, chainId)\n  if (synthToken == null) return null\n  return event\n    .getBlock()\n    .then(({ timestamp }) => {\n      return {\n        amount: withdraw.synthAmount,\n        itemId: withdraw.itemId.toString(),\n        synthToken,\n        timestamp, // in seconds\n        transactionHash: event.transactionHash,\n        type: \"withdraw\",\n      } as WithdrawEvent\n    })\n    .catch(() => null)\n}\n\nenum BridgePendingSwapTypes {\n  Null,\n  TokenToSynth,\n  SynthToToken,\n  TokenToToken,\n}\nasync function fetchPendingSwapInfo(\n  bridgeContract: Bridge,\n  event: Event,\n  chainId: ChainId,\n) {\n  let result = null\n  try {\n    // this will throw if the itemId has already fully resolved\n    // afik we don't have a better way of fetching current pendingSwaps\n    // DEVELOPER: for this reason we don't use multicall\n    const pendingSwap = (event.args as unknown) as BridgeEventGenericSwap\n    if (pendingSwap == null) return null\n    const itemId = pendingSwap.itemId.toString()\n    const [pendingSwapInfo, eventBlock] = await Promise.all([\n      bridgeContract.getPendingSwapInfo(itemId),\n      event.getBlock(),\n    ])\n    const pendingSwapType = pendingSwapInfo.swapType\n    let swapType\n    if (pendingSwapType === BridgePendingSwapTypes.TokenToSynth) {\n      swapType = SWAP_TYPES.TOKEN_TO_SYNTH\n    } else if (pendingSwapType === BridgePendingSwapTypes.SynthToToken) {\n      swapType = SWAP_TYPES.SYNTH_TO_TOKEN\n    } else if (pendingSwapType === BridgePendingSwapTypes.TokenToToken) {\n      swapType = SWAP_TYPES.TOKEN_TO_TOKEN\n    } else {\n      swapType = SWAP_TYPES.INVALID\n    }\n    const synthTokenFrom = getTokenByAddress(\n      pendingSwapInfo.synth,\n      chainId,\n    ) as Token\n    const tokenTo = getTokenByAddress(pendingSwapInfo.tokenTo, chainId) as Token\n    const settleableAtTimestamp =\n      (eventBlock.timestamp + parseInt(pendingSwapInfo.secsLeft.toString())) * // add event block timestamp + secsLeft\n      1000 // convert to ms\n    let secondsRemaining = Math.ceil(\n      (settleableAtTimestamp - Date.now()) / 1000,\n    )\n    secondsRemaining = Math.max(secondsRemaining, 0)\n    result = {\n      swapType,\n      settleableAtTimestamp,\n      secondsRemaining,\n      synthBalance: pendingSwapInfo.synthBalance,\n      itemId,\n      synthTokenFrom: synthTokenFrom,\n      tokenTo: tokenTo,\n      transactionHash: event.transactionHash,\n      timestamp: eventBlock.timestamp,\n    }\n  } catch {\n    // do nothing because this is probably okay\n  }\n  return result\n}\n\nfunction removeItemFromState(state: State, itemId: string): State {\n  return {\n    settlements: omit(state.settlements, itemId),\n    withdraws: omit(state.withdraws, itemId),\n    pendingSwaps: state.pendingSwaps.filter(({ itemId }) => itemId !== itemId),\n  }\n}\n\nexport default usePendingSwapData\n","import React, { ReactElement } from \"react\"\nimport usePendingSwapData, { PendingSwap } from \"../hooks/usePendingSwapData\"\n\nexport const PendingSwapsContext = React.createContext<PendingSwap[]>([])\n\nexport default function PendingSwapsProvider({\n  children,\n}: React.PropsWithChildren<unknown>): ReactElement {\n  const pendingSwaps = usePendingSwapData()\n\n  return (\n    <PendingSwapsContext.Provider value={pendingSwaps}>\n      {children}\n    </PendingSwapsContext.Provider>\n  )\n}\n","import \"./PoolOverview.scss\"\n\nimport { POOLS_MAP, PoolTypes, TOKENS_MAP, isMetaPool } from \"../constants\"\nimport { Partners, PoolDataType, UserShareType } from \"../hooks/usePoolData\"\nimport React, { ReactElement } from \"react\"\nimport {\n  formatBNToPercentString,\n  formatBNToShortString,\n  formatBNToString,\n} from \"../utils\"\nimport Button from \"./Button\"\nimport { Link } from \"react-router-dom\"\nimport ToolTip from \"./ToolTip\"\nimport { Zero } from \"@ethersproject/constants\"\nimport classNames from \"classnames\"\nimport { useTranslation } from \"react-i18next\"\n\ninterface Props {\n  poolRoute: string\n  poolData: PoolDataType\n  userShareData: UserShareType | null\n  onClickMigrate?: (e: React.MouseEvent<HTMLButtonElement>) => void\n}\n\nexport default function PoolOverview({\n  poolData,\n  poolRoute,\n  userShareData,\n  onClickMigrate,\n}: Props): ReactElement | null {\n  const { t } = useTranslation()\n  const { type: poolType, isOutdated } = POOLS_MAP[poolData.name]\n  const formattedDecimals = poolType === PoolTypes.USD ? 2 : 4\n  const shouldMigrate = !!onClickMigrate\n  const formattedData = {\n    name: poolData.name,\n    reserve: poolData.reserve\n      ? formatBNToShortString(poolData.reserve, 18)\n      : \"-\",\n    aprs: Object.keys(poolData.aprs).reduce((acc, key) => {\n      const apr = poolData.aprs[key as Partners]?.apr\n      return apr\n        ? {\n            ...acc,\n            [key]: formatBNToPercentString(apr, 18),\n          }\n        : acc\n    }, {} as Partial<Record<Partners, string>>),\n    apy: poolData.apy ? `${formatBNToPercentString(poolData.apy, 18, 2)}` : \"-\",\n    volume: poolData.volume\n      ? `$${formatBNToShortString(poolData.volume, 18)}`\n      : \"-\",\n    userBalanceUSD: formatBNToShortString(\n      userShareData?.usdBalance || Zero,\n      18,\n    ),\n    tokens: poolData.tokens.map((coin) => {\n      const token = TOKENS_MAP[coin.symbol]\n      return {\n        symbol: token.symbol,\n        name: token.name,\n        icon: token.icon,\n        value: formatBNToString(coin.value, token.decimals, formattedDecimals),\n      }\n    }),\n  }\n  const hasShare = !!userShareData?.usdBalance.gt(\"0\")\n  const isMetapool = isMetaPool(formattedData.name)\n\n  return (\n    <div className=\"poolWrapper\">\n      <div\n        className={classNames(\"poolOverview\", {\n          outdated: isOutdated || shouldMigrate,\n        })}\n      >\n        <div className=\"left\">\n          <div className=\"titleAndTag\">\n            {isMetapool ? (\n              <ToolTip content={t(\"metapool\")}>\n                <h4 className=\"title underline\">{formattedData.name}</h4>\n              </ToolTip>\n            ) : (\n              <h4 className=\"title\">{formattedData.name}</h4>\n            )}\n            {(shouldMigrate || isOutdated) && (\n              <Tag kind=\"warning\">OUTDATED</Tag>\n            )}\n            {poolData.isPaused && <Tag kind=\"error\">PAUSED</Tag>}\n          </div>\n          {hasShare && (\n            <div className=\"balance\">\n              <span>{t(\"balance\")}: </span>\n              <span>{`$${formattedData.userBalanceUSD}`}</span>\n            </div>\n          )}\n          <div className=\"tokens\">\n            {formattedData.tokens.map(({ symbol, icon }) => (\n              <div className=\"token\" key={symbol}>\n                <img alt=\"icon\" src={icon} />\n                <span>{symbol}</span>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        <div className=\"right\">\n          <div className=\"poolInfo\">\n            {/* {formattedData.apy && (\n            <div className=\"margin\">\n              <span className=\"label\">{`${t(\"apy\")}`}</span>\n              <span>{formattedData.apy}</span>\n            </div>\n          )} */}\n            {Object.keys(poolData.aprs).map((key) => {\n              const symbol = poolData.aprs[key as Partners]?.symbol as string\n              return poolData.aprs[key as Partners]?.apr.gt(Zero) ? (\n                <div className=\"margin Apr\" key={symbol}>\n                  {symbol.includes(\"/\") ? (\n                    <span className=\"label underline\">\n                      <ToolTip content={symbol.replaceAll(\"/\", \"\\n\")}>\n                        Reward APR\n                      </ToolTip>\n                    </span>\n                  ) : (\n                    <span className=\"label\">{symbol} APR</span>\n                  )}\n                  <span className=\"plus\">\n                    {formattedData.aprs[key as Partners] as string}\n                  </span>\n                </div>\n              ) : null\n            })}\n            <div className=\"margin\">\n              <span className=\"label\">TVL</span>\n              <span>{`$${formattedData.reserve}`}</span>\n            </div>\n            {/* {formattedData.volume && (\n            <div>\n              <span className=\"label\">{`${t(\"24HrVolume\")}`}</span>\n              <span>{formattedData.volume}</span>\n            </div>\n          )} */}\n          </div>\n          <div className=\"buttons\">\n            <Link to={`${poolRoute}/withdraw`}>\n              <Button kind=\"secondary\">{t(\"removeLiquidity\")}</Button>\n            </Link>\n            {shouldMigrate ? (\n              <Button\n                kind=\"temporary\"\n                onClick={onClickMigrate}\n                disabled={!hasShare}\n              >\n                {t(\"migrate\")}\n              </Button>\n            ) : (\n              <Link to={`${poolRoute}/deposit`}>\n                <Button\n                  kind=\"primary\"\n                  disabled={poolData?.isPaused || isOutdated}\n                >\n                  {t(\"addLiquidity\")}\n                </Button>\n              </Link>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction Tag(props: {\n  children?: React.ReactNode\n  kind?: \"warning\" | \"error\"\n}) {\n  const { kind = \"warning\", ...tagProps } = props\n  return <span className={classNames(\"tag\", kind)} {...tagProps} />\n}\n","import {\n  FRAX_METAPOOL_NAME,\n  FRAX_STABLES_LP_POOL_NAME,\n  POOLS_MAP,\n  PoolName,\n  PoolTypes,\n  STABLECOIN_POOL_V2_NAME,\n  UST_METAPOOL_NAME,\n  // STAKED_ROSE_LP_POOL_NAME,\n} from \"../constants\"\nimport React, { ReactElement, useState } from \"react\"\n\nimport PoolOverview from \"../components/PoolOverview\"\nimport TopMenu from \"../components/TopMenu\"\nimport { Zero } from \"@ethersproject/constants\"\nimport styles from \"./Pools.module.scss\"\nimport usePoolData from \"../hooks/usePoolData\"\n\nfunction Pools(): ReactElement | null {\n  const [usdPoolV2Data, usdV2UserShareData] = usePoolData(\n    STABLECOIN_POOL_V2_NAME,\n  )\n  const [fraxStablesPoolData, fraxStablesUserShareData] = usePoolData(\n    FRAX_STABLES_LP_POOL_NAME,\n  )\n  const [fraxMetaPoolData, fraxMetaPoolUserShareData] = usePoolData(\n    FRAX_METAPOOL_NAME,\n  )\n  const [ustMetaPoolData, ustMetaPoolUserShareData] = usePoolData(\n    UST_METAPOOL_NAME,\n  )\n  // const [stRosePoolData, stRoseUserShareData] = usePoolData(\n  //   STAKED_ROSE_LP_POOL_NAME,\n  // )\n  const [filter] = useState<PoolTypes | \"all\" | \"outdated\">(\"all\")\n\n  function getPropsForPool(poolName: PoolName) {\n    switch (poolName) {\n      case FRAX_STABLES_LP_POOL_NAME:\n        return {\n          name: poolName,\n          poolData: fraxStablesPoolData,\n          userShareData: fraxStablesUserShareData,\n          poolRoute: `pools/${POOLS_MAP[poolName].route}`,\n        }\n      // case STAKED_ROSE_LP_POOL_NAME:\n      //   return {\n      //     name: poolName,\n      //     poolData: stRosePoolData,\n      //     userShareData: stRoseUserShareData,\n      //     poolRoute: `pools/${POOLS_MAP[poolName].route}`,\n      //   }\n      case FRAX_METAPOOL_NAME:\n        return {\n          name: poolName,\n          poolData: fraxMetaPoolData,\n          userShareData: fraxMetaPoolUserShareData,\n          poolRoute: `pools/${POOLS_MAP[poolName].route}`,\n        }\n      case UST_METAPOOL_NAME:\n        return {\n          name: poolName,\n          poolData: ustMetaPoolData,\n          userShareData: ustMetaPoolUserShareData,\n          poolRoute: `pools/${POOLS_MAP[poolName].route}`,\n        }\n      default:\n        return {\n          name: poolName,\n          poolData: usdPoolV2Data,\n          userShareData: usdV2UserShareData,\n          poolRoute: `pools/${POOLS_MAP[poolName].route}`,\n        }\n    }\n  }\n  return (\n    <div className={styles.poolsPage}>\n      <TopMenu activeTab=\"pools\" />\n      <div className={styles.content}>\n        {Object.values(POOLS_MAP)\n          // temporarily hide Frax pool while keeping its page enabled\n          .filter(({ name }) => name !== FRAX_STABLES_LP_POOL_NAME)\n          .filter(\n            ({ type, migration, isOutdated }) =>\n              filter === \"all\" ||\n              type === filter ||\n              (filter === \"outdated\" && (migration || isOutdated)),\n          )\n          .map(\n            ({ name, migration, isOutdated }) =>\n              [getPropsForPool(name), migration, isOutdated] as const,\n          )\n          .sort(\n            ([a, aMigration, aIsOutdated], [b, bMigration, bIsOutdated]) => {\n              // 1. active pools\n              // 2. user pools\n              // 3. higher TVL pools\n              if (aMigration || bMigration || aIsOutdated || bIsOutdated) {\n                return aMigration || aIsOutdated ? 1 : -1\n              } else if (\n                (a.userShareData?.usdBalance || Zero).gt(Zero) ||\n                (b.userShareData?.usdBalance || Zero).gt(Zero)\n              ) {\n                return (a.userShareData?.usdBalance || Zero).gt(\n                  b.userShareData?.usdBalance || Zero,\n                )\n                  ? -1\n                  : 1\n              } else {\n                return (a.poolData?.reserve || Zero).gt(\n                  b.poolData?.reserve || Zero,\n                )\n                  ? -1\n                  : 1\n              }\n            },\n          )\n          .map(([poolProps]) => (\n            <PoolOverview key={poolProps.name} {...poolProps} />\n          ))}\n      </div>\n    </div>\n  )\n}\n\nexport default Pools\n","import React, { ReactElement } from \"react\"\nimport { SlideFade, Tooltip } from \"@chakra-ui/react\"\nimport classNames from \"classnames\"\nimport styles from \"./StakeLockedTimer.module.scss\"\n\ninterface Props {\n  timeLeft: number\n}\n\nconst StakeLockedTimer = ({ timeLeft }: Props): ReactElement => {\n  const locked = timeLeft ? true : false\n  return (\n    <SlideFade in={true} className={styles.stakeLockWrapper} offsetY=\"-30px\">\n      <div className={styles.messageWrapper}>\n        <h4 className={styles.title}>Your stROSE is </h4>\n        <Tooltip\n          bgColor=\"#cc3a59\"\n          closeOnClick={false}\n          label=\"This feature is still in beta. If you believe your stROSE is unlocked, try performing the unstake operation.\"\n        >\n          <h4\n            className={classNames(\n              styles.title,\n              styles.status,\n              { [styles.locked]: locked },\n              { [styles.unlocked]: !locked },\n            )}\n          >\n            {locked ? \"Locked\" : \"Unlocked\"}\n          </h4>\n        </Tooltip>\n      </div>\n      <div className={styles.stakeLockTimer}>\n        <div className={styles.lockMessage}>\n          Time left until unstake allowed\n        </div>\n        <div className={styles.timeLeft}>\n          <Tooltip\n            bgColor=\"#cc3a59\"\n            closeOnClick={false}\n            label=\"This is an estimate of time remaining until you can unstake. Refresh the page for better accuracy.\"\n          >\n            <h4 className={styles.title}>\n              {new Date((timeLeft / 1000) * 1000).toISOString().substr(11, 8)}\n            </h4>\n          </Tooltip>\n          <span className={styles.timeUnits}>(HH:MM:SS)</span>\n        </div>\n      </div>\n    </SlideFade>\n  )\n}\n\nexport default StakeLockedTimer\n","import { BLOCK_TIME } from \"../constants\"\nimport retry from \"async-retry\"\nimport usePoller from \"./usePoller\"\nimport { useState } from \"react\"\n\nconst stakeStatsApi =\n  \"https://raw.githubusercontent.com/RoseOnAurora/apr/master/rose.json\"\n\ninterface StakeStatsApiResponse {\n  price_of_rose: string\n  price_of_strose: string\n  strose_rose_ratio: string\n  strose_tvl: string\n  total_rose_staked: string\n}\n\nexport interface StakeStats {\n  priceRatio: string\n  tvl: string\n  totalRoseStaked: string\n  priceOfRose: string\n}\n\nconst emptyState = {\n  priceRatio: \"\",\n  tvl: \"\",\n  totalRoseStaked: \"\",\n  priceOfRose: \"\",\n}\n\nexport default function useStakeStats(): StakeStats {\n  const [stakeStats, setStakeStats] = useState(emptyState)\n  usePoller(() => {\n    function pollStakeStats(): void {\n      void retry(() =>\n        fetch(stakeStatsApi)\n          .then((res) => res.json())\n          .then((body: StakeStatsApiResponse[]) => {\n            const res = body.map((b) => {\n              return {\n                priceRatio: b?.strose_rose_ratio,\n                tvl: b?.strose_tvl,\n                totalRoseStaked: b?.total_rose_staked,\n                priceOfRose: b?.price_of_rose,\n              }\n            })\n            setStakeStats(res[0])\n          }),\n      )\n    }\n    void pollStakeStats()\n  }, BLOCK_TIME)\n  return stakeStats\n}\n","/* eslint @typescript-eslint/no-unsafe-assignment: 0 */\nimport ConfirmTransaction, {\n  ConfirmTransactionProps,\n  ModalType,\n} from \"./ConfirmTransaction\"\nimport React, { ReactElement, useState } from \"react\"\nimport { Tab, TabList, TabPanel, TabPanels, Tabs } from \"@chakra-ui/react\"\nimport { commify, formatBNToShortString, formatBNToString } from \"../utils\"\nimport { useRoseContract, useStRoseContract } from \"../hooks/useContract\"\nimport { AppState } from \"../state\"\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport { ContractReceipt } from \"@ethersproject/contracts\"\nimport { Erc20 } from \"../../types/ethers-contracts/Erc20\"\nimport Modal from \"./Modal\"\nimport { StRose } from \"../../types/ethers-contracts/StRose\"\nimport StakeDetails from \"./StakeDetails\"\nimport StakeForm from \"./StakeForm\"\nimport StakeLockedTimer from \"./StakeLockedTimer\"\nimport { TokenDetails } from \"../pages/Stake\"\nimport { Zero } from \"@ethersproject/constants\"\nimport classNames from \"classnames\"\nimport { parseUnits } from \"@ethersproject/units\"\nimport styles from \"./StakePage.module.scss\"\nimport { useCheckTokenRequiresApproval } from \"../hooks/useCheckTokenRequiresApproval\"\nimport { useSelector } from \"react-redux\"\nimport useStakeStats from \"../hooks/useStakeStats\"\nimport { useTranslation } from \"react-i18next\"\n\ninterface Props {\n  balance: TokenDetails\n  staked: TokenDetails\n  roseTokenIcon: string\n  stRoseTokenIcon: string\n  timeLeft: number\n  approveStake: (amount: string) => Promise<ContractReceipt | void>\n  approveUnstake: (amount: string) => Promise<ContractReceipt | void>\n}\n\nfunction StakePage(props: Props): ReactElement {\n  const { t } = useTranslation()\n  const {\n    balance,\n    staked,\n    roseTokenIcon,\n    stRoseTokenIcon,\n    timeLeft,\n    approveStake,\n    approveUnstake,\n  } = props\n\n  const { userDarkMode } = useSelector((state: AppState) => state.user)\n  const { priceRatio, tvl, totalRoseStaked, priceOfRose } = useStakeStats()\n\n  const [\n    currentModal,\n    setCurrentModal,\n  ] = useState<ConfirmTransactionProps | null>(null)\n\n  const roseContract = useRoseContract() as Erc20\n  const stRoseContract = useStRoseContract() as StRose\n\n  const [approved, loading, checkRoseApproved] = useCheckTokenRequiresApproval(\n    roseContract,\n    stRoseContract,\n  )\n\n  const validateBalance = (amount: string) => {\n    const generalValidation = validateAmount(amount)\n    if (generalValidation) {\n      return generalValidation\n    }\n    if (parseUnits(amount, 18).gt(balance.amount)) {\n      return t(\"insufficientBalance\")\n    }\n  }\n\n  const validateStaked = (amount: string) => {\n    const generalValidation = validateAmount(amount)\n    if (generalValidation) {\n      return generalValidation\n    }\n    if (parseUnits(amount, 18).gt(staked.amount)) {\n      return t(\"insufficientBalance\")\n    }\n  }\n\n  const validateAmount = (amount: string) => {\n    const decimalRegex = /^[0-9]\\d*(\\.\\d{1,18})?$/\n    if (!amount) {\n      return t(\"You must enter a value.\")\n    }\n    if (!decimalRegex.exec(amount)) {\n      return t(\"Invalid number.\")\n    }\n    if (parseUnits(amount, 18).lte(Zero)) {\n      return t(\"Enter a positive amount.\")\n    }\n    return null\n  }\n\n  const updateModal = (modalType: ModalType, tx?: string): void => {\n    switch (modalType) {\n      case ModalType.CONFIRM:\n        setCurrentModal({ type: ModalType.CONFIRM })\n        break\n      case ModalType.SUCCESS:\n        setCurrentModal({\n          type: ModalType.SUCCESS,\n          title: t(\"successTitle\"),\n          description: t(\"txConfirmed\", { tx }),\n        })\n        break\n      case ModalType.FAILED:\n        setCurrentModal({\n          type: ModalType.FAILED,\n          title: t(\"failedTitle\"),\n          description: t(\"txFailed\", { tx }),\n        })\n        break\n      default:\n        break\n    }\n  }\n\n  const postStake = (receipt: ContractReceipt | null) => {\n    if (receipt?.status) {\n      updateModal(ModalType.SUCCESS, t(\"stake\"))\n    } else {\n      updateModal(ModalType.FAILED, t(\"stake\"))\n    }\n  }\n\n  const postUnstake = (receipt: ContractReceipt | null) => {\n    if (receipt?.status) {\n      updateModal(ModalType.SUCCESS, t(\"unstake\"))\n    } else {\n      updateModal(ModalType.FAILED, t(\"unstake\"))\n    }\n  }\n\n  return (\n    <div className={styles.stakePage}>\n      <div className={styles.stakeForm}>\n        <Modal\n          isOpen={!!currentModal}\n          onClose={(): void => setCurrentModal(null)}\n        >\n          <ConfirmTransaction\n            description={currentModal?.description}\n            title={currentModal?.title}\n            type={currentModal?.type}\n          />\n        </Modal>\n        <Tabs isFitted variant=\"primary\">\n          <TabList mb=\"1em\">\n            <Tab>{`${t(\"stake\")} Rose`}</Tab>\n            <Tab>{`${t(\"unstake\")} stRose`}</Tab>\n          </TabList>\n          <TabPanels>\n            <TabPanel>\n              <div className={styles.row}>\n                <h3 className={styles.stakeTitle}>{`${t(\"stake\")} Rose`}</h3>\n                <div\n                  className={classNames(\n                    styles.pill,\n                    { [styles.glowPill]: userDarkMode },\n                    { [styles.colorPill]: !userDarkMode },\n                  )}\n                >\n                  <div>\n                    1 stROSE ≈ {priceRatio ? (+priceRatio).toFixed(5) : \"1.00\"}{\" \"}\n                    ROSE\n                  </div>\n                </div>\n              </div>\n              <StakeForm\n                fieldName={\"stake\"}\n                token={\"ROSE\"}\n                tokenIcon={roseTokenIcon}\n                submitButtonLabel={\n                  approved\n                    ? t(\"stake\")\n                    : t(\"approveAnd\", { action: t(\"stake\") })\n                }\n                isLoading={loading}\n                formDescription={t(\"stakingInfo\")}\n                max={formatBNToString(\n                  balance.amount || Zero,\n                  balance.decimals || 0,\n                  balance.decimals,\n                )}\n                handlePreSubmit={() => updateModal(ModalType.CONFIRM)}\n                handleInputChanged={checkRoseApproved}\n                handleSubmit={approveStake}\n                handlePostSubmit={postStake}\n                validator={validateBalance}\n              />\n            </TabPanel>\n            <TabPanel>\n              <div className={styles.row}>\n                <h3 className={styles.stakeTitle}>{t(\"unstake\")}</h3>\n                <div\n                  className={classNames(\n                    styles.pill,\n                    { [styles.glowPill]: userDarkMode },\n                    { [styles.colorPill]: !userDarkMode },\n                  )}\n                >\n                  <div>\n                    1 stROSE ≈ {priceRatio ? (+priceRatio).toFixed(5) : \"1.00\"}{\" \"}\n                    ROSE\n                  </div>\n                </div>\n              </div>\n              <StakeForm\n                fieldName={\"unstake\"}\n                token={\"stRose\"}\n                tokenIcon={stRoseTokenIcon}\n                isLoading={false}\n                submitButtonLabel={t(\"unstake\")}\n                formDescription={t(\"stakingInfo\")}\n                max={formatBNToString(\n                  staked.amount || Zero,\n                  staked.decimals || 0,\n                  staked.decimals,\n                )}\n                handlePreSubmit={() => updateModal(ModalType.CONFIRM)}\n                handleSubmit={approveUnstake}\n                handlePostSubmit={postUnstake}\n                validator={validateStaked}\n              />\n            </TabPanel>\n          </TabPanels>\n        </Tabs>\n      </div>\n      <StakeDetails\n        balanceView={{\n          title: t(\"balance\"),\n          tokenName: \"ROSE\",\n          icon: roseTokenIcon,\n          amount: commify(\n            formatBNToString(balance.amount || Zero, balance.decimals || 0, 5),\n          ),\n        }}\n        stakedView={{\n          title: t(\"Staked\"),\n          tokenName: \"stROSE\",\n          icon: stRoseTokenIcon,\n          amount: commify(\n            formatBNToString(staked.amount || Zero, staked.decimals || 0, 5),\n          ),\n        }}\n        stats={[\n          {\n            statLabel: \"Total ROSE Staked\",\n            statValue: totalRoseStaked\n              ? `${formatBNToShortString(BigNumber.from(totalRoseStaked), 18)}`\n              : \"-\",\n          },\n          {\n            statLabel: \"Price of ROSE\",\n            statValue: `$${Number(priceOfRose).toFixed(3)}`,\n          },\n          {\n            statLabel: \"TVL\",\n            statValue: tvl\n              ? `$${formatBNToShortString(BigNumber.from(tvl), 18)}`\n              : \"-\",\n          },\n        ]}\n      />\n      {staked.amount.gt(Zero) ? <StakeLockedTimer timeLeft={timeLeft} /> : null}\n    </div>\n  )\n}\n\nexport default StakePage\n","import { ChainId, SROSE } from \"../constants\"\nimport retry from \"async-retry\"\n\ninterface BlockTransactionResponse {\n  message: string\n  status: string\n  result: Transaction[]\n}\n\ninterface Transaction {\n  blockHash: string\n  blockNumber: string\n  confirmations: string\n  contractAddress: string\n  cumulativeGasUsed: string\n  from: string\n  gas: string\n  gasUsed: string\n  hash: string\n  input: string\n  isError: string\n  nonce: string\n  timeStamp: string\n  to: string\n  transactionIndex: string\n  value: string\n  txreceipt_status: string\n}\n\ninterface TokenTransferTxn extends Transaction {\n  logIndex: string\n  tokenDecimal: string\n  tokenSymbol: string\n  tokenName: string\n}\n\nconst blockTxnsUri = (\n  accountAddress: string,\n  startTimestamp: string,\n  networkId: string,\n) =>\n  `https://explorer.${networkId}.aurora.dev/api?module=account&action=txlist&address=${accountAddress}&starttimestamp=${startTimestamp}`\n\nconst tokenTransferTxnsUri = (\n  startBlock: string,\n  contractAddress: string,\n  accountAddress: string,\n  networkId: string,\n) =>\n  `https://explorer.${networkId}.aurora.dev/api?module=account&action=tokentx&address=${accountAddress}&contractaddress=${contractAddress}&startblock=${startBlock}`\n\nconst fetchBlockTxns = async (\n  accountAddress: string,\n  networkId: string,\n  daysOffset = 1,\n): Promise<Transaction[]> => {\n  const d = new Date()\n  d.setDate(d.getDate() - daysOffset) // default 1 day back\n  return fetch(\n    blockTxnsUri(\n      accountAddress,\n      d.getTime().toString().slice(0, 10),\n      networkId,\n    ),\n  )\n    .then((res) => res.json())\n    .then((body: BlockTransactionResponse) => {\n      return body.result\n    })\n}\n\nconst fetchTokenTransfers = (\n  startBlock: string,\n  contractAddress: string,\n  accountAddress: string,\n  networkId: string,\n): Promise<TokenTransferTxn[]> =>\n  fetch(\n    tokenTransferTxnsUri(\n      startBlock,\n      contractAddress,\n      accountAddress,\n      networkId,\n    ),\n  )\n    .then((res) => res.json())\n    .then((body: BlockTransactionResponse) => {\n      return body.result as TokenTransferTxn[]\n    })\n\nexport default async function fetchLastStakedTime(\n  accountAddress: string,\n  chainId: ChainId,\n): Promise<string | undefined> {\n  // fetch the user's txn list for last day\n  const networkId = chainId === ChainId.AURORA_TESTNET ? \"testnet\" : \"mainnet\"\n  const txnData = await retry(() => fetchBlockTxns(accountAddress, networkId), {\n    retries: 2,\n  })\n\n  // filter by stRose on `to` field and user account address\n  const stRoseAddress = SROSE.addresses[chainId]\n  const filteredTxnData = txnData.filter(\n    ({ to, from }) =>\n      to === stRoseAddress.toLowerCase() &&\n      from === accountAddress.toLowerCase(),\n  )\n\n  // if empty, return early\n  if (filteredTxnData.length === 0) return\n\n  // pull token transfer data starting at first block number from filtered txns\n  const tokenTransferData = await retry(\n    () =>\n      fetchTokenTransfers(\n        filteredTxnData[filteredTxnData.length - 1].blockNumber,\n        stRoseAddress,\n        accountAddress,\n        networkId,\n      ),\n    { retries: 2 },\n  )\n\n  // find the match and return\n  for (let i = 0; i < tokenTransferData.length; i += 1) {\n    if (\n      filteredTxnData.find(\n        ({ hash }) =>\n          hash === tokenTransferData[i].hash &&\n          tokenTransferData[i].to === accountAddress.toLowerCase(),\n      )\n    ) {\n      return tokenTransferData[i].timeStamp\n    }\n  }\n}\n","import { useEffect, useState } from \"react\"\nimport { AppState } from \"../state\"\nimport { TRANSACTION_TYPES } from \"../constants\"\nimport fetchLastStakedTime from \"../utils/fetchBlockTransactions\"\nimport { useActiveWeb3React } from \".\"\nimport { useSelector } from \"react-redux\"\n\nexport default function useLastStakedTime(): string | undefined {\n  const { account, chainId } = useActiveWeb3React()\n\n  const [lastStakedTime, setLastStakedTime] = useState<string | undefined>(\n    undefined,\n  )\n\n  const { lastTransactionTimes } = useSelector(\n    (state: AppState) => state.application,\n  )\n  const lastStakeTxn = lastTransactionTimes[TRANSACTION_TYPES.STAKE]\n\n  useEffect(() => {\n    if (!account || !chainId) return\n    fetchLastStakedTime(account, chainId)\n      .then((stakedTime) => {\n        setLastStakedTime(stakedTime)\n      })\n      .catch((err) => console.log(err))\n  }, [account, chainId, lastStakeTxn])\n\n  return lastStakedTime\n}\n","import React, { ReactElement, useEffect, useMemo, useState } from \"react\"\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport { ROSE_TOKENS_MAP } from \"../constants\"\nimport StakePage from \"../components/StakePage\"\nimport TopMenu from \"../components/TopMenu\"\nimport { Zero } from \"@ethersproject/constants\"\nimport styles from \"./Stake.module.scss\"\nimport { useApproveAndStake } from \"../hooks/useApproveAndStake\"\nimport { useApproveAndUnstake } from \"../hooks/useApproveAndUnstake\"\nimport useCountDown from \"react-countdown-hook\"\nimport useLastStakedTime from \"../hooks/useLastStakedTime\"\nimport { useRoseTokenBalances } from \"../state/wallet/hooks\"\n\nexport type BalanceDetails = {\n  balance: TokenDetails\n  staked: TokenDetails\n}\n\nexport type TokenDetails = {\n  amount: BigNumber\n  decimals: number\n}\n\nconst Stake = (): ReactElement => {\n  const tokenBalances = useRoseTokenBalances()\n  const stake = useApproveAndStake()\n  const unstake = useApproveAndUnstake()\n\n  const [diff, setDiff] = useState(0)\n  const lastStaked = useLastStakedTime()\n  useEffect(() => {\n    const d = new Date(lastStaked ? +lastStaked * 1000 : 0)\n    d.setDate(d.getDate() + 1)\n    setDiff((Date.now() - d.getTime()) * -1)\n  }, [lastStaked])\n\n  const [timeLeft, actions] = useCountDown(diff, 1000)\n\n  const tokenBalanceDetails = useMemo((): BalanceDetails => {\n    const [roseToken, stRoseToken] = Object.values(ROSE_TOKENS_MAP).map(\n      ({ symbol, decimals }) => {\n        const amount = tokenBalances?.[symbol] || Zero\n        return {\n          decimals,\n          amount,\n        }\n      },\n    )\n    return {\n      balance: {\n        amount: roseToken.amount,\n        decimals: roseToken.decimals,\n      },\n      staked: {\n        amount: stRoseToken.amount,\n        decimals: stRoseToken.decimals,\n      },\n    }\n  }, [tokenBalances])\n\n  useEffect(() => {\n    actions.start(diff)\n  }, [actions, diff, lastStaked])\n\n  return (\n    <div className={styles.stake}>\n      <TopMenu activeTab=\"stake\" />\n      <div className={styles.container}>\n        <StakePage\n          balance={tokenBalanceDetails.balance}\n          staked={tokenBalanceDetails.staked}\n          roseTokenIcon={ROSE_TOKENS_MAP.rose.icon}\n          stRoseTokenIcon={ROSE_TOKENS_MAP.stRose.icon}\n          timeLeft={timeLeft}\n          approveStake={stake}\n          approveUnstake={unstake}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default Stake\n","import { useRoseContract, useStRoseContract } from \"./useContract\"\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport { ContractReceipt } from \"@ethersproject/contracts\"\nimport { Erc20 } from \"../../types/ethers-contracts/Erc20\"\nimport { StRose } from \"../../types/ethers-contracts/StRose\"\nimport { TRANSACTION_TYPES } from \"../constants\"\nimport { Zero } from \"@ethersproject/constants\"\nimport checkAndApproveTokenForTrade from \"../utils/checkAndApproveTokenForTrade\"\nimport { updateLastTransactionTimes } from \"../state/application\"\nimport { useActiveWeb3React } from \".\"\nimport { useDispatch } from \"react-redux\"\n\nexport function useApproveAndStake(): (\n  amount: string,\n) => Promise<ContractReceipt | void> {\n  const roseContract = useRoseContract() as Erc20\n  const stRoseContract = useStRoseContract() as StRose\n  const { account } = useActiveWeb3React()\n  const dispatch = useDispatch()\n  return async function approveAndStake(\n    amount: string,\n  ): Promise<ContractReceipt | void> {\n    try {\n      if (!account) throw new Error(\"Wallet must be connected\")\n      if (!roseContract || !stRoseContract)\n        throw new Error(\"Rose contract is not loaded\")\n      const gasPrice = Zero\n      const amountToStake = BigNumber.from(amount)\n      await checkAndApproveTokenForTrade(\n        roseContract,\n        stRoseContract.address,\n        account,\n        amountToStake,\n        true,\n        gasPrice,\n        {\n          onTransactionError: (error) => {\n            console.error(error)\n            throw new Error(\"Your transaction could not be completed\")\n          },\n        },\n      )\n      const tx = await stRoseContract.mint(amountToStake)\n      const receipt = await tx.wait()\n      dispatch(\n        updateLastTransactionTimes({\n          [TRANSACTION_TYPES.STAKE]: Date.now(),\n        }),\n      )\n      return receipt\n    } catch (e) {\n      console.error(e)\n    }\n  }\n}\n","import { BigNumber } from \"@ethersproject/bignumber\"\nimport { ContractReceipt } from \"@ethersproject/contracts\"\nimport { StRose } from \"../../types/ethers-contracts/StRose\"\nimport { useActiveWeb3React } from \".\"\nimport { useStRoseContract } from \"./useContract\"\n\nexport function useApproveAndUnstake(): (\n  amount: string,\n) => Promise<ContractReceipt | void> {\n  const stRoseContract = useStRoseContract() as StRose\n  const { account } = useActiveWeb3React()\n  return async function approveAndUnstake(\n    amount: string,\n  ): Promise<ContractReceipt | void> {\n    try {\n      if (!account) throw new Error(\"Wallet must be connected\")\n      if (!stRoseContract) throw new Error(\"Contracts are not loaded\")\n      const amountToUnStake = BigNumber.from(amount)\n      if (amountToUnStake.isZero()) return\n      const tx = await stRoseContract.burn(account, amountToUnStake)\n      return await tx.wait()\n    } catch (e) {\n      console.error(e)\n    }\n  }\n}\n","/* eslint @typescript-eslint/no-non-null-assertion: 0 */\nimport {\n  POOLS_MAP,\n  Pool,\n  PoolsMap,\n  SWAP_TYPES,\n  TOKENS_MAP,\n  Token,\n  TokensMap,\n} from \"../constants/index\"\nimport { useMemo, useState } from \"react\"\n\nimport { intersection } from \"../utils/index\"\nimport usePoolTVLs from \"./usePoolsTVL\"\n\n// swaptypes in order of least to most preferred (aka expensive)\nconst SWAP_TYPES_ORDERED_ASC = [\n  SWAP_TYPES.INVALID,\n  SWAP_TYPES.TOKEN_TO_TOKEN,\n  SWAP_TYPES.TOKEN_TO_SYNTH,\n  SWAP_TYPES.SYNTH_TO_TOKEN,\n  SWAP_TYPES.SYNTH_TO_SYNTH,\n  SWAP_TYPES.DIRECT,\n]\n\ntype TokenToPoolsMap = {\n  [tokenSymbol: string]: string[]\n}\n\ntype TokenToSwapDataMap = { [symbol: string]: SwapData[] }\nexport function useCalculateSwapPairs(): (token?: Token) => SwapData[] {\n  const [pairCache, setPairCache] = useState<TokenToSwapDataMap>({})\n  const poolTVLs = usePoolTVLs()\n  const [poolsSortedByTVL, tokenToPoolsMapSorted] = useMemo(() => {\n    const sortedPools = Object.values(POOLS_MAP).sort((a, b) => {\n      const aTVL = poolTVLs[a.name]\n      const bTVL = poolTVLs[b.name]\n      if (aTVL && bTVL) {\n        return aTVL.gt(bTVL) ? -1 : 1\n      }\n      return aTVL ? -1 : 1\n    })\n    const tokenToPools = sortedPools.reduce((acc, { name: poolName }) => {\n      const pool = POOLS_MAP[poolName]\n      const newAcc = { ...acc }\n      pool.poolTokens.forEach((token) => {\n        newAcc[token.symbol] = (newAcc[token.symbol] || []).concat(poolName)\n      })\n      return newAcc\n    }, {} as TokenToPoolsMap)\n    return [sortedPools, tokenToPools]\n  }, [poolTVLs])\n\n  return function calculateSwapPairs(token?: Token): SwapData[] {\n    if (!token) return []\n    const cacheHit = pairCache[token.symbol]\n    if (cacheHit) return cacheHit\n    const swapPairs = getTradingPairsForToken(\n      TOKENS_MAP,\n      POOLS_MAP,\n      poolsSortedByTVL,\n      tokenToPoolsMapSorted,\n      token,\n    )\n    setPairCache((prevState) => ({ ...prevState, [token.symbol]: swapPairs }))\n    return swapPairs\n  }\n}\n\nfunction buildSwapSideData(token: Token): SwapSide\nfunction buildSwapSideData(token: Token, pool: Pool): Required<SwapSide>\nfunction buildSwapSideData(\n  token: Token,\n  pool?: Pool,\n): Required<SwapSide> | SwapSide {\n  return {\n    symbol: token.symbol,\n    poolName: pool?.name,\n    tokenIndex:\n      pool?.underlyingPoolTokens?.findIndex((t) => t === token) ||\n      pool?.poolTokens.findIndex((t) => t === token),\n  }\n}\n\nexport type SwapSide = {\n  symbol: string\n  poolName?: string\n  tokenIndex?: number\n}\n\nexport type SwapData =\n  | {\n      from: Required<SwapSide>\n      to: Required<SwapSide>\n      type: Exclude<SWAP_TYPES, SWAP_TYPES.INVALID>\n      route: string[]\n    }\n  | {\n      from: SwapSide\n      to: SwapSide\n      type: SWAP_TYPES.INVALID\n      route: string[]\n    }\n\nfunction getTradingPairsForToken(\n  tokensMap: TokensMap,\n  poolsMap: PoolsMap,\n  poolsSortedByTVL: Pool[],\n  tokenToPoolsMap: TokenToPoolsMap,\n  originToken: Token,\n): SwapData[] {\n  const allTokens = Object.values(tokensMap).filter(\n    ({ isLPToken }) => !isLPToken,\n  )\n  const synthPoolsSet = new Set(\n    poolsSortedByTVL.filter(({ isSynthetic }) => isSynthetic),\n  )\n  const originTokenPoolsSet = new Set(\n    tokenToPoolsMap[originToken.symbol].map((poolName) => poolsMap[poolName]),\n  )\n  const originPoolsSynthSet = intersection(synthPoolsSet, originTokenPoolsSet)\n  const tokenToSwapDataMap: { [symbol: string]: SwapData } = {} // object is used for deduping\n\n  allTokens.forEach((token) => {\n    // Base Case: Invalid trade, eg token with itself\n    let swapData: SwapData = {\n      from: buildSwapSideData(originToken),\n      to: buildSwapSideData(token),\n      type: SWAP_TYPES.INVALID,\n      route: [],\n    }\n    const tokenPoolsSet = new Set(\n      tokenToPoolsMap[token.symbol].map((poolName) => poolsMap[poolName]),\n    )\n    const tokenPoolsSynthSet = intersection(synthPoolsSet, tokenPoolsSet)\n    const sharedPoolsSet = intersection(originTokenPoolsSet, tokenPoolsSet)\n\n    /**\n     * sToken = synth, Token = nonsynth\n     * sPool = synth, Pool = nonsynth\n     * sPool(TokenA) <> sTokenB = nonsynth token in synth pool swapping with synth token\n     */\n\n    // Case 1: TokenA <> TokenA\n    if (originToken === token) {\n      // fall through to default \"invalid\" swapData\n    }\n    // Case 2: poolA(TokenA) <> poolA(TokenB)\n    else if (sharedPoolsSet.size > 0) {\n      const tradePool = [...sharedPoolsSet][0]\n      swapData = {\n        type: SWAP_TYPES.DIRECT,\n        from: buildSwapSideData(originToken, tradePool),\n        to: buildSwapSideData(token, tradePool),\n        route: [originToken.symbol, token.symbol],\n      }\n    }\n\n    // Case 3: sTokenA <> sTokenB\n    else if (originToken.isSynthetic && token.isSynthetic) {\n      const originPool = [...originTokenPoolsSet][0]\n      const destinationPool = [...tokenPoolsSet][0]\n      swapData = {\n        type: SWAP_TYPES.SYNTH_TO_SYNTH,\n        from: buildSwapSideData(originToken, originPool),\n        to: buildSwapSideData(token, destinationPool),\n        route: [originToken.symbol, token.symbol],\n      }\n    }\n\n    // Case 4: sTokenA <> sPool(TokenB)\n    else if (\n      originToken.isSynthetic &&\n      !token.isSynthetic &&\n      tokenPoolsSynthSet.size > 0\n    ) {\n      const originPool = [...originTokenPoolsSet][0]\n      const destinationPool = [...tokenPoolsSynthSet][0]\n      const middleSynth = destinationPool.poolTokens.find(\n        ({ isSynthetic }) => isSynthetic,\n      )\n      if (middleSynth) {\n        swapData = {\n          type: SWAP_TYPES.SYNTH_TO_TOKEN,\n          from: buildSwapSideData(originToken, originPool),\n          to: buildSwapSideData(token, destinationPool),\n          route: [originToken.symbol, middleSynth.symbol, token.symbol],\n        }\n      }\n    }\n\n    // Case 5: sPoolA(TokenA) <> sPoolB(TokenB)\n    else if (\n      !originToken.isSynthetic &&\n      originPoolsSynthSet.size > 0 &&\n      !token.isSynthetic &&\n      tokenPoolsSynthSet.size > 0\n    ) {\n      const originPool = [...originPoolsSynthSet][0]\n      const destinationPool = [...tokenPoolsSynthSet][0]\n      const originSynth = originPool.poolTokens.find(\n        ({ isSynthetic }) => isSynthetic,\n      )\n      const destinationSynth = destinationPool.poolTokens.find(\n        ({ isSynthetic }) => isSynthetic,\n      )\n      if (originSynth && destinationSynth) {\n        swapData = {\n          type: SWAP_TYPES.TOKEN_TO_TOKEN,\n          from: buildSwapSideData(originToken, originPool),\n          to: buildSwapSideData(token, destinationPool),\n          route: [\n            originToken.symbol,\n            originSynth.symbol,\n            destinationSynth.symbol,\n            token.symbol,\n          ],\n        }\n      }\n    }\n\n    // Case 6: sPool(TokenA) <> sTokenB\n    else if (\n      !originToken.isSynthetic &&\n      originPoolsSynthSet.size > 0 &&\n      token.isSynthetic\n    ) {\n      const originPool = [...originPoolsSynthSet][0]\n      const destinationPool = [...tokenPoolsSet][0]\n      const middleSynth = originPool.poolTokens.find(\n        ({ isSynthetic }) => isSynthetic,\n      )\n      if (middleSynth) {\n        swapData = {\n          type: SWAP_TYPES.TOKEN_TO_SYNTH,\n          from: buildSwapSideData(originToken, originPool),\n          to: buildSwapSideData(token, destinationPool),\n          route: [originToken.symbol, middleSynth.symbol, token.symbol],\n        }\n      }\n    }\n\n    // TO-DO: clean this logic up\n    // Case 7: poolA(TokenA) <> poolB(TokenB) (temp workaround for tokens from diff pools)\n    else if (sharedPoolsSet.size === 0) {\n      const originPool = [...originTokenPoolsSet].find(\n        ({ isOutdated }) => !isOutdated,\n      )\n      const destinationPool = [...tokenPoolsSet].find(\n        ({ isOutdated }) => !isOutdated,\n      )\n      const metaSwapPool = originPool?.metaSwapAddresses\n        ? originPool\n        : destinationPool\n      if (\n        !(originToken.symbol === \"FRAX\" && token.symbol === \"atUST\") &&\n        !(originToken.symbol === \"atUST\" && token.symbol === \"FRAX\")\n      ) {\n        swapData = {\n          type: SWAP_TYPES.DIRECT,\n          from: buildSwapSideData(originToken, metaSwapPool!),\n          to: buildSwapSideData(token, metaSwapPool!),\n          route: [originToken.symbol, token.symbol],\n        }\n      }\n    }\n\n    // use this swap only if we haven't already calculated a better swap for the pair\n    const existingTokenSwapData: SwapData | undefined =\n      tokenToSwapDataMap[token.symbol]\n    const existingSwapIdx = SWAP_TYPES_ORDERED_ASC.indexOf(\n      existingTokenSwapData?.type,\n    )\n    const newSwapIdx = SWAP_TYPES_ORDERED_ASC.indexOf(swapData.type)\n    if (!existingTokenSwapData || newSwapIdx > existingSwapIdx) {\n      tokenToSwapDataMap[token.symbol] = swapData\n    }\n  })\n\n  return Object.values(tokenToSwapDataMap)\n}\n\nexport const __test__ = {\n  getTradingPairsForToken,\n}\n","import { ChainId, POOLS_MAP, PoolName, PoolTypes } from \"../constants\"\nimport { Contract, Provider } from \"ethcall\"\nimport { MulticallContract, MulticallProvider } from \"../types/ethcall\"\nimport { useEffect, useState } from \"react\"\n\nimport { AppState } from \"../state\"\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport LPTOKEN_UNGUARDED_ABI from \"../constants/abis/lpTokenUnguarded.json\"\nimport { LpTokenUnguarded } from \"../../types/ethers-contracts/LpTokenUnguarded\"\nimport { parseUnits } from \"@ethersproject/units\"\nimport { useActiveWeb3React } from \".\"\nimport { useSelector } from \"react-redux\"\n\nexport default function usePoolTVLs(): { [poolName in PoolName]?: BigNumber } {\n  const { chainId, library } = useActiveWeb3React()\n  const { tokenPricesUSD } = useSelector((state: AppState) => state.application)\n  const [poolTvls, setPoolTvls] = useState<\n    { [poolName in PoolName]?: BigNumber }\n  >({})\n\n  useEffect(() => {\n    if (\n      Object.keys(poolTvls).length > 0 && // only run once\n      tokenPricesUSD?.BTC &&\n      tokenPricesUSD?.ETH\n    )\n      return\n    async function fetchTVLs() {\n      if (!library || !chainId) return\n      const ethcallProvider = new Provider() as MulticallProvider\n\n      await ethcallProvider.init(library)\n      // override the contract address when using aurora\n      if (chainId == ChainId.AURORA_TESTNET) {\n        ethcallProvider.multicallAddress =\n          \"0x508B1508AAd923fB24F6d13cD74Ac640fD8B66E8\"\n      } else if (chainId == ChainId.AURORA_MAINNET) {\n        ethcallProvider.multicallAddress =\n          \"0x49eb1F160e167aa7bA96BdD88B6C1f2ffda5212A\"\n      }\n\n      const pools = Object.values(POOLS_MAP)\n      const supplyCalls = pools\n        .map((p) => {\n          return new Contract(\n            p.lpToken.addresses[chainId],\n            LPTOKEN_UNGUARDED_ABI,\n          ) as MulticallContract<LpTokenUnguarded>\n        })\n        .map((c) => c.totalSupply())\n      const tvls = await ethcallProvider.all(supplyCalls, \"latest\")\n      const tvlsUSD = pools.map((pool, i) => {\n        const tvlAmount = tvls[i]\n        let tokenValue = 0\n        if (pool.type === PoolTypes.BTC) {\n          tokenValue = tokenPricesUSD?.BTC || 0\n        } else if (pool.type === PoolTypes.ETH) {\n          tokenValue = tokenPricesUSD?.ETH || 0\n        } else {\n          tokenValue = 1 // USD\n        }\n        return parseUnits(tokenValue.toFixed(2), 2)\n          .mul(tvlAmount)\n          .div(BigNumber.from(10).pow(2)) //1e18\n      })\n      setPoolTvls((prevState) => {\n        return pools.reduce(\n          (acc, pool, i) => ({\n            ...acc,\n            [pool.name]: tvlsUSD[i],\n          }),\n          prevState,\n        )\n      })\n    }\n    void fetchTVLs()\n  }, [chainId, library, tokenPricesUSD, poolTvls])\n  return poolTvls\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M8.78933 11.0039C8.26249 11.0039 7.73565 11.0039 7.20882 11.0039C6.83657 11.0039 6.4806 11.3495 6.49688 11.7553C6.51315 12.1632 6.81013 12.5066 7.20882 12.5066C7.73565 12.5066 8.26249 12.5066 8.78933 12.5066C9.16157 12.5066 9.51754 12.161 9.50127 11.7553C9.485 11.3495 9.19005 11.0039 8.78933 11.0039Z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7.30393 7.50085C7.60136 7.50085 7.89648 7.50085 8.19391 7.50085C7.92415 7.24918 7.65669 6.99966 7.38693 6.74799C7.38693 7.31156 7.38693 7.87514 7.38693 8.43871C7.38693 9.33785 7.38693 10.2348 7.38693 11.134C7.38693 11.3405 7.38693 11.547 7.38693 11.7535C7.38693 12.1471 7.75814 12.5236 8.19391 12.5064C8.63199 12.4891 9.00089 12.1751 9.00089 11.7535C9.00089 11.1899 9.00089 10.6263 9.00089 10.0628C9.00089 9.16362 9.00089 8.26663 9.00089 7.36749C9.00089 7.16099 9.00089 6.95449 9.00089 6.74799C9.00089 6.34144 8.63199 5.99512 8.19391 5.99512C7.89648 5.99512 7.60136 5.99512 7.30393 5.99512C6.88199 5.99512 6.4785 6.34144 6.49695 6.74799C6.51539 7.15669 6.85202 7.50085 7.30393 7.50085Z\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7.45299 4.49198C7.45299 4.50083 7.45299 4.50746 7.45078 4.51631C7.45962 4.44776 7.46846 4.3792 7.47951 4.31065C7.47509 4.33498 7.47067 4.35709 7.45962 4.3792C7.48614 4.31729 7.51267 4.25537 7.53698 4.19345C7.53035 4.20672 7.52372 4.2222 7.51267 4.23325C7.55245 4.18018 7.59223 4.12932 7.63423 4.07625C7.61876 4.09615 7.60328 4.10942 7.5856 4.1249C7.63865 4.08509 7.68948 4.04529 7.74253 4.00327C7.72927 4.01212 7.71601 4.02096 7.70275 4.0276C7.76463 4.00106 7.82652 3.97452 7.88841 3.9502C7.86409 3.95904 7.8442 3.96568 7.81989 3.9701C7.88841 3.96126 7.95692 3.95241 8.02544 3.94135C8.00997 3.94356 7.99229 3.94356 7.97681 3.94135C8.04533 3.9502 8.11385 3.95904 8.18237 3.9701C8.15805 3.96568 8.13595 3.96126 8.11385 3.9502C8.17574 3.97673 8.23762 4.00327 8.29951 4.0276C8.28625 4.02096 8.27078 4.01433 8.25972 4.00327C8.31277 4.04308 8.36361 4.08288 8.41665 4.1249C8.39676 4.10942 8.3835 4.09394 8.36803 4.07625C8.40781 4.12932 8.44759 4.18018 8.48959 4.23325C8.48075 4.21999 8.47191 4.20672 8.46528 4.19345C8.4918 4.25537 8.51832 4.31729 8.54263 4.3792C8.53379 4.35488 8.52716 4.33498 8.52274 4.31065C8.53158 4.3792 8.54042 4.44776 8.55148 4.51631C8.54927 4.50083 8.54927 4.48314 8.55148 4.46766C8.54263 4.53621 8.53379 4.60476 8.52274 4.67332C8.52716 4.64899 8.53158 4.62688 8.54263 4.60476C8.51611 4.66668 8.48959 4.7286 8.46528 4.79052C8.47191 4.77725 8.47854 4.76177 8.48959 4.75071C8.44981 4.80379 8.41002 4.85465 8.36803 4.90772C8.3835 4.88782 8.39897 4.87455 8.41665 4.85907C8.36361 4.89888 8.31277 4.93868 8.25972 4.9807C8.27299 4.97185 8.28625 4.963 8.29951 4.95637C8.23762 4.98291 8.17574 5.00944 8.11385 5.03377C8.13816 5.02492 8.15805 5.01829 8.18237 5.01387C8.11385 5.02271 8.04533 5.03156 7.97681 5.04261C7.99229 5.0404 8.00997 5.0404 8.02544 5.04261C7.95692 5.03377 7.88841 5.02492 7.81989 5.01387C7.8442 5.01829 7.8663 5.02271 7.88841 5.03377C7.82652 5.00723 7.76463 4.9807 7.70275 4.95637C7.71601 4.963 7.73148 4.96964 7.74253 4.9807C7.68948 4.94089 7.63865 4.90109 7.5856 4.85907C7.60549 4.87455 7.61876 4.89003 7.63423 4.90772C7.59444 4.85465 7.55466 4.80379 7.51267 4.75071C7.52151 4.76398 7.53035 4.77725 7.53698 4.79052C7.51045 4.7286 7.48393 4.66668 7.45962 4.60476C7.46846 4.62909 7.47509 4.64899 7.47951 4.67332C7.47067 4.60476 7.46183 4.53621 7.45078 4.46766C7.45078 4.47429 7.45299 4.48314 7.45299 4.49198C7.46404 4.69764 7.53256 4.89224 7.68064 5.03819C7.81547 5.17309 8.03428 5.2726 8.22657 5.26596C8.4277 5.25712 8.63325 5.19078 8.7725 5.03819C8.90732 4.89224 9.0112 4.69543 9.00015 4.49198C8.98689 4.22441 8.89848 3.97673 8.70619 3.78435C8.52053 3.59859 8.26193 3.49023 7.99892 3.49023C7.44415 3.49023 7.01315 3.94799 6.99768 4.49198C6.98221 5.03377 7.45962 5.48489 7.98566 5.49373C8.24425 5.49816 8.51611 5.39201 8.69735 5.20847C8.89406 5.00944 8.98468 4.7684 8.99794 4.49198C9.00899 4.29959 8.90511 4.07846 8.77029 3.94578C8.63547 3.81088 8.41665 3.71137 8.22436 3.718C7.78894 3.73791 7.47509 4.05856 7.45299 4.49198Z\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14.7367 7.99866C14.7367 8.3344 14.7132 8.66834 14.6699 9.00048C14.6771 8.94452 14.6843 8.88856 14.6933 8.8326C14.6049 9.47702 14.4316 10.1052 14.1789 10.7045C14.2005 10.6539 14.2222 10.6034 14.2421 10.5528C13.9966 11.1305 13.6789 11.6738 13.2962 12.1702C13.3287 12.1269 13.3612 12.0853 13.3955 12.042C13.0056 12.5474 12.5507 13.0005 12.0453 13.3922C12.0886 13.3597 12.1301 13.3272 12.1734 13.2929C11.6752 13.6756 11.1319 13.9933 10.5561 14.2388C10.6066 14.2171 10.6572 14.1955 10.7077 14.1756C10.1084 14.4283 9.48023 14.6016 8.83582 14.6901C8.89178 14.6828 8.94773 14.6756 9.00369 14.6666C8.33942 14.7551 7.66432 14.7551 7.00004 14.6666C7.056 14.6738 7.11196 14.681 7.16792 14.6901C6.5235 14.6016 5.89533 14.4283 5.29604 14.1756C5.34658 14.1973 5.39712 14.2189 5.44767 14.2388C4.87004 13.9933 4.32671 13.6756 3.83031 13.2929C3.87363 13.3254 3.91515 13.3579 3.95847 13.3922C3.45304 13.0023 2.99997 12.5474 2.60826 12.042C2.64075 12.0853 2.67325 12.1269 2.70754 12.1702C2.32486 11.672 2.00717 11.1287 1.76168 10.5528C1.78334 10.6034 1.805 10.6539 1.82485 10.7045C1.57214 10.1052 1.39885 9.47702 1.3104 8.8326C1.31762 8.88856 1.32484 8.94452 1.33387 9.00048C1.24542 8.33621 1.24542 7.66111 1.33387 6.99684C1.32665 7.0528 1.31943 7.10876 1.3104 7.16472C1.39885 6.5203 1.57214 5.89214 1.82485 5.29285C1.80319 5.3434 1.78153 5.39394 1.76168 5.44448C2.00717 4.86686 2.32486 4.32353 2.70754 3.82713C2.67505 3.87046 2.64256 3.91197 2.60826 3.95529C2.99816 3.44987 3.45304 2.9968 3.95847 2.6051C3.91515 2.63759 3.87363 2.67008 3.83031 2.70438C4.32851 2.3217 4.87184 2.00401 5.44767 1.75852C5.39712 1.78018 5.34658 1.80184 5.29604 1.8217C5.89533 1.56899 6.5235 1.3957 7.16792 1.30725C7.11196 1.31447 7.056 1.32169 7.00004 1.33072C7.66432 1.24227 8.33942 1.24227 9.00369 1.33072C8.94773 1.3235 8.89178 1.31628 8.83582 1.30725C9.48023 1.3957 10.1084 1.56899 10.7077 1.8217C10.6572 1.80004 10.6066 1.77838 10.5561 1.75852C11.1337 2.00401 11.677 2.3217 12.1734 2.70438C12.1301 2.67189 12.0886 2.6394 12.0453 2.6051C12.5507 2.995 13.0038 3.44987 13.3955 3.95529C13.363 3.91197 13.3305 3.87046 13.2962 3.82713C13.6789 4.32534 13.9966 4.86866 14.2421 5.44448C14.2204 5.39394 14.1987 5.3434 14.1789 5.29285C14.4316 5.89214 14.6049 6.5203 14.6933 7.16472C14.6861 7.10876 14.6789 7.0528 14.6699 6.99684C14.7132 7.32898 14.7348 7.66292 14.7367 7.99866C14.7367 8.32899 15.0273 8.64488 15.3684 8.63044C15.7096 8.616 16.0002 8.35245 16.0002 7.99866C15.9966 6.36507 15.4948 4.72787 14.5417 3.39753C14.0489 2.70979 13.4713 2.11773 12.8016 1.60509C12.1662 1.11952 11.4568 0.745873 10.7077 0.471502C9.15171 -0.0989015 7.39355 -0.149443 5.80146 0.30724C4.27436 0.744068 2.87181 1.65022 1.86096 2.87767C1.31762 3.53832 0.891623 4.25674 0.568513 5.04736C0.259843 5.80369 0.086554 6.60695 0.0233759 7.41923C-0.104785 9.05824 0.303165 10.7424 1.15878 12.1467C1.98009 13.4969 3.21297 14.6143 4.65523 15.2659C5.04152 15.441 5.43864 15.5926 5.84659 15.7081C6.27259 15.8273 6.70762 15.9013 7.14625 15.9518C7.97479 16.0475 8.81596 15.9969 9.63186 15.8327C11.2023 15.5168 12.6752 14.6901 13.78 13.5312C14.8829 12.3742 15.6482 10.8778 15.8919 9.2929C15.9569 8.8651 15.9984 8.43368 16.0002 8.00046C16.0002 7.67014 15.7096 7.35425 15.3684 7.36869C15.0255 7.38313 14.7367 7.64487 14.7367 7.99866Z\"\n});\n\nfunction SvgInfo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 16,\n    viewBox: \"0 0 16 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4, _ref5);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgInfo);\nexport default __webpack_public_path__ + \"static/media/info.34e6e9fa.svg\";\nexport { ForwardRef as ReactComponent };","import React, { ReactElement } from \"react\"\n\nimport styles from \"./Divider.module.scss\"\n\nconst Divider = (): ReactElement => <div className={styles.divider}></div>\n\nexport default Divider\n","import React, {\n  ReactElement,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\"\n\nimport Divider from \"./Divider\"\nimport { SWAP_TYPES } from \"../constants\"\nimport type { TokenOption } from \"../pages/Swap\"\nimport classnames from \"classnames\"\nimport { commify } from \"../utils\"\nimport { formatBNToString } from \"../utils\"\nimport styles from \"./SearchSelect.module.scss\"\nimport { useTranslation } from \"react-i18next\"\n\ninterface Props {\n  tokensData: TokenOption[]\n  onSelect: (symbol: string) => void\n  value?: string\n}\n\nexport default function SearchSelect({\n  tokensData,\n  onSelect,\n}: Props): ReactElement {\n  const [searchTerm, setSearchTerm] = useState(\"\")\n  const [activeIndex, setActiveIndex] = useState<number | null>(null)\n  const inputRef = useRef<HTMLInputElement>(null)\n  const focusedItemRef = useRef<HTMLLIElement>(null)\n  const { t } = useTranslation()\n\n  useEffect(() => {\n    if (inputRef?.current != null) {\n      inputRef.current.focus()\n    }\n  }, [inputRef])\n  useEffect(() => {\n    // scroll active li into view if user got there via keyboard nav\n    if (focusedItemRef?.current != null) {\n      focusedItemRef.current.scrollIntoView()\n    }\n  }, [focusedItemRef, activeIndex])\n  const filteredTokens = useMemo(() => {\n    // filter tokens by user input\n    return tokensData.filter(({ symbol, name }) => {\n      const target = searchTerm.toLowerCase()\n      return (\n        symbol.toLowerCase().includes(target) ||\n        name.toLowerCase().includes(target)\n      )\n    })\n  }, [tokensData, searchTerm])\n  const lastSelectableIndex = useMemo(() => {\n    // find the last idx of isAvailable tokens\n    const lastAvailableIndex =\n      filteredTokens.findIndex(({ isAvailable }) => isAvailable === false) - 1\n    return lastAvailableIndex < 0\n      ? filteredTokens.length - 1\n      : lastAvailableIndex\n  }, [filteredTokens])\n\n  return (\n    <div className={styles.searchSelect}>\n      <div className={styles.inputContainer}>\n        <svg\n          width=\"24\"\n          height=\"24\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            d=\"M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3C5.91 3 3 5.91 3 9.5C3 13.09 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5C5 7.01 7.01 5 9.5 5C11.99 5 14 7.01 14 9.5C14 11.99 11.99 14 9.5 14Z\"\n            fill=\"#B1B1B1\"\n          />\n        </svg>\n\n        <input\n          value={searchTerm}\n          onChange={(e) => {\n            const inputValue = e.target.value\n            const nextActiveIndex = inputValue === \"\" ? null : 0\n            activeIndex !== nextActiveIndex && setActiveIndex(nextActiveIndex)\n            setSearchTerm(inputValue)\n          }}\n          ref={inputRef}\n          onFocus={() => activeIndex != null && setActiveIndex(null)}\n          onKeyDown={(e) => {\n            if (e.key === \"Enter\" && activeIndex != null) {\n              const token = filteredTokens[activeIndex]\n              token.isAvailable && onSelect(token.symbol)\n            } else if (e.key === \"ArrowUp\") {\n              setActiveIndex((prev) =>\n                prev === null || prev === 0 ? null : Math.max(0, prev - 1),\n              )\n            } else if (e.key === \"ArrowDown\") {\n              setActiveIndex((prev) =>\n                prev === null ? 0 : Math.min(lastSelectableIndex, prev + 1),\n              )\n            }\n          }}\n        />\n      </div>\n      <ul className={styles.listContainer}>\n        {filteredTokens.map((item, i) => {\n          return (\n            <li\n              key={item.symbol}\n              onClick={() => item.isAvailable && onSelect(item.symbol)}\n              ref={i === activeIndex ? focusedItemRef : null}\n            >\n              <Divider />\n              <ListItem {...item} isActive={i === activeIndex} />\n            </li>\n          )\n        })}\n        {filteredTokens.length === 0 ? (\n          <li className={styles.listItem}>{t(\"noTokensFound\")}</li>\n        ) : null}\n      </ul>\n    </div>\n  )\n}\n\nfunction ListItem({\n  amount,\n  valueUSD,\n  name,\n  icon,\n  symbol,\n  decimals,\n  isActive,\n  isAvailable,\n  swapType,\n}: TokenOption & { isActive: boolean }) {\n  const { t } = useTranslation()\n  const isVirtualSwap = ([\n    SWAP_TYPES.SYNTH_TO_SYNTH,\n    SWAP_TYPES.SYNTH_TO_TOKEN,\n    SWAP_TYPES.TOKEN_TO_SYNTH,\n    SWAP_TYPES.TOKEN_TO_TOKEN,\n  ] as Array<SWAP_TYPES | null>).includes(swapType)\n  return (\n    <div\n      className={classnames(styles.listItem, {\n        [styles.isActive]: isActive,\n        [styles.isUnavailable]: !isAvailable,\n        [styles.isAvailable]: isAvailable,\n      })}\n    >\n      <img src={icon} height=\"24px\" width=\"24px\" />\n      <div>\n        <div className={styles.tagWrapper}>\n          <b>{symbol}</b>\n          {!isAvailable && (\n            <span className={styles.unavailableTag}>{t(\"unavailable\")}</span>\n          )}\n          {isAvailable && isVirtualSwap && (\n            <span className={styles.virtualSwapTag}>{t(\"virtualSwap\")}</span>\n          )}\n        </div>\n        <p className={styles.textMinor}>{name}</p>\n      </div>\n      <div>\n        <p>{commify(formatBNToString(amount, decimals))}</p>\n        <p className={styles.textMinor}>\n          ≈${commify(formatBNToString(valueUSD, 18, 2))}\n        </p>\n      </div>\n    </div>\n  )\n}\n","import React, { ReactElement, useCallback, useRef, useState } from \"react\"\n\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport SearchSelect from \"./SearchSelect\"\nimport { TOKENS_MAP } from \"../constants\"\nimport type { TokenOption } from \"../pages/Swap\"\nimport classnames from \"classnames\"\nimport { commify } from \"../utils\"\nimport { formatBNToString } from \"../utils\"\nimport styles from \"./SwapInput.module.scss\"\nimport useDetectOutsideClick from \"../hooks/useDetectOutsideClick\"\nimport { useTranslation } from \"react-i18next\"\n\ninterface Props {\n  tokens: TokenOption[]\n  selected: string\n  inputValue: string\n  inputValueUSD: BigNumber\n  isSwapFrom: boolean\n  onSelect?: (tokenSymbol: string) => void\n  onChangeAmount?: (value: string) => void\n}\nexport default function SwapInput({\n  tokens,\n  selected,\n  onSelect,\n  inputValue,\n  inputValueUSD,\n  isSwapFrom,\n  onChangeAmount,\n}: Props): ReactElement {\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false)\n  const wrapperRef = useRef(null)\n  const inputRef = useRef<HTMLInputElement>(null)\n  const { t } = useTranslation()\n  useDetectOutsideClick(\n    wrapperRef,\n    () => setIsDropdownOpen(false),\n    isDropdownOpen,\n  )\n  const handleSelect = useCallback(\n    (value: string) => {\n      onSelect?.(value)\n      setIsDropdownOpen(false)\n    },\n    [onSelect],\n  )\n\n  const selectedToken = TOKENS_MAP[selected]\n\n  const onChangeInput = (e: React.ChangeEvent<HTMLInputElement>): void => {\n    const decimals = selectedToken ? selectedToken.decimals : 18\n    // remove all chars that aren't a digit or a period\n    const newValue = e.target.value.replace(/[^\\d|.]/g, \"\")\n    // disallow more than one period\n    if (newValue.indexOf(\".\") !== newValue.lastIndexOf(\".\")) return\n    const parsedValue = parseFloat(\"0\" + newValue)\n    const periodIndex = newValue.indexOf(\".\")\n    const isValidInput = newValue === \"\" || !isNaN(parsedValue)\n    const isValidPrecision =\n      periodIndex === -1 || newValue.length - 1 - periodIndex <= decimals\n    if (isValidInput && isValidPrecision) {\n      // don't allow input longer than the token allows\n      onChangeAmount?.(newValue)\n    }\n  }\n\n  return (\n    <div className={styles.swapInputContainer}>\n      <div\n        className={classnames(\n          styles.selectGroup,\n          onSelect && styles.hoverPointer,\n        )}\n        onClick={() => onSelect && setIsDropdownOpen((prev) => !prev)}\n        tabIndex={0}\n        onKeyDown={(e) => {\n          if (onSelect && (e.key === \"Enter\" || e.key === \" \")) {\n            setIsDropdownOpen((prev) => !prev)\n          }\n        }}\n      >\n        {selectedToken && <img src={selectedToken.icon} />}\n        <div className={styles.tokenNameContainer}>\n          <div className={styles.symbolArrowContainer}>\n            <b className={styles.textBoldPurple}>\n              {selectedToken ? selectedToken.symbol : t(\"chooseToken\")}\n            </b>\n            &nbsp;\n            {onSelect && (\n              <svg\n                width=\"12\"\n                height=\"12\"\n                viewBox=\"0 0 12 12\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path d=\"M10.0163 3L6 7.17206L1.98375 3L0.75 4.28441L6 9.75L11.25 4.28441L10.0163 3Z\" />\n              </svg>\n            )}\n          </div>\n          {selectedToken && (\n            <p className={styles.textMinor}>{selectedToken.name}</p>\n          )}\n        </div>\n      </div>\n      <div\n        className={classnames(\n          { [styles.focusable]: isSwapFrom },\n          styles.inputGroup,\n        )}\n        onClick={() => {\n          inputRef.current?.focus()\n        }}\n      >\n        <input\n          ref={inputRef}\n          autoComplete=\"off\"\n          autoCorrect=\"off\"\n          type=\"text\"\n          placeholder=\"0.0\"\n          spellCheck=\"false\"\n          value={isSwapFrom ? inputValue : commify(inputValue)}\n          onChange={onChangeInput}\n          onFocus={(e: React.ChangeEvent<HTMLInputElement>): void => {\n            if (isSwapFrom) {\n              e.target.select()\n            }\n          }}\n          readOnly={!isSwapFrom}\n          tabIndex={isSwapFrom ? 0 : -1}\n        />\n        <p className={styles.textMinor}>\n          ≈${commify(formatBNToString(inputValueUSD, 18, 2))}\n        </p>\n      </div>\n      {isDropdownOpen && (\n        <div className={styles.dropdownContainer} ref={wrapperRef}>\n          <SearchSelect tokensData={tokens} onSelect={handleSelect} />\n        </div>\n      )}\n    </div>\n  )\n}\n","import { RefObject, useEffect } from \"react\"\n\nexport default function useDetectOutsideClick(\n  elementRef: RefObject<HTMLElement>,\n  callback: () => void,\n  active: boolean,\n): void {\n  useEffect(() => {\n    const handleClick = (event: MouseEvent) => {\n      if (\n        active &&\n        elementRef?.current &&\n        !elementRef?.current.contains(event.target as Node)\n      ) {\n        event.preventDefault()\n        event.stopPropagation()\n        callback()\n      }\n    }\n    const handleKeyPress = (event: KeyboardEvent) => {\n      if (event.key === \"Escape\") {\n        callback()\n      }\n    }\n\n    if (active) {\n      document.addEventListener(\"keydown\", handleKeyPress, true)\n      document.addEventListener(\"click\", handleClick, true)\n    }\n\n    return () => {\n      document.addEventListener(\"keydown\", handleKeyPress, true)\n      document.removeEventListener(\"click\", handleClick, true)\n    }\n  }, [active, callback, elementRef])\n}\n","import React, { ReactElement, useCallback, useState } from \"react\"\nimport { Trans, useTranslation } from \"react-i18next\"\nimport { calculatePrice, commify, formatBNToString } from \"../utils\"\n\nimport AdvancedOptions from \"./AdvancedOptions\"\nimport { AppState } from \"../state\"\nimport { BigNumber } from \"ethers\"\nimport Button from \"./Button\"\nimport { PendingSwap } from \"../hooks/usePendingSwapData\"\nimport { SWAP_TYPES } from \"../constants\"\nimport SwapInput from \"./SwapInput\"\nimport { Zero } from \"@ethersproject/constants\"\nimport { parseUnits } from \"@ethersproject/units\"\nimport styles from \"./PendingSwapExchange.module.scss\"\nimport { useSelector } from \"react-redux\"\n\nconst PendingSwapExchange = ({\n  pendingSwap,\n  onPendingSwapSettlement,\n}: {\n  pendingSwap: PendingSwap\n  onPendingSwapSettlement: (\n    action: \"withdraw\" | \"settle\",\n    amount: BigNumber,\n  ) => void\n}): ReactElement => {\n  const { tokenPricesUSD } = useSelector((state: AppState) => state.application)\n  const [inputState, setInputState] = useState<{\n    value: string\n    valueBN: BigNumber\n    valueUSD: BigNumber\n    error: string | null\n  }>({\n    value: \"\",\n    valueBN: Zero,\n    valueUSD: Zero,\n    error: null,\n  })\n  const { t } = useTranslation()\n  const { synthTokenFrom, tokenTo, synthBalance, swapType } = pendingSwap\n  const formattedSynthBalance = commify(\n    formatBNToString(synthBalance, synthTokenFrom.decimals, 6),\n  )\n  const withdraw = useCallback(() => {\n    const amount = inputState.value\n      ? parseUnits(inputState.value, synthTokenFrom.decimals)\n      : Zero\n    onPendingSwapSettlement(\"withdraw\", amount)\n  }, [inputState.value, synthTokenFrom.decimals, onPendingSwapSettlement])\n  const settle = useCallback(() => {\n    const amount = inputState.value\n      ? parseUnits(inputState.value, synthTokenFrom.decimals)\n      : Zero\n    onPendingSwapSettlement(\"settle\", amount)\n  }, [inputState.value, synthTokenFrom.decimals, onPendingSwapSettlement])\n  return (\n    <div className={styles.exchangeWrapper}>\n      <div className={styles.stepWrapper}>\n        <h2>{t(\"step2Settlement\")}</h2>\n      </div>\n      <div className={styles.balanceWrapper}>\n        <p>\n          {t(\"balance\")}:{\" \"}\n          <b\n            className={styles.balance}\n            onClick={() =>\n              setInputState((prevState) => ({\n                ...prevState,\n                valueBN: synthBalance,\n                valueUSD: calculatePrice(\n                  synthBalance,\n                  tokenPricesUSD?.[synthTokenFrom.symbol],\n                  synthTokenFrom.decimals,\n                ),\n                value: formatBNToString(synthBalance, synthTokenFrom.decimals),\n                error: null,\n              }))\n            }\n          >\n            {formattedSynthBalance}\n          </b>\n        </p>\n      </div>\n      <SwapInput\n        tokens={[]}\n        onChangeAmount={(newValue) =>\n          setInputState((prevState) => {\n            const cleanedValue = newValue.replace(/[$,]/g, \"\")\n            const isInputNumber = !(isNaN(+cleanedValue) || cleanedValue === \"\")\n            const isInvalid =\n              !isInputNumber && cleanedValue !== \"\" && cleanedValue !== \".\"\n            if (isInvalid) {\n              return prevState\n            }\n            const valueBN = isInputNumber\n              ? parseUnits(cleanedValue, synthTokenFrom.decimals)\n              : Zero\n            return {\n              value: newValue,\n              valueBN,\n              valueUSD: calculatePrice(\n                valueBN,\n                tokenPricesUSD?.[synthTokenFrom.symbol],\n                synthTokenFrom.decimals,\n              ),\n              error: valueBN.gt(synthBalance) ? t(\"insufficientBalance\") : null,\n            }\n          })\n        }\n        selected={synthTokenFrom.symbol}\n        inputValue={inputState.value}\n        inputValueUSD={inputState.valueUSD}\n        isSwapFrom={true}\n      />\n      {inputState.error && (\n        <div className={styles.error}>{inputState.error}</div>\n      )}\n      <div className={styles.buttonGroup}>\n        <Button\n          onClick={settle}\n          disabled={\n            (swapType !== SWAP_TYPES.TOKEN_TO_SYNTH && !inputState.value) ||\n            !!inputState.error\n          }\n        >\n          <Trans t={t} i18nKey=\"settleAsToken\">\n            Settle as <img src={tokenTo.icon} /> {{ name: tokenTo.symbol }}\n          </Trans>\n        </Button>\n        <Button\n          onClick={withdraw}\n          disabled={!inputState.value || !!inputState.error}\n        >\n          <Trans t={t} i18nKey=\"withdrawSynth\">\n            Withdraw <img src={synthTokenFrom.icon} />{\" \"}\n            {{ name: synthTokenFrom.symbol }}\n          </Trans>\n        </Button>\n      </div>\n      <AdvancedOptions />\n    </div>\n  )\n}\n\nexport default PendingSwapExchange\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M1 4L5.5 8L10 4\",\n  strokeWidth: 1.5\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M5.5 8V0\",\n  strokeWidth: 1.5\n});\n\nfunction SvgArrowDown(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 11,\n    height: 10,\n    viewBox: \"0 0 11 10\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgArrowDown);\nexport default __webpack_public_path__ + \"static/media/arrowDown.2cd639d7.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M3.50008 6.08492L1.41508 3.99992L0.705078 4.70492L3.50008 7.49992L9.50008 1.49992L8.79508 0.794922L3.50008 6.08492Z\"\n});\n\nfunction SvgCheck(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 10,\n    height: 8,\n    viewBox: \"0 0 10 8\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgCheck);\nexport default __webpack_public_path__ + \"static/media/check.591c6edc.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  d: \"M5.23467 1H5.5C7.98605 1 10 3.01525 10 5.49924C10 7.98311 7.98618 10 5.5 10C3.01388 10 1 7.98469 1 5.49924C1 4.30732 1.46423 3.22282 2.21973 2.41912L2.60641 2.78249C1.93974 3.49169 1.53066 4.4476 1.53066 5.49924C1.53066 7.69191 3.30721 9.46943 5.5 9.46943C7.69273 9.46943 9.46934 7.69046 9.46934 5.49924C9.46934 3.39724 7.83438 1.67581 5.76533 1.5393V2.96008H5.23467V1Z\",\n  strokeWidth: 0.3,\n  strokeMiterlimit: 10\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M5.85879 5.41311L3 3L5.41281 5.85768C5.47056 5.94243 5.56842 6 5.67911 6C5.85719 6 5.99997 5.85608 5.99997 5.68017C6.00157 5.56823 5.94542 5.47068 5.85879 5.41311Z\"\n});\n\nfunction SvgClock(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 11,\n    height: 11,\n    viewBox: \"0 0 11 11\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgClock);\nexport default __webpack_public_path__ + \"static/media/clock.45e2ce57.svg\";\nexport { ForwardRef as ReactComponent };","import React, { ReactElement } from \"react\"\n\nimport { ReactComponent as ArrowDownIcon } from \"../assets/icons/arrowDown.svg\"\nimport { ReactComponent as CheckIcon } from \"../assets/icons/check.svg\"\nimport { ReactComponent as ClockIcon } from \"../assets/icons/clock.svg\"\nimport { PendingSwap } from \"../hooks/usePendingSwapData\"\nimport classNames from \"classnames\"\nimport { commify } from \"../utils\"\nimport { formatBNToString } from \"../utils\"\nimport { getFormattedShortTime } from \"../utils/dateTime\"\nimport styles from \"./PendingSwapTimeline.module.scss\"\nimport { useTranslation } from \"react-i18next\"\n\nconst PendingSwapTimeline = ({\n  pendingSwap,\n}: {\n  pendingSwap: PendingSwap\n}): ReactElement => {\n  const { t } = useTranslation()\n  const {\n    secondsRemaining,\n    tokenTo,\n    synthBalance,\n    synthTokenFrom,\n    timestamp,\n    transactionHash,\n    events,\n  } = pendingSwap\n  const minutesRemaining = Math.max(Math.ceil(secondsRemaining / 60), 0)\n  const formattedBalance = commify(\n    formatBNToString(synthBalance, synthTokenFrom.decimals, 6),\n  )\n  const hasEvents = events.length > 0\n\n  return (\n    <div className={styles.timeline}>\n      <TimelineStep\n        isActive={false}\n        icon=\"check\"\n        withLine={false}\n        testId=\"PendingSwapTimeline:step1Of2\"\n      >\n        {getFormattedShortTime(timestamp)} {t(\"stepAOfB\", { a: 1, b: 2 })}{\" \"}\n        {t(\"confirmTheSwap\")}{\" \"}\n        <a\n          href={`https://etherscan.io/tx/${transactionHash}`}\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          {transactionHash.slice(0, 8)}\n        </a>\n      </TimelineStep>\n      {minutesRemaining > 0 ? (\n        <TimelineStep\n          isActive={true}\n          icon=\"clock\"\n          testId=\"PendingSwapTimeline:minutesLeft\"\n        >\n          {t(\"minutesLeft\", { count: minutesRemaining })}\n        </TimelineStep>\n      ) : (\n        <TimelineStep\n          isActive={!hasEvents}\n          icon=\"check\"\n          testId=\"PendingSwapTimeline:swappedForAmount\"\n        >\n          {getFormattedShortTime(timestamp)}{\" \"}\n          {t(\"swappedForAmount\", { amount: formattedBalance })}{\" \"}\n          {synthTokenFrom.symbol}\n        </TimelineStep>\n      )}\n      {!hasEvents ? (\n        <TimelineStep\n          isActive={false}\n          icon=\"arrow\"\n          testId=\"PendingSwapTimeline:step2Of2\"\n        >\n          {t(\"stepAOfB\", { a: 2, b: 2 })}{\" \"}\n          {t(\"settleToken\", { name: tokenTo.symbol })}{\" \"}\n        </TimelineStep>\n      ) : null}\n      {events.map((event, i) => {\n        if (event.type === \"settlement\") {\n          return (\n            <TimelineStep\n              isActive={false}\n              icon=\"check\"\n              key={event.transactionHash}\n              testId={`PendingSwapTimeline:event-${i + 1}`}\n            >\n              {getFormattedShortTime(event.timestamp)}{\" \"}\n              {t(\"settledXTokenForYToken\", {\n                amountFrom: commify(\n                  formatBNToString(\n                    event.fromAmount,\n                    event.fromToken.decimals,\n                    6,\n                  ),\n                ),\n                nameFrom: event.fromToken.symbol,\n                amountTo: commify(\n                  formatBNToString(event.toAmount, event.toToken.decimals, 6),\n                ),\n                nameTo: event.toToken.symbol,\n              })}\n            </TimelineStep>\n          )\n        } else if (event.type === \"withdraw\") {\n          const formattedAmount = commify(\n            formatBNToString(event.amount, event.synthToken.decimals, 6),\n          )\n          return (\n            <TimelineStep\n              isActive={false}\n              icon=\"check\"\n              key={i}\n              testId={`PendingSwapTimeline:event-${i + 1}`}\n            >\n              {getFormattedShortTime(event.timestamp)}{\" \"}\n              {t(\"withdrewNToken\", {\n                amount: formattedAmount,\n                name: event.synthToken.symbol,\n              })}\n            </TimelineStep>\n          )\n        }\n      })}\n    </div>\n  )\n}\nexport default PendingSwapTimeline\n\nconst TimelineStep = ({\n  isActive,\n  icon,\n  children,\n  testId,\n  withLine = true,\n}: React.PropsWithChildren<{\n  isActive: boolean\n  icon: string\n  testId?: string\n  withLine?: boolean\n}>) => {\n  let iconEl = null\n  if (icon === \"check\") {\n    iconEl = <CheckIcon />\n  } else if (icon === \"clock\") {\n    iconEl = <ClockIcon />\n  } else if (icon === \"arrow\") {\n    iconEl = <ArrowDownIcon />\n  }\n  return (\n    <div\n      className={classNames(\n        styles.timelineStep,\n        isActive ? styles.active : styles.inactive,\n      )}\n      data-testid={testId || null}\n    >\n      {withLine ? <Line /> : null}\n      {iconEl} {children}\n    </div>\n  )\n}\n\nconst Line = () => <div className={styles.timelineLine} />\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M1 8L8 15L15 8\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M8 15L8 0\"\n});\n\nfunction SvgThinArrowDown(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 16,\n    viewBox: \"0 0 16 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    className: \"stepArrow\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgThinArrowDown);\nexport default __webpack_public_path__ + \"static/media/thinArrowDown.4da15561.svg\";\nexport { ForwardRef as ReactComponent };","import { BigNumber } from \"@ethersproject/bignumber\"\nimport { SWAP_CONTRACT_GAS_ESTIMATES_MAP } from \"../constants/index\"\n\nexport function calculateGasEstimate(\n  methodName: keyof typeof SWAP_CONTRACT_GAS_ESTIMATES_MAP,\n): BigNumber {\n  return SWAP_CONTRACT_GAS_ESTIMATES_MAP[methodName]\n}\n","import \"./ReviewSwap.scss\"\n\nimport React, { ReactElement, useState } from \"react\"\nimport { SWAP_TYPES, TOKENS_MAP } from \"../constants\"\nimport { commify, formatBNToString, formatDeadlineToNumber } from \"../utils\"\nimport { formatGasToString, gasBNFromState } from \"../utils/gas\"\n\nimport { AppState } from \"../state/index\"\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport Button from \"./Button\"\nimport HighPriceImpactConfirmation from \"./HighPriceImpactConfirmation\"\nimport { ReactComponent as ThinArrowDown } from \"../assets/icons/thinArrowDown.svg\"\nimport { calculateGasEstimate } from \"../utils/gasEstimate\"\nimport { formatSlippageToString } from \"../utils/slippage\"\nimport { isHighPriceImpact } from \"../utils/priceImpact\"\nimport { parseUnits } from \"@ethersproject/units\"\nimport { useSelector } from \"react-redux\"\nimport { useTranslation } from \"react-i18next\"\n\ninterface Props {\n  onClose: () => void\n  onConfirm: () => void\n  data: {\n    from: { symbol: string; value: string }\n    to?: { symbol: string; value: string }\n    swapType: SWAP_TYPES\n    exchangeRateInfo?: {\n      pair: string\n      exchangeRate: BigNumber\n      priceImpact: BigNumber\n    }\n  }\n}\n\nfunction ReviewVirtualSwapSettlement({\n  onClose,\n  onConfirm,\n  data,\n}: Props): ReactElement {\n  const { t } = useTranslation()\n  const {\n    slippageCustom,\n    slippageSelected,\n    gasPriceSelected,\n    gasCustom,\n    transactionDeadlineSelected,\n    transactionDeadlineCustom,\n  } = useSelector((state: AppState) => state.user)\n  const { tokenPricesUSD, gasStandard, gasFast, gasInstant } = useSelector(\n    (state: AppState) => state.application,\n  )\n  const [\n    hasConfirmedHighPriceImpact,\n    setHasConfirmedHighPriceImpact,\n  ] = useState(false)\n  const fromToken = TOKENS_MAP[data.from.symbol]\n  const toToken = data.to ? TOKENS_MAP[data.to.symbol] : null\n  const isHighPriceImpactTxn = Boolean(\n    data.to?.value &&\n      data.exchangeRateInfo &&\n      isHighPriceImpact(data.exchangeRateInfo.priceImpact),\n  )\n  const deadline = formatDeadlineToNumber(\n    transactionDeadlineSelected,\n    transactionDeadlineCustom,\n  )\n  const gasPrice = gasBNFromState(\n    { gasStandard, gasFast, gasInstant },\n    gasPriceSelected,\n    gasCustom,\n  )\n  const gasAmount = calculateGasEstimate(\"virtualSwapSettleOrWithdraw\").mul(\n    gasPrice,\n  )\n  const gasValueUSD = tokenPricesUSD?.ETH\n    ? parseUnits(tokenPricesUSD.ETH.toFixed(2), 18) // USD / ETH  * 10^18\n        .mul(gasAmount) // GWEI\n        .div(BigNumber.from(10).pow(25)) // USD / ETH * GWEI * ETH / GWEI = USD\n    : null\n  const isWithdrawAction = !data.from\n  return (\n    <div className=\"reviewSwap\">\n      <h3>\n        {isWithdrawAction ? t(\"Review Withdraw\") : t(\"Review Settlement\")}\n      </h3>\n      <div className=\"swapTable\">\n        <div className=\"from\">\n          <img className=\"tokenIcon\" src={fromToken.icon} alt=\"icon\" />\n          <span className=\"tokenName\">{data.from.symbol}</span>\n          <div className=\"floatRight\">\n            <span>{commify(data.from.value)}</span>\n          </div>\n        </div>\n\n        {data.to && (\n          <>\n            <ThinArrowDown className=\"stepArrow\" />\n            <div className=\"to\">\n              <img className=\"tokenIcon\" src={toToken?.icon} alt=\"icon\" />\n              <span className=\"tokenName\">{data.to.symbol}</span>\n              <div className=\"floatRight\">\n                <span>{commify(data.to.value)}</span>\n              </div>\n            </div>\n          </>\n        )}\n\n        <div className=\"divider\" style={{ height: \"1px\", width: \"100%\" }} />\n        <div className=\"swapInfo\">\n          {data.exchangeRateInfo && (\n            <div className=\"priceTable\">\n              <span className=\"title\">{t(\"exchangeRate\")}</span>{\" \"}\n              <span className=\"pair\">{data.exchangeRateInfo.pair}</span>\n              <span className=\"value floatRight\">\n                {formatBNToString(data.exchangeRateInfo.exchangeRate, 18, 4)}\n              </span>\n            </div>\n          )}\n\n          <div className=\"row\">\n            <span className=\"title\">{t(\"gas\")}</span>\n            <span className=\"value floatRight\">\n              {formatGasToString(\n                { gasStandard, gasFast, gasInstant },\n                gasPriceSelected,\n                gasCustom,\n              )}{\" \"}\n              GWEI\n            </span>\n          </div>\n          {gasValueUSD && (\n            <div className=\"row\">\n              <span className=\"title\">{t(\"estimatedTxCost\")}</span>\n              <span className=\"value floatRight\">\n                {`≈$${commify(formatBNToString(gasValueUSD, 2, 2))}`}\n              </span>\n            </div>\n          )}\n          <div className=\"row\">\n            <span className=\"title\">{t(\"maxSlippage\")}</span>\n            <span className=\"value floatRight\">\n              {formatSlippageToString(slippageSelected, slippageCustom)}%\n            </span>\n          </div>\n          <div className=\"row\">\n            <span className=\"title\">{t(\"deadline\")}</span>\n            <span className=\"value floatRight\">\n              {deadline} {t(\"minutes\")}\n            </span>\n          </div>\n          {isHighPriceImpactTxn && (\n            <div className=\"row\">\n              <HighPriceImpactConfirmation\n                checked={hasConfirmedHighPriceImpact}\n                onCheck={(): void =>\n                  setHasConfirmedHighPriceImpact((prevState) => !prevState)\n                }\n              />\n            </div>\n          )}\n        </div>\n      </div>\n      <div className=\"bottom\">\n        <p>{t(\"estimatedOutput\")}</p>\n        <div className=\"buttonWrapper\">\n          <Button\n            onClick={onConfirm}\n            kind=\"primary\"\n            disabled={isHighPriceImpactTxn && !hasConfirmedHighPriceImpact}\n          >\n            {t(\"confirmSwap\")}\n          </Button>\n          <Button onClick={onClose} kind=\"cancel\">\n            {t(\"cancel\")}\n          </Button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ReviewVirtualSwapSettlement\n","import React, { ReactElement, useCallback, useState } from \"react\"\nimport {\n  calculateExchangeRate,\n  calculatePrice,\n  commify,\n  formatBNToString,\n  formatDeadlineToNumber,\n} from \"../utils\"\n\nimport { AppState } from \"../state\"\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport ConfirmTransaction from \"./ConfirmTransaction\"\nimport { ReactComponent as InfoIcon } from \"../assets/icons/info.svg\"\nimport { PendingSwap } from \"../hooks/usePendingSwapData\"\nimport PendingSwapExchange from \"./PendingSwapExchange\"\nimport PendingSwapTimeline from \"./PendingSwapTimeline\"\nimport ReviewVirtualSwapSettlement from \"./ReviewVirtualSwapSettlement\"\nimport { SWAP_TYPES } from \"../constants\"\nimport { Zero } from \"@ethersproject/constants\"\nimport { calculatePriceImpact } from \"../utils/priceImpact\"\nimport { formatUnits } from \"@ethersproject/units\"\nimport { gasBNFromState } from \"../utils/gas\"\nimport { notifyHandler } from \"../utils/notifyHandler\"\nimport styles from \"./PendingSwapModal.module.scss\"\nimport { subtractSlippage } from \"../utils/slippage\"\nimport { useBridgeContract } from \"../hooks/useContract\"\nimport { useEffect } from \"react\"\nimport { useSelector } from \"react-redux\"\nimport { useTranslation } from \"react-i18next\"\n\ntype ModalStep = \"timer\" | \"exchange\" | \"review\" | \"confirmation\"\nconst PendingSwapModal = ({\n  pendingSwap,\n  onClose,\n}: {\n  pendingSwap: PendingSwap\n  onClose: () => void\n}): ReactElement => {\n  const {\n    secondsRemaining,\n    tokenTo,\n    synthBalance,\n    synthTokenFrom,\n    itemId,\n    swapType,\n  } = pendingSwap\n  const { t } = useTranslation()\n  const {\n    slippageCustom,\n    slippageSelected,\n    gasPriceSelected,\n    gasCustom,\n    transactionDeadlineSelected,\n    transactionDeadlineCustom,\n  } = useSelector((state: AppState) => state.user)\n  const { tokenPricesUSD, gasStandard, gasFast, gasInstant } = useSelector(\n    (state: AppState) => state.application,\n  )\n  const bridgeContract = useBridgeContract()\n  const [settlementState, setSettlementState] = useState<{\n    action: \"withdraw\" | \"settle\" | null\n    amount: BigNumber\n  }>({\n    action: null,\n    amount: Zero,\n  })\n  const [\n    calculatedTokenAmount,\n    setCalculatedTokenAmount,\n  ] = useState<BigNumber | null>(null)\n  const [currentStep, setCurrentStep] = useState<ModalStep>(\n    secondsRemaining === 0 ? \"exchange\" : \"timer\",\n  )\n  useEffect(() => {\n    // Watch the timer and transition to the \"exchange\" state\n    if (currentStep === \"timer\" && secondsRemaining === 0) {\n      setCurrentStep(\"exchange\")\n    }\n  }, [secondsRemaining, currentStep])\n  useEffect(() => {\n    async function calcAmount() {\n      if (\n        !bridgeContract ||\n        settlementState.amount.isZero() ||\n        (swapType !== SWAP_TYPES.SYNTH_TO_TOKEN &&\n          swapType !== SWAP_TYPES.TOKEN_TO_TOKEN)\n      )\n        return\n      const calculatedAmount = await bridgeContract?.calcCompleteToToken(\n        itemId,\n        settlementState.amount,\n      )\n      setCalculatedTokenAmount(calculatedAmount)\n    }\n    void calcAmount()\n  }, [bridgeContract, settlementState, itemId, swapType])\n\n  const gasPrice = gasBNFromState(\n    { gasStandard, gasFast, gasInstant },\n    gasPriceSelected,\n    gasCustom,\n  ).mul(BigNumber.from(10).pow(9))\n  const handlePendingSwapSettlement = useCallback(\n    (action: \"withdraw\" | \"settle\", amount: BigNumber) => {\n      setSettlementState({\n        action,\n        amount,\n      })\n      setCurrentStep(\"review\")\n    },\n    [setSettlementState],\n  )\n\n  const handleConfirmSettlement = useCallback(async () => {\n    try {\n      setCurrentStep(\"confirmation\")\n      const txnArgs = { gasPrice }\n      let transaction\n      if (settlementState.action === \"withdraw\") {\n        transaction = await bridgeContract?.withdraw(\n          itemId,\n          settlementState.amount,\n          txnArgs,\n        )\n      } else if (\n        settlementState.action === \"settle\" &&\n        (swapType === SWAP_TYPES.SYNTH_TO_TOKEN ||\n          swapType === SWAP_TYPES.TOKEN_TO_TOKEN) &&\n        calculatedTokenAmount != null\n      ) {\n        const deadline = Math.round(\n          new Date().getTime() / 1000 +\n            60 *\n              formatDeadlineToNumber(\n                transactionDeadlineSelected,\n                transactionDeadlineCustom,\n              ),\n        )\n        transaction = await bridgeContract?.completeToToken(\n          itemId,\n          settlementState.amount,\n          subtractSlippage(\n            calculatedTokenAmount,\n            slippageSelected,\n            slippageCustom,\n          ),\n          deadline,\n          txnArgs,\n        )\n      } else if (\n        settlementState.action === \"settle\" &&\n        swapType === SWAP_TYPES.TOKEN_TO_SYNTH\n      ) {\n        transaction = await bridgeContract?.completeToSynth(itemId, txnArgs)\n      } else {\n        console.error(\"Unable to confirm settlement\")\n        console.table([\n          [\"action\", settlementState.action],\n          [\"swap type\", swapType],\n          [\"swap amount\", settlementState.amount.toString()],\n        ])\n        return\n      }\n      transaction && notifyHandler(transaction.hash, \"swap\")\n      await transaction?.wait()\n      onClose()\n    } catch (e) {\n      console.error(e)\n    }\n  }, [\n    settlementState,\n    bridgeContract,\n    itemId,\n    calculatedTokenAmount,\n    gasPrice,\n    onClose,\n    slippageCustom,\n    slippageSelected,\n    swapType,\n    transactionDeadlineCustom,\n    transactionDeadlineSelected,\n  ])\n\n  const minutesRemaining = Math.max(Math.ceil(secondsRemaining / 60), 0)\n  const fromAmount =\n    settlementState.action === \"settle\" &&\n    swapType === SWAP_TYPES.TOKEN_TO_SYNTH\n      ? synthBalance\n      : settlementState.amount\n  const formattedSynthBalance = commify(\n    formatBNToString(synthBalance, synthTokenFrom.decimals, 6),\n  )\n\n  return (\n    <>\n      {(currentStep === \"timer\" || currentStep === \"exchange\") && (\n        <div className={styles.virtualSwapModal}>\n          <div className={styles.headerContent}>\n            <b className={styles.title}>\n              {formattedSynthBalance} {synthTokenFrom.symbol} {\"->\"}{\" \"}\n              {tokenTo.symbol}\n            </b>\n          </div>\n          <div className={styles.centerContent}>\n            {currentStep === \"timer\" && (\n              <div className={styles.timer}>\n                <h2>\n                  {minutesRemaining} {t(\"minRemaining\")}\n                </h2>\n              </div>\n            )}\n            {currentStep === \"exchange\" && (\n              <PendingSwapExchange\n                pendingSwap={pendingSwap}\n                onPendingSwapSettlement={handlePendingSwapSettlement}\n              />\n            )}\n          </div>\n          <div className={styles.footerContent}>\n            <b className={styles.title}>{t(\"swapTimeline\")}</b>\n            <PendingSwapTimeline pendingSwap={pendingSwap} />\n            <div className={styles.about}>\n              <InfoIcon />\n              <a\n                href=\"https://docs.saddle.finance/saddle-faq#what-is-virtual-swap\"\n                target=\"_blank\"\n                rel=\"noreferrer\"\n              >\n                {t(\"aboutVirtualSwap\")}\n              </a>\n            </div>\n          </div>\n        </div>\n      )}\n      {currentStep === \"review\" && (\n        <ReviewVirtualSwapSettlement\n          onClose={onClose}\n          onConfirm={handleConfirmSettlement}\n          data={{\n            from: {\n              symbol: synthTokenFrom.symbol,\n              value: formatUnits(fromAmount, synthTokenFrom.decimals),\n            },\n            swapType,\n            ...(settlementState.action === \"settle\"\n              ? {\n                  to: {\n                    symbol: tokenTo.symbol,\n                    value: formatUnits(\n                      calculatedTokenAmount || Zero,\n                      tokenTo.decimals,\n                    ),\n                  },\n                  exchangeRateInfo: {\n                    pair: `${synthTokenFrom.symbol}/${tokenTo.symbol}`,\n                    priceImpact: calculatedTokenAmount\n                      ? calculatePriceImpact(\n                          calculatePrice(\n                            fromAmount,\n                            tokenPricesUSD?.[synthTokenFrom.symbol],\n                            synthTokenFrom.decimals,\n                          ),\n                          calculatePrice(\n                            calculatedTokenAmount || Zero,\n                            tokenPricesUSD?.[tokenTo.symbol],\n                            tokenTo.decimals,\n                          ),\n                        )\n                      : Zero,\n                    exchangeRate: calculateExchangeRate(\n                      settlementState.amount,\n                      synthTokenFrom.decimals,\n                      calculatedTokenAmount || Zero,\n                      tokenTo.decimals,\n                    ),\n                  },\n                }\n              : {}),\n          }}\n        />\n      )}\n      {currentStep === \"confirmation\" && <ConfirmTransaction />}\n    </>\n  )\n}\n\nexport default PendingSwapModal\n","export default __webpack_public_path__ + \"static/media/icon_down.cd4c2fb0.svg\";","import \"./ReviewSwap.scss\"\n\nimport React, { ReactElement, useState } from \"react\"\nimport { SWAP_TYPES, TOKENS_MAP, getIsVirtualSwap } from \"../constants\"\nimport { commify, formatBNToString } from \"../utils\"\n\nimport { AppState } from \"../state/index\"\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport Button from \"./Button\"\nimport HighPriceImpactConfirmation from \"./HighPriceImpactConfirmation\"\nimport { ReactComponent as ThinArrowDown } from \"../assets/icons/thinArrowDown.svg\"\nimport classnames from \"classnames\"\nimport { formatGasToString } from \"../utils/gas\"\nimport { formatSlippageToString } from \"../utils/slippage\"\nimport iconDown from \"../assets/icons/icon_down.svg\"\nimport { isHighPriceImpact } from \"../utils/priceImpact\"\nimport { useSelector } from \"react-redux\"\nimport { useTranslation } from \"react-i18next\"\n\ninterface Props {\n  onClose: () => void\n  onConfirm: () => void\n  data: {\n    from: { symbol: string; value: string }\n    to: { symbol: string; value: string }\n    exchangeRateInfo: {\n      pair: string\n      priceImpact: BigNumber\n      exchangeRate: BigNumber\n      route: string[]\n    }\n    swapType: SWAP_TYPES\n    txnGasCost: {\n      amount: BigNumber\n      valueUSD: BigNumber | null // amount * ethPriceUSD\n    }\n  }\n}\n\nfunction ReviewSwap({ onClose, onConfirm, data }: Props): ReactElement {\n  const { t } = useTranslation()\n  const {\n    slippageCustom,\n    slippageSelected,\n    gasPriceSelected,\n    gasCustom,\n  } = useSelector((state: AppState) => state.user)\n  const { gasStandard, gasFast, gasInstant } = useSelector(\n    (state: AppState) => state.application,\n  )\n  const [\n    hasConfirmedHighPriceImpact,\n    setHasConfirmedHighPriceImpact,\n  ] = useState(false)\n  const isHighPriceImpactTxn = isHighPriceImpact(\n    data.exchangeRateInfo.priceImpact,\n  )\n  const isVirtualSwap = getIsVirtualSwap(data.swapType)\n\n  return (\n    <div className=\"reviewSwap\">\n      <h3>{t(\"reviewSwap\")}</h3>\n      <div className=\"swapTable\">\n        {isVirtualSwap ? (\n          <VirtualSwapTokens data={data} />\n        ) : (\n          <DirectSwapTokens data={data} />\n        )}\n        {data.swapType === SWAP_TYPES.SYNTH_TO_SYNTH && (\n          <div className=\"row\">\n            <span className=\"aside\">\n              {t(\"virtualSwapSynthToSynthInfo\")}{\" \"}\n              <a href=\"https://blog.synthetix.io/how-fee-reclamation-rebates-work/\">\n                {t(\"learnMore\")}\n              </a>\n            </span>\n          </div>\n        )}\n        <div className=\"divider\" style={{ height: \"1px\", width: \"100%\" }} />\n        <div className=\"swapInfo\">\n          <div className=\"priceTable\">\n            <span className=\"title\">{t(\"price\")} </span>\n            <span className=\"pair\">{data.exchangeRateInfo.pair}</span>\n            <button className=\"exchange\">\n              <svg\n                width=\"24\"\n                height=\"20\"\n                viewBox=\"0 0 24 20\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  d=\"M17.4011 12.4196C17.4011 13.7551 16.5999 13.8505 16.4472 13.8505H6.62679L9.14986 11.3274L8.47736 10.6501L5.13869 13.9888C5.04986 14.0782 5 14.1991 5 14.3251C5 14.4511 5.04986 14.572 5.13869 14.6613L8.47736 18L9.14986 17.3275L6.62679 14.8044H16.4472C17.1054 14.8044 18.355 14.3274 18.355 12.4196V10.9888H17.4011V12.4196Z\"\n                  fill=\"#ffffff\"\n                />\n                <path\n                  d=\"M5.9539 7.58511C5.9539 6.24965 6.75519 6.15426 6.90781 6.15426H16.7283L14.2052 8.67733L14.8777 9.34984L18.2164 6.01117C18.3052 5.92181 18.355 5.80092 18.355 5.67492C18.355 5.54891 18.3052 5.42803 18.2164 5.33867L14.8777 2L14.2004 2.67727L16.7283 5.20035H6.90781C6.24962 5.20035 5 5.6773 5 7.58511V9.01597H5.9539V7.58511Z\"\n                  fill=\"#ffffff\"\n                />\n              </svg>\n            </button>\n            <span className=\"value floatRight\">\n              {formatBNToString(data.exchangeRateInfo.exchangeRate, 18, 6)}\n            </span>\n          </div>\n          <div className=\"row\">\n            <span className=\"title\">{t(\"gas\")}</span>\n            <span className=\"value floatRight\">\n              {formatGasToString(\n                { gasStandard, gasFast, gasInstant },\n                gasPriceSelected,\n                gasCustom,\n              )}{\" \"}\n              GWEI\n            </span>\n          </div>\n          {data.txnGasCost?.valueUSD && (\n            <div className=\"row\">\n              <span className=\"title\">{t(\"estimatedTxCost\")}</span>\n              <span className=\"value floatRight\">\n                {`≈$${commify(\n                  formatBNToString(data.txnGasCost.valueUSD, 2, 2),\n                )}`}\n              </span>\n            </div>\n          )}\n          <div className=\"row\">\n            <span className=\"title\">{t(\"maxSlippage\")}</span>\n            <span className=\"value floatRight\">\n              {formatSlippageToString(slippageSelected, slippageCustom)}%\n            </span>\n          </div>\n          {isHighPriceImpactTxn && (\n            <div className=\"row\">\n              <HighPriceImpactConfirmation\n                checked={hasConfirmedHighPriceImpact}\n                onCheck={(): void =>\n                  setHasConfirmedHighPriceImpact((prevState) => !prevState)\n                }\n              />\n            </div>\n          )}\n        </div>\n      </div>\n      <div className=\"bottom\">\n        <p>{t(\"estimatedOutput\")}</p>\n        <div className=\"buttonWrapper\">\n          <Button\n            onClick={onConfirm}\n            kind=\"primary\"\n            disabled={isHighPriceImpactTxn && !hasConfirmedHighPriceImpact}\n          >\n            {t(\"confirmSwap\")}\n          </Button>\n          <Button onClick={onClose} kind=\"cancel\">\n            {t(\"cancel\")}\n          </Button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction DirectSwapTokens({ data }: { data: Props[\"data\"] }) {\n  const fromToken = TOKENS_MAP[data.from.symbol]\n  const toToken = TOKENS_MAP[data.to.symbol]\n  return (\n    <>\n      <div className=\"row\">\n        <div style={{ display: \"flex\" }}>\n          <img className=\"tokenIcon\" src={fromToken.icon} alt=\"icon\" />\n          <span className=\"tokenName\">{data.from.symbol}</span>\n        </div>\n        <div>\n          <span>{data.from.value}</span>\n        </div>\n      </div>\n      <img src={iconDown} alt=\"to\" className=\"arrowDown\" />\n      <div className=\"row\">\n        <div style={{ display: \"flex\" }}>\n          <img className=\"tokenIcon\" src={toToken.icon} alt=\"icon\" />\n          <span className=\"tokenName\">{data.to.symbol}</span>\n        </div>\n\n        <div>\n          <span>{data.to.value}</span>\n        </div>\n      </div>\n    </>\n  )\n}\n\nfunction VirtualSwapTokens({ data }: { data: Props[\"data\"] }) {\n  const { t } = useTranslation()\n\n  return (\n    <>\n      {data.exchangeRateInfo.route.map((symbol, i) => {\n        const isFirst = i === 0\n        const isLast = i === data.exchangeRateInfo.route.length - 1\n        const token = TOKENS_MAP[symbol]\n        return (\n          <div className=\"row\" key={symbol}>\n            <div>\n              {!isFirst && !isLast && <ThinArrowDown className=\"stepArrow\" />}\n              <img className=\"tokenIcon\" src={token.icon} alt=\"icon\" />\n              <span className={classnames(\"tokenName\", { grey: isLast })}>\n                {token.symbol}\n              </span>\n\n              {(isFirst || isLast) && (\n                <span className=\"aside\">\n                  {\" \"}\n                  (\n                  {t(\"stepN\", {\n                    step: isFirst ? 1 : 2,\n                  })}\n                  )\n                </span>\n              )}\n            </div>\n            <div>\n              {isFirst && <span>{data.from.value}</span>}\n              {isLast && <span className=\"grey\">{data.to.value}</span>}\n            </div>\n          </div>\n        )\n      })}\n    </>\n  )\n}\n\nexport default ReviewSwap\n","import \"./SwapPage.scss\"\n\nimport { Button, Center } from \"@chakra-ui/react\"\nimport ConfirmTransaction, { ModalType } from \"./ConfirmTransaction\"\nimport { FaArrowDown, FaArrowUp } from \"react-icons/fa\"\nimport React, { ReactElement, useMemo, useState } from \"react\"\nimport { SWAP_TYPES, getIsVirtualSwap } from \"../constants\"\nimport { formatBNToPercentString, formatBNToString } from \"../utils\"\n\nimport AdvancedOptions from \"./AdvancedOptions\"\nimport { AppState } from \"../state/index\"\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport { ContractReceipt } from \"@ethersproject/contracts\"\nimport { ReactComponent as InfoIcon } from \"../assets/icons/info.svg\"\nimport Modal from \"./Modal\"\nimport { PendingSwap } from \"../hooks/usePendingSwapData\"\nimport PendingSwapModal from \"./PendingSwapModal\"\nimport ReviewSwap from \"./ReviewSwap\"\nimport { Slippages } from \"../state/user\"\nimport SwapInput from \"./SwapInput\"\nimport type { TokenOption } from \"../pages/Swap\"\nimport TopMenu from \"./TopMenu\"\nimport { Zero } from \"@ethersproject/constants\"\nimport classNames from \"classnames\"\nimport { commify } from \"../utils\"\nimport { formatUnits } from \"@ethersproject/units\"\nimport { isHighPriceImpact } from \"../utils/priceImpact\"\nimport { logEvent } from \"../utils/googleAnalytics\"\nimport { useActiveWeb3React } from \"../hooks\"\nimport { useSelector } from \"react-redux\"\nimport { useTranslation } from \"react-i18next\"\n\ninterface Props {\n  tokenOptions: {\n    from: TokenOption[]\n    to: TokenOption[]\n  }\n  exchangeRateInfo: {\n    pair: string\n    exchangeRate: BigNumber\n    priceImpact: BigNumber\n    route: string[]\n  }\n  txnGasCost: {\n    amount: BigNumber\n    valueUSD: BigNumber | null // amount * ethPriceUSD\n  }\n  error: string | null\n  swapType: SWAP_TYPES\n  fromState: { symbol: string; value: string; valueUSD: BigNumber }\n  toState: { symbol: string; value: string; valueUSD: BigNumber }\n  pendingSwaps: PendingSwap[]\n  onChangeFromToken: (tokenSymbol: string) => void\n  onChangeFromAmount: (amount: string) => void\n  onChangeToToken: (tokenSymbol: string) => void\n  onConfirmTransaction: () => Promise<ContractReceipt | void>\n  onClickReverseExchangeDirection: () => void\n}\n\nconst SwapPage = (props: Props): ReactElement => {\n  const { t } = useTranslation()\n  const { account } = useActiveWeb3React()\n  const {\n    tokenOptions,\n    exchangeRateInfo,\n    txnGasCost,\n    error,\n    fromState,\n    toState,\n    pendingSwaps,\n    swapType,\n    onChangeFromToken,\n    onChangeFromAmount,\n    onChangeToToken,\n    onConfirmTransaction,\n    onClickReverseExchangeDirection,\n  } = props\n\n  const [currentModal, setCurrentModal] = useState<string | null>(null)\n  const [activePendingSwap, setActivePendingSwap] = useState<string | null>(\n    null,\n  )\n  const { slippageCustom, slippageSelected } = useSelector(\n    (state: AppState) => state.user,\n  )\n\n  const fromToken = useMemo(() => {\n    return tokenOptions.from.find(({ symbol }) => symbol === fromState.symbol)\n  }, [tokenOptions.from, fromState.symbol])\n\n  const formattedPriceImpact = commify(\n    formatBNToPercentString(exchangeRateInfo.priceImpact, 18),\n  )\n  const formattedExchangeRate = commify(\n    formatBNToString(exchangeRateInfo.exchangeRate, 18, 6),\n  )\n  const formattedRoute = exchangeRateInfo.route.join(\" > \")\n  const formattedBalance = commify(\n    formatBNToString(fromToken?.amount || Zero, fromToken?.decimals || 0, 6),\n  )\n  const isVirtualSwap = getIsVirtualSwap(swapType)\n  const isHighSlippage =\n    slippageSelected === Slippages.OneTenth ||\n    (slippageSelected === Slippages.Custom &&\n      parseFloat(slippageCustom?.valueRaw || \"0\") < 0.5)\n\n  return (\n    <div className=\"swapPage\">\n      <TopMenu activeTab={\"swap\"} />\n      <div className=\"content\">\n        <div className=\"swapForm\">\n          <div className=\"row\">\n            <h3 className=\"swapTitle\">{t(\"from\")}</h3>\n            <div className=\"balanceContainer\">\n              <span>{t(\"balance\")}:</span>\n              &nbsp;\n              <a\n                onClick={() => {\n                  if (fromToken == null) return\n                  const amtStr = formatBNToString(\n                    fromToken.amount,\n                    fromToken.decimals || 0,\n                  )\n                  onChangeFromAmount(amtStr)\n                }}\n              >\n                {formattedBalance}\n              </a>\n            </div>\n          </div>\n          <div className=\"row\">\n            <SwapInput\n              tokens={tokenOptions.from.filter(\n                ({ symbol }) => symbol !== toState.symbol,\n              )}\n              onSelect={onChangeFromToken}\n              onChangeAmount={onChangeFromAmount}\n              selected={fromState.symbol}\n              inputValue={fromState.value}\n              inputValueUSD={fromState.valueUSD}\n              isSwapFrom={true}\n            />\n          </div>\n          <div className=\"row swapButtonContainer\">\n            <h3 className=\"swapTitle\">{t(\"to\")}</h3>\n            <Button\n              variant=\"light\"\n              width=\"50px\"\n              size=\"sm\"\n              onClick={onClickReverseExchangeDirection}\n              disabled={!fromState.symbol || !toState.symbol}\n            >\n              <FaArrowUp size=\"1em\" />\n              <FaArrowDown size=\"1em\" />\n            </Button>\n          </div>\n          <div className=\"row\">\n            <SwapInput\n              tokens={tokenOptions.to.filter(\n                ({ symbol }) => symbol !== fromState.symbol,\n              )}\n              onSelect={onChangeToToken}\n              selected={toState.symbol}\n              inputValue={toState.value}\n              inputValueUSD={toState.valueUSD}\n              isSwapFrom={false}\n            />\n          </div>\n          <div style={{ height: \"24px\" }}></div>\n          {fromState.symbol && toState.symbol && (\n            <div className=\"row\">\n              <div>\n                <span>{t(\"rate\")}</span>\n                &nbsp;\n                <span>{exchangeRateInfo.pair}</span>\n                &nbsp;\n                {/* <button className=\"exchange\">\n                  <svg\n                    width=\"24\"\n                    height=\"20\"\n                    viewBox=\"0 0 24 20\"\n                    fill=\"none\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path\n                      d=\"M17.4011 12.4196C17.4011 13.7551 16.5999 13.8505 16.4472 13.8505H6.62679L9.14986 11.3274L8.47736 10.6501L5.13869 13.9888C5.04986 14.0782 5 14.1991 5 14.3251C5 14.4511 5.04986 14.572 5.13869 14.6613L8.47736 18L9.14986 17.3275L6.62679 14.8044H16.4472C17.1054 14.8044 18.355 14.3274 18.355 12.4196V10.9888H17.4011V12.4196Z\"\n                      fill=\"#f9ebe0\"\n                    />\n                    <path\n                      d=\"M5.9539 7.58511C5.9539 6.24965 6.75519 6.15426 6.90781 6.15426H16.7283L14.2052 8.67733L14.8777 9.34984L18.2164 6.01117C18.3052 5.92181 18.355 5.80092 18.355 5.67492C18.355 5.54891 18.3052 5.42803 18.2164 5.33867L14.8777 2L14.2004 2.67727L16.7283 5.20035H6.90781C6.24962 5.20035 5 5.6773 5 7.58511V9.01597H5.9539V7.58511Z\"\n                      fill=\"#f9ebe0\"\n                    />\n                  </svg>\n                </button> */}\n              </div>\n              <span className=\"exchRate\">{formattedExchangeRate}</span>\n            </div>\n          )}\n          <div className=\"row\">\n            <span>{t(\"priceImpact\")}</span>\n            <span>{formattedPriceImpact}</span>\n          </div>\n          {formattedRoute && (\n            <>\n              <div className=\"row\">\n                <span>{t(\"route\")}</span>\n                <span>{formattedRoute}</span>\n              </div>\n              {isVirtualSwap && (\n                <div className=\"row\">\n                  <span></span>\n                  <span>\n                    <a\n                      href=\"https://docs.saddle.finance/saddle-faq#what-is-virtual-swap\"\n                      style={{ textDecoration: \"underline\" }}\n                      target=\"_blank\"\n                      rel=\"noreferrer\"\n                    >\n                      ({t(\"virtualSwap\")})\n                    </a>\n                  </span>\n                </div>\n              )}\n              {isVirtualSwap && isHighSlippage && (\n                <div className=\"exchangeWarning\">\n                  {t(\"lowSlippageVirtualSwapWarning\")}\n                </div>\n              )}\n            </>\n          )}\n        </div>\n        {account && isHighPriceImpact(exchangeRateInfo.priceImpact) ? (\n          <div className=\"exchangeWarning\">\n            {t(\"highPriceImpact\", {\n              rate: formattedPriceImpact,\n            })}\n          </div>\n        ) : null}\n        {isVirtualSwap && (\n          <div className=\"virtualSwapInfoBubble\">\n            <InfoIcon />\n            {t(\"crossAssetSwapsUseVirtualSwaps\")} {\"<\"}\n            <a\n              href=\"https://docs.saddle.finance/saddle-faq#what-is-virtual-swap\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n            >\n              {t(\"learnMore\")}\n            </a>\n            {\">\"}\n          </div>\n        )}\n        <AdvancedOptions />\n        <div className=\"pendingSwaps\">\n          {pendingSwaps.map((pendingSwap) => {\n            const formattedSynthBalance = commify(\n              formatUnits(\n                pendingSwap.synthBalance,\n                pendingSwap.synthTokenFrom.decimals,\n              ),\n            )\n            return (\n              <div\n                className=\"pendingSwapItem\"\n                key={pendingSwap.itemId?.toString()}\n                onClick={() => {\n                  setActivePendingSwap(pendingSwap.itemId)\n                  setCurrentModal(\"pendingSwap\")\n                }}\n              >\n                <span className=\"swapDetails\">\n                  {formattedSynthBalance} {pendingSwap.synthTokenFrom.symbol}{\" \"}\n                  {\"->\"} {pendingSwap.tokenTo.symbol}\n                </span>\n                <div className=\"swapTimeContainer\">\n                  <svg\n                    width=\"11\"\n                    height=\"11\"\n                    viewBox=\"0 0 11 11\"\n                    fill=\"none\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path\n                      fillRule=\"evenodd\"\n                      clipRule=\"evenodd\"\n                      d=\"M5.23467 1H5.5C7.98605 1 10 3.01525 10 5.49924C10 7.98311 7.98618 10 5.5 10C3.01388 10 1 7.98469 1 5.49924C1 4.30732 1.46423 3.22282 2.21973 2.41912L2.60641 2.78249C1.93974 3.49169 1.53066 4.4476 1.53066 5.49924C1.53066 7.69191 3.30721 9.46943 5.5 9.46943C7.69273 9.46943 9.46934 7.69046 9.46934 5.49924C9.46934 3.39724 7.83438 1.67581 5.76533 1.5393V2.96008H5.23467V1Z\"\n                      fill=\"black\"\n                      stroke=\"black\"\n                      strokeWidth=\"0.3\"\n                      strokeMiterlimit=\"10\"\n                    />\n                    <path\n                      d=\"M5.76204 5.52774L5.76861 5.53328L5.77577 5.53804C5.82206 5.5688 5.85082 5.61957 5.84998 5.67802L5.84997 5.67802V5.68017C5.84997 5.77327 5.77431 5.85 5.67911 5.85C5.62153 5.85 5.56861 5.81994 5.53676 5.77321L5.53241 5.76682L5.52742 5.76091L4.26017 4.26001L5.76204 5.52774Z\"\n                      fill=\"black\"\n                      stroke=\"black\"\n                      strokeWidth=\"0.3\"\n                    />\n                  </svg>\n                  <span className=\"swapTime\">\n                    {Math.ceil(pendingSwap.secondsRemaining / 60)} min.\n                  </span>\n                </div>\n              </div>\n            )\n          })}\n        </div>\n        <Center width=\"100%\" pb={6}>\n          <Button\n            variant=\"primary\"\n            size=\"lg\"\n            width=\"240px\"\n            onClick={(): void => {\n              setCurrentModal(\"review\")\n            }}\n            disabled={!!error || +toState.value <= 0}\n          >\n            {t(\"swap\")}\n          </Button>\n        </Center>\n        <div className={classNames({ showError: !!error }, \"error\")}>\n          {error}\n        </div>\n        <Modal\n          isOpen={!!currentModal}\n          onClose={(): void => setCurrentModal(null)}\n        >\n          {currentModal === \"review\" ? (\n            <ReviewSwap\n              onClose={(): void => setCurrentModal(null)}\n              onConfirm={() => {\n                setCurrentModal(\"confirm\")\n                logEvent(\"swap\", {\n                  from: fromState.symbol,\n                  to: toState.symbol,\n                })\n                onConfirmTransaction?.()\n                  .then((res) => {\n                    if (res?.status) {\n                      setCurrentModal(ModalType.SUCCESS)\n                    } else {\n                      setCurrentModal(ModalType.FAILED)\n                    }\n                  })\n                  .catch(() => {\n                    setCurrentModal(ModalType.FAILED)\n                  })\n              }}\n              data={{\n                from: fromState,\n                to: toState,\n                exchangeRateInfo,\n                txnGasCost,\n                swapType,\n              }}\n            />\n          ) : null}\n          {currentModal === ModalType.CONFIRM ? (\n            <ConfirmTransaction />\n          ) : currentModal === ModalType.FAILED ? (\n            <ConfirmTransaction\n              description={t(\"txFailed_swap\")}\n              title={t(\"failedTitle\")}\n              type={ModalType.FAILED}\n            />\n          ) : currentModal === ModalType.SUCCESS ? (\n            <ConfirmTransaction\n              title={t(\"successTitle\")}\n              description={t(\"txConfirmed_swap\")}\n              type={ModalType.SUCCESS}\n            />\n          ) : null}\n          {currentModal === \"pendingSwap\" ? (\n            <PendingSwapModal\n              pendingSwap={\n                pendingSwaps.find(\n                  (p) => p.itemId === activePendingSwap,\n                ) as PendingSwap\n              }\n              onClose={() => {\n                setCurrentModal(null)\n                setActivePendingSwap(null)\n              }}\n            />\n          ) : null}\n        </Modal>\n      </div>\n    </div>\n  )\n}\n\nexport default SwapPage\n","/* eslint @typescript-eslint/no-unsafe-assignment: 0 */\n/* eslint @typescript-eslint/no-unsafe-call: 0 */\nimport {\n  IS_VIRTUAL_SWAP_ACTIVE,\n  POOLS_MAP,\n  PoolName,\n  SWAP_TYPES,\n  TOKENS_MAP,\n} from \"../constants\"\nimport React, {\n  ReactElement,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from \"react\"\nimport {\n  SwapData,\n  SwapSide,\n  useCalculateSwapPairs,\n} from \"../hooks/useCalculateSwapPairs\"\nimport {\n  calculateExchangeRate,\n  calculatePrice,\n  shiftBNDecimals,\n} from \"../utils\"\nimport { formatUnits, parseUnits } from \"@ethersproject/units\"\nimport {\n  useBridgeContract,\n  usePoolContract,\n  useSynthetixExchangeRatesContract,\n} from \"../hooks/useContract\"\n\nimport { AppState } from \"../state/index\"\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport { ContractReceipt } from \"@ethersproject/contracts\"\nimport { PendingSwapsContext } from \"../providers/PendingSwapsProvider\"\nimport SwapPage from \"../components/SwapPage\"\nimport { Zero } from \"@ethersproject/constants\"\nimport { calculateGasEstimate } from \"../utils/gasEstimate\"\nimport { calculatePriceImpact } from \"../utils/priceImpact\"\nimport { debounce } from \"lodash\"\nimport { formatGasToString } from \"../utils/gas\"\nimport { useActiveWeb3React } from \"../hooks\"\nimport { useApproveAndSwap } from \"../hooks/useApproveAndSwap\"\nimport { usePoolTokenBalances } from \"../state/wallet/hooks\"\nimport { useSelector } from \"react-redux\"\nimport { useTranslation } from \"react-i18next\"\nimport { utils } from \"ethers\"\n\ntype FormState = {\n  error: null | string\n  from: {\n    value: string\n    valueUSD: BigNumber\n  } & SwapSide\n  to: {\n    value: BigNumber\n    valueUSD: BigNumber\n    valueSynth: BigNumber\n  } & SwapSide\n  priceImpact: BigNumber\n  exchangeRate: BigNumber\n  route: string[]\n  swapType: SWAP_TYPES\n  currentSwapPairs: SwapData[]\n}\nexport interface TokenOption {\n  symbol: string\n  name: string\n  valueUSD: BigNumber\n  amount: BigNumber\n  icon: string\n  decimals: number\n  swapType: SWAP_TYPES | null\n  isAvailable: boolean\n}\n\nconst EMPTY_FORM_STATE = {\n  error: null,\n  from: {\n    symbol: \"\",\n    value: \"0.0\",\n    valueUSD: Zero,\n  },\n  to: {\n    symbol: \"\",\n    value: Zero,\n    valueUSD: Zero,\n    valueSynth: Zero,\n  },\n  priceImpact: Zero,\n  exchangeRate: Zero,\n  route: [],\n  swapType: SWAP_TYPES.INVALID,\n  currentSwapPairs: [],\n}\n\nfunction Swap(): ReactElement {\n  const { t } = useTranslation()\n  const { chainId } = useActiveWeb3React()\n  const approveAndSwap = useApproveAndSwap()\n  const tokenBalances = usePoolTokenBalances()\n  const bridgeContract = useBridgeContract()\n  const snxEchangeRatesContract = useSynthetixExchangeRatesContract()\n  const calculateSwapPairs = useCalculateSwapPairs()\n  const pendingSwapData = useContext(PendingSwapsContext)\n  const { tokenPricesUSD, gasStandard, gasFast, gasInstant } = useSelector(\n    (state: AppState) => state.application,\n  )\n  const { gasPriceSelected, gasCustom } = useSelector(\n    (state: AppState) => state.user,\n  )\n\n  const [formState, setFormState] = useState<FormState>(EMPTY_FORM_STATE)\n  const [prevFormState, setPrevFormState] = useState<FormState>(\n    EMPTY_FORM_STATE,\n  )\n\n  const swapContract = usePoolContract(\n    formState.to.poolName as PoolName | undefined,\n  )\n  // build a representation of pool tokens for the UI\n  const tokenOptions = useMemo(() => {\n    const allTokens = Object.values(TOKENS_MAP)\n      .filter(({ isLPToken }) => !isLPToken)\n      .map(({ symbol, name, icon, decimals }) => {\n        const amount = tokenBalances?.[symbol] || Zero\n        return {\n          name,\n          icon,\n          symbol,\n          decimals,\n          amount,\n          valueUSD: calculatePrice(amount, tokenPricesUSD?.[symbol], decimals),\n          isAvailable: true,\n          swapType: null,\n        }\n      })\n      .sort(sortTokenOptions)\n    const toTokens =\n      formState.currentSwapPairs.length > 0\n        ? formState.currentSwapPairs\n            .map(({ to, type: swapType }) => {\n              const { symbol, name, icon, decimals } = TOKENS_MAP[to.symbol]\n              const amount = tokenBalances?.[symbol] || Zero\n              return {\n                name,\n                icon,\n                symbol,\n                decimals,\n                amount,\n                valueUSD: calculatePrice(\n                  amount,\n                  tokenPricesUSD?.[symbol],\n                  decimals,\n                ),\n                swapType,\n                isAvailable: IS_VIRTUAL_SWAP_ACTIVE\n                  ? swapType !== SWAP_TYPES.INVALID\n                  : swapType === SWAP_TYPES.DIRECT, // TODO replace once VSwaps are live\n              }\n            })\n            .sort(sortTokenOptions)\n        : allTokens\n    // from: all tokens always available. to: limited by selected \"from\" token.\n    return {\n      from: allTokens,\n      to: toTokens,\n    }\n  }, [tokenPricesUSD, tokenBalances, formState.currentSwapPairs])\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const calculateSwapAmount = useCallback(\n    debounce(async (formStateArg: FormState) => {\n      if (formStateArg.swapType === SWAP_TYPES.INVALID) return\n      if (tokenBalances === null || chainId == null)\n        // || bridgeContract == null\n        return\n      if (\n        formStateArg.from.tokenIndex === undefined ||\n        formStateArg.from.poolName === undefined ||\n        formStateArg.to.tokenIndex === undefined ||\n        formStateArg.to.poolName === undefined\n      )\n        return\n      const cleanedFormFromValue = (+formStateArg.from.value.replace(\n        /[$,]/g,\n        \"\",\n      )).toFixed(TOKENS_MAP[formStateArg.from.symbol].decimals)\n      if (\n        cleanedFormFromValue === \"\" ||\n        isNaN(+cleanedFormFromValue) ||\n        formStateArg.to.symbol === \"\"\n      ) {\n        setFormState((prevState) => ({\n          ...prevState,\n          to: {\n            ...prevState.to,\n            value: Zero,\n          },\n          priceImpact: Zero,\n        }))\n        return\n      }\n      const amountToGive = parseUnits(\n        cleanedFormFromValue,\n        TOKENS_MAP[formStateArg.from.symbol].decimals,\n      )\n      const tokenFrom = TOKENS_MAP[formStateArg.from.symbol]\n      const tokenTo = TOKENS_MAP[formStateArg.to.symbol]\n      let error: string | null = null\n      let amountToReceive = Zero\n      let amountMediumSynth = Zero\n      if (amountToGive.gt(tokenBalances[formStateArg.from.symbol] || Zero)) {\n        error = t(\"insufficientBalance\")\n      }\n      if (amountToGive.isZero()) {\n        amountToReceive = Zero\n      } else if (\n        formStateArg.swapType === SWAP_TYPES.TOKEN_TO_TOKEN &&\n        bridgeContract != null\n      ) {\n        const originPool = POOLS_MAP[formStateArg.from.poolName]\n        const destinationPool = POOLS_MAP[formStateArg.to.poolName]\n        const [\n          amountOutSynth,\n          amountOutToken,\n        ] = await bridgeContract.calcTokenToToken(\n          [originPool.addresses[chainId], destinationPool.addresses[chainId]],\n          formStateArg.from.tokenIndex,\n          formStateArg.to.tokenIndex,\n          amountToGive,\n        )\n        amountToReceive = amountOutToken\n        amountMediumSynth = amountOutSynth\n      } else if (\n        formStateArg.swapType === SWAP_TYPES.SYNTH_TO_TOKEN &&\n        bridgeContract != null\n      ) {\n        const destinationPool = POOLS_MAP[formStateArg.to.poolName]\n        const [\n          amountOutSynth,\n          amountOutToken,\n        ] = await bridgeContract.calcSynthToToken(\n          destinationPool.addresses[chainId],\n          utils.formatBytes32String(formStateArg.from.symbol),\n          formStateArg.to.tokenIndex,\n          amountToGive,\n        )\n        amountToReceive = amountOutToken\n        amountMediumSynth = amountOutSynth\n      } else if (\n        formStateArg.swapType === SWAP_TYPES.TOKEN_TO_SYNTH &&\n        bridgeContract != null\n      ) {\n        const originPool = POOLS_MAP[formStateArg.from.poolName]\n        amountToReceive = await bridgeContract.calcTokenToSynth(\n          originPool.addresses[chainId],\n          formStateArg.from.tokenIndex,\n          utils.formatBytes32String(formStateArg.to.symbol),\n          amountToGive,\n        )\n        // TO-DO: we need to clean this\n      } else if (\n        formStateArg.swapType === SWAP_TYPES.DIRECT &&\n        swapContract != null\n      ) {\n        if (\n          formStateArg.from.symbol === \"FRAX\" ||\n          formStateArg.from.symbol === \"atUST\" ||\n          formStateArg.to.symbol === \"FRAX\" ||\n          formStateArg.to.symbol === \"atUST\"\n        ) {\n          amountToReceive = await swapContract.get_dy_underlying(\n            formStateArg.from.tokenIndex,\n            formStateArg.to.tokenIndex,\n            amountToGive,\n          )\n        } else {\n          amountToReceive = await swapContract.get_dy(\n            formStateArg.from.tokenIndex,\n            formStateArg.to.tokenIndex,\n            amountToGive,\n          )\n        }\n      } else if (\n        formStateArg.swapType === SWAP_TYPES.SYNTH_TO_SYNTH &&\n        snxEchangeRatesContract != null\n      ) {\n        amountToReceive = await snxEchangeRatesContract.effectiveValue(\n          utils.formatBytes32String(formStateArg.from.symbol),\n          amountToGive,\n          utils.formatBytes32String(formStateArg.to.symbol),\n        )\n      }\n      const toValueUSD = calculatePrice(\n        amountToReceive,\n        tokenPricesUSD?.[tokenTo.symbol],\n        tokenTo.decimals,\n      )\n      const priceImpact = calculatePriceImpact(\n        formStateArg.from.valueUSD,\n        toValueUSD,\n      )\n      setFormState((prevState) => {\n        const newState = {\n          ...prevState,\n          error,\n          to: {\n            ...prevState.to,\n            value: amountToReceive,\n            valueUSD: toValueUSD,\n            valueSynth: amountMediumSynth,\n          },\n          priceImpact,\n          exchangeRate: calculateExchangeRate(\n            amountToGive,\n            tokenFrom.decimals,\n            amountToReceive,\n            tokenTo.decimals,\n          ),\n        }\n        setPrevFormState(newState)\n        return newState\n      })\n    }, 250),\n    [tokenBalances, swapContract, bridgeContract, chainId, tokenPricesUSD],\n  )\n\n  useEffect(() => {\n    // watch user input fields and calculate other fields if necessary\n    if (\n      prevFormState.from.symbol !== formState.from.symbol ||\n      prevFormState.from.value !== formState.from.value ||\n      prevFormState.to.symbol !== formState.to.symbol\n    ) {\n      void calculateSwapAmount(formState)\n    }\n  }, [prevFormState, formState, calculateSwapAmount])\n\n  function handleUpdateAmountFrom(value: string): void {\n    setFormState((prevState) => {\n      const nextState = {\n        ...prevState,\n        from: {\n          ...prevState.from,\n          value,\n          valueUSD: calculatePrice(\n            value,\n            tokenPricesUSD?.[prevState.from.symbol],\n          ),\n        },\n      }\n      return nextState\n    })\n  }\n  function handleReverseExchangeDirection(): void {\n    setFormState((prevState) => {\n      const swapPairs = calculateSwapPairs(TOKENS_MAP[prevState.to.symbol])\n      const activeSwapPair = swapPairs.find(\n        (pair) => pair.to.symbol === prevState.from.symbol,\n      )\n      const nextState = {\n        error: null,\n        from: {\n          symbol: prevState.to.symbol,\n          value: parseFloat(\n            (+prevState.from.value).toFixed(\n              TOKENS_MAP[prevState.to.symbol].decimals,\n            ),\n          ).toLocaleString(\"en-US\", { useGrouping: false }),\n          valueUSD: calculatePrice(\n            prevState.from.value,\n            tokenPricesUSD?.[prevState.to.symbol],\n          ),\n          poolName: activeSwapPair?.from.poolName,\n          tokenIndex: activeSwapPair?.from.tokenIndex,\n        },\n        to: {\n          symbol: prevState.from.symbol,\n          value: Zero,\n          valueUSD: Zero,\n          valueSynth: Zero,\n          poolName: activeSwapPair?.to.poolName,\n          tokenIndex: activeSwapPair?.to.tokenIndex,\n        },\n        priceImpact: Zero,\n        exchangeRate: Zero,\n        route: activeSwapPair?.route || [],\n        currentSwapPairs: swapPairs,\n        swapType: activeSwapPair?.type || SWAP_TYPES.INVALID,\n      }\n      return nextState\n    })\n  }\n  function handleUpdateTokenFrom(symbol: string): void {\n    if (symbol === formState.to.symbol) return handleReverseExchangeDirection()\n    setFormState((prevState) => {\n      const swapPairs = calculateSwapPairs(TOKENS_MAP[symbol])\n      const activeSwapPair = swapPairs.find(\n        (pair) => pair.to.symbol === prevState.to.symbol,\n      )\n      const isValidSwap =\n        IS_VIRTUAL_SWAP_ACTIVE && activeSwapPair\n          ? activeSwapPair.type !== SWAP_TYPES.INVALID\n          : activeSwapPair?.type === SWAP_TYPES.DIRECT\n      const nextState = {\n        ...prevState,\n        error: null,\n        from: {\n          ...prevState.from,\n          symbol,\n          valueUSD: calculatePrice(\n            prevState.from.value,\n            tokenPricesUSD?.[symbol],\n          ),\n          poolName: activeSwapPair?.from.poolName,\n          tokenIndex: activeSwapPair?.from.tokenIndex,\n        },\n        to: {\n          ...prevState.to,\n          value: Zero,\n          valueSynth: Zero,\n          valueUSD: Zero,\n          symbol: isValidSwap ? prevState.to.symbol : \"\",\n          poolName: isValidSwap ? activeSwapPair?.to.poolName : undefined,\n          tokenIndex: isValidSwap ? activeSwapPair?.to.tokenIndex : undefined,\n        },\n        priceImpact: Zero,\n        exchangeRate: Zero,\n        route: activeSwapPair?.route || [],\n        currentSwapPairs: swapPairs,\n        swapType: activeSwapPair?.type || SWAP_TYPES.INVALID,\n      }\n      return nextState\n    })\n  }\n\n  function handleUpdateTokenTo(symbol: string): void {\n    if (symbol === formState.from.symbol)\n      return handleReverseExchangeDirection()\n    setFormState((prevState) => {\n      const activeSwapPair = prevState.currentSwapPairs.find(\n        (pair) => pair.to.symbol === symbol,\n      )\n      const nextState = {\n        ...prevState,\n        from: {\n          ...prevState.from,\n          ...(activeSwapPair?.from || {}),\n        },\n        error: null,\n        to: {\n          ...prevState.to,\n          value: Zero,\n          valueSynth: Zero,\n          symbol,\n          valueUSD: Zero,\n          poolName: activeSwapPair?.to.poolName,\n          tokenIndex: activeSwapPair?.to.tokenIndex,\n        },\n        priceImpact: Zero,\n        exchangeRate: Zero,\n        route: activeSwapPair?.route || [],\n        swapType: activeSwapPair?.type || SWAP_TYPES.INVALID,\n      }\n      return nextState\n    })\n  }\n\n  async function handleConfirmTransaction(): Promise<ContractReceipt | void> {\n    const fromToken = TOKENS_MAP[formState.from.symbol]\n    if (\n      formState.swapType === SWAP_TYPES.INVALID ||\n      formState.from.tokenIndex === undefined ||\n      formState.from.poolName === undefined ||\n      formState.to.tokenIndex === undefined ||\n      formState.to.poolName === undefined\n    ) {\n      console.debug(\"Invalid transaction\", formState)\n      setFormState((prevState) => ({\n        ...EMPTY_FORM_STATE,\n        error: \"Invalid Transaction\",\n        from: {\n          ...prevState.from,\n          value: \"0.0\",\n          valueUSD: Zero,\n        },\n      }))\n      return\n    }\n    const receipt = await approveAndSwap({\n      bridgeContract: bridgeContract,\n      poolContract: swapContract,\n      from: {\n        amount: parseUnits(formState.from.value, fromToken.decimals),\n        symbol: formState.from.symbol,\n        poolName: formState.from.poolName,\n        tokenIndex: formState.from.tokenIndex,\n      },\n      to: {\n        amount: formState.to.value,\n        symbol: formState.to.symbol,\n        poolName: formState.to.poolName,\n        tokenIndex: formState.to.tokenIndex,\n        amountMediumSynth: formState.to.valueSynth,\n      },\n      swapType: formState.swapType,\n    })\n    // Clear input after deposit\n    setFormState((prevState) => ({\n      error: null,\n      from: {\n        ...prevState.from,\n        value: \"0.0\",\n        valueUSD: Zero,\n      },\n      to: {\n        ...prevState.to,\n        value: Zero,\n        valueUSD: Zero,\n      },\n      priceImpact: Zero,\n      exchangeRate: Zero,\n      route: prevState.route,\n      currentSwapPairs: prevState.currentSwapPairs,\n      swapType: prevState.swapType,\n    }))\n    return receipt\n  }\n\n  const gasPrice = BigNumber.from(\n    formatGasToString(\n      { gasStandard, gasFast, gasInstant },\n      gasPriceSelected,\n      gasCustom,\n    ),\n  )\n  const gasAmount = calculateGasEstimate(formState.swapType).mul(gasPrice) // units of gas * GWEI/Unit of gas\n\n  const txnGasCost = {\n    amount: gasAmount,\n    valueUSD: tokenPricesUSD?.ETH\n      ? parseUnits(tokenPricesUSD.ETH.toFixed(2), 18) // USD / ETH  * 10^18\n          .mul(gasAmount) // GWEI\n          .div(BigNumber.from(10).pow(25)) // USD / ETH * GWEI * ETH / GWEI = USD\n      : null,\n  }\n\n  return (\n    <SwapPage\n      pendingSwaps={pendingSwapData}\n      tokenOptions={tokenOptions}\n      exchangeRateInfo={{\n        pair: `${formState.from.symbol}/${formState.to.symbol}`,\n        exchangeRate: formState.exchangeRate,\n        priceImpact: formState.priceImpact,\n        route: formState.route,\n      }}\n      txnGasCost={txnGasCost}\n      fromState={formState.from}\n      toState={{\n        ...formState.to,\n        value:\n          formState.to.symbol === \"\"\n            ? \"0\"\n            : formatUnits(\n                formState.to.value,\n                TOKENS_MAP[formState.to.symbol].decimals,\n              ),\n      }}\n      swapType={formState.swapType}\n      onChangeFromAmount={handleUpdateAmountFrom}\n      onChangeFromToken={handleUpdateTokenFrom}\n      onChangeToToken={handleUpdateTokenTo}\n      error={formState.error}\n      onConfirmTransaction={handleConfirmTransaction}\n      onClickReverseExchangeDirection={handleReverseExchangeDirection}\n    />\n  )\n}\n\nexport default Swap\n\nconst sortTokenOptions = (a: TokenOption, b: TokenOption) => {\n  if (a.isAvailable !== b.isAvailable) {\n    return a.isAvailable ? -1 : 1\n  }\n  // if either is invalid, put the valid one first\n  if (a.swapType === SWAP_TYPES.INVALID || b.swapType === SWAP_TYPES.INVALID) {\n    return a.swapType === SWAP_TYPES.INVALID ? 1 : -1\n  }\n  if (a.valueUSD.eq(b.valueUSD)) {\n    const amountA = shiftBNDecimals(a.amount, 18 - a.decimals)\n    const amountB = shiftBNDecimals(b.amount, 18 - b.decimals)\n    return amountA.gt(amountB) ? -1 : 1\n  } else if (a.valueUSD.gt(b.valueUSD)) {\n    return -1\n  }\n  return 1\n}\n","/* eslint @typescript-eslint/no-explicit-any: 0 */\n/* eslint @typescript-eslint/no-unsafe-assignment: 0 */\n/* eslint @typescript-eslint/no-unsafe-call: 0 */\n/* eslint @typescript-eslint/no-unsafe-member-access: 0 */\n/* eslint @typescript-eslint/no-unsafe-return: 0 */\nimport { Contract, ContractReceipt } from \"@ethersproject/contracts\"\nimport { POOLS_MAP, SWAP_TYPES, TRANSACTION_TYPES } from \"../constants\"\n// import { notifyCustomError, notifyHandler } from \"../utils/notifyHandler\"\n\nimport { AppState } from \"../state\"\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport { Bridge } from \"../../types/ethers-contracts/Bridge\"\nimport { Erc20 } from \"../../types/ethers-contracts/Erc20\"\nimport { Zero } from \"@ethersproject/constants\"\nimport checkAndApproveTokenForTrade from \"../utils/checkAndApproveTokenForTrade\"\nimport { subtractSlippage } from \"../utils/slippage\"\nimport { updateLastTransactionTimes } from \"../state/application\"\nimport { useActiveWeb3React } from \".\"\nimport { useAllContracts } from \"./useContract\"\nimport { useDispatch } from \"react-redux\"\nimport { useSelector } from \"react-redux\"\nimport { utils } from \"ethers\"\n\ntype Contracts = {\n  poolContract: Contract | null\n  bridgeContract: Bridge | null\n}\ntype SwapSide = {\n  amount: BigNumber\n  symbol: string\n  poolName: string\n  tokenIndex: number\n}\ntype FormState = {\n  from: SwapSide\n  to: SwapSide & { amountMediumSynth: BigNumber }\n  swapType: Exclude<SWAP_TYPES, SWAP_TYPES.INVALID>\n}\ntype ApproveAndSwapStateArgument = FormState & Contracts\n\nexport function useApproveAndSwap(): (\n  state: ApproveAndSwapStateArgument,\n) => Promise<ContractReceipt | void> {\n  const dispatch = useDispatch()\n  const tokenContracts = useAllContracts()\n  const { account, chainId } = useActiveWeb3React()\n  const { slippageCustom, slippageSelected, infiniteApproval } = useSelector(\n    (state: AppState) => state.user,\n  )\n  return async function approveAndSwap(\n    state: ApproveAndSwapStateArgument,\n  ): Promise<ContractReceipt | void> {\n    try {\n      if (!account) throw new Error(\"Wallet must be connected\")\n      if (state.swapType === SWAP_TYPES.DIRECT && !state.poolContract)\n        throw new Error(\"Swap contract is not loaded\")\n      if (state.swapType !== SWAP_TYPES.DIRECT && !state.bridgeContract)\n        throw new Error(\"Bridge contract is not loaded\")\n      if (chainId === undefined) throw new Error(\"Unknown chain\")\n      // For each token being deposited, check the allowance and approve it if necessary\n      const tokenContract = tokenContracts?.[state.from.symbol] as Erc20\n      const gasPrice = Zero\n      // if (gasPriceSelected === GasPrices.Custom) {\n      //   gasPrice = gasCustom?.valueSafe\n      // } else if (gasPriceSelected === GasPrices.Fast) {\n      //   gasPrice = gasFast\n      // } else if (gasPriceSelected === GasPrices.Instant) {\n      //   gasPrice = gasInstant\n      // } else {\n      //   gasPrice = gasStandard\n      // }\n      // gasPrice = parseUnits(String(gasPrice) || \"45\", 9)\n      if (tokenContract == null) return\n      let addressToApprove = \"\"\n      if (state.swapType === SWAP_TYPES.DIRECT) {\n        addressToApprove = state.poolContract?.address as string\n      } else {\n        addressToApprove = state.bridgeContract?.address as string\n      }\n      await checkAndApproveTokenForTrade(\n        tokenContract,\n        addressToApprove,\n        account,\n        state.from.amount,\n        infiniteApproval,\n        gasPrice,\n        {\n          onTransactionError: () => {\n            throw new Error(\"Your transaction could not be completed\")\n          },\n        },\n      )\n      let swapTransaction\n      if (state.swapType === SWAP_TYPES.TOKEN_TO_TOKEN) {\n        const originPool = POOLS_MAP[state.from.poolName]\n        const destinationPool = POOLS_MAP[state.to.poolName]\n        const args = [\n          [\n            originPool.addresses[chainId],\n            destinationPool.addresses[chainId],\n          ] as [string, string],\n          state.from.tokenIndex,\n          state.to.tokenIndex,\n          state.from.amount,\n          subtractSlippage(\n            state.to.amountMediumSynth,\n            slippageSelected,\n            slippageCustom,\n          ), // subtract slippage from minSynth\n          { gasPrice },\n        ] as const\n        console.debug(\"swap - tokenToToken\", args)\n        swapTransaction = await (state.bridgeContract as Bridge).tokenToToken(\n          ...args,\n        )\n      } else if (state.swapType === SWAP_TYPES.SYNTH_TO_TOKEN) {\n        const destinationPool = POOLS_MAP[state.to.poolName]\n        const args = [\n          destinationPool.addresses[chainId],\n          utils.formatBytes32String(state.from.symbol),\n          state.to.tokenIndex,\n          state.from.amount,\n          subtractSlippage(\n            state.to.amountMediumSynth,\n            slippageSelected,\n            slippageCustom,\n          ), // subtract slippage from minSynth\n          { gasPrice },\n        ] as const\n        console.debug(\"swap - synthToToken\", args)\n        swapTransaction = await (state.bridgeContract as Bridge).synthToToken(\n          ...args,\n        )\n      } else if (state.swapType === SWAP_TYPES.TOKEN_TO_SYNTH) {\n        const originPool = POOLS_MAP[state.from.poolName]\n        const args = [\n          originPool.addresses[chainId],\n          state.from.tokenIndex,\n          utils.formatBytes32String(state.to.symbol),\n          state.from.amount,\n          subtractSlippage(state.to.amount, slippageSelected, slippageCustom),\n          { gasPrice },\n        ] as const\n        console.debug(\"swap - tokenToSynth\", args)\n        swapTransaction = await (state.bridgeContract as Bridge).tokenToSynth(\n          ...args,\n        )\n      } else if (state.swapType === SWAP_TYPES.DIRECT) {\n        if (\n          state.from.symbol === \"FRAX\" ||\n          state.from.symbol === \"atUST\" ||\n          state.to.symbol === \"FRAX\" ||\n          state.to.symbol === \"atUST\"\n        ) {\n          const args = [\n            state.from.tokenIndex,\n            state.to.tokenIndex,\n            state.from.amount,\n            subtractSlippage(state.to.amount, slippageSelected, slippageCustom),\n            { gasPrice },\n          ] as const\n          console.debug(\"exchange_underlying - direct\", args)\n          swapTransaction = await (state.poolContract as NonNullable<\n            typeof state.poolContract // we already check for nonnull above\n          >).exchange_underlying(...args)\n        } else {\n          const args = [\n            state.from.tokenIndex,\n            state.to.tokenIndex,\n            state.from.amount,\n            subtractSlippage(state.to.amount, slippageSelected, slippageCustom),\n            { gasPrice },\n          ] as const\n          console.debug(\"exchange - direct\", args)\n          swapTransaction = await (state.poolContract as NonNullable<\n            typeof state.poolContract // we already check for nonnull above\n          >).exchange(...args)\n        }\n      } else {\n        throw new Error(\"Invalid Swap Type, or contract not loaded\")\n      }\n\n      dispatch(\n        updateLastTransactionTimes({\n          [TRANSACTION_TYPES.SWAP]: Date.now(),\n        }),\n      )\n      return await swapTransaction?.wait()\n    } catch (e) {\n      console.error(e)\n    }\n  }\n}\n","import React, { useEffect, useState } from \"react\"\nimport { useEagerConnect, useInactiveListener } from \"../../hooks\"\n\nimport { NetworkContextName } from \"../../constants\"\nimport { network } from \"../../connectors\"\nimport { useWeb3React } from \"@web3-react/core\"\n\nexport default function Web3ReactManager({\n  children,\n}: {\n  children: JSX.Element\n}): JSX.Element | null {\n  const { active } = useWeb3React()\n  const {\n    active: networkActive,\n    error: networkError,\n    activate: activateNetwork,\n  } = useWeb3React(NetworkContextName)\n\n  // try to eagerly connect to an injected provider, if it exists and has granted access already\n  const triedEager = useEagerConnect()\n\n  // after eagerly trying injected, if the network connect ever isn't active or in an error state, activate it\n  useEffect(() => {\n    if (triedEager && !networkActive && !networkError && !active) {\n      void activateNetwork(network)\n    }\n  }, [triedEager, networkActive, networkError, activateNetwork, active])\n\n  // when there's no account connected, react to logins (broadly speaking) on the injected provider, if it exists\n  useInactiveListener(!triedEager)\n\n  // handle delayed loader state\n  const [showLoader, setShowLoader] = useState(false)\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      setShowLoader(true)\n    }, 600)\n\n    return (): void => {\n      clearTimeout(timeout)\n    }\n  }, [])\n\n  // on page load, do nothing until we've tried to connect to the injected connector\n  if (!triedEager) {\n    return null\n  }\n\n  // if the account context isn't active, and there's an error on the network context, it's an irrecoverable error\n  if (!active && networkError) {\n    return (\n      // TODO: style\n      <h1>Unknown error</h1>\n    )\n  }\n\n  // if neither context is active, spin\n  if (!active && !networkActive) {\n    // TODO: style and/or add proper loader\n    return showLoader ? <h1>Loading...</h1> : null\n  }\n\n  return children\n}\n","import \"./RadioButton.scss\"\n\nimport React, { ReactElement } from \"react\"\n\ninterface Props {\n  checked: boolean\n  onChange: () => void\n  label: string\n}\n\nexport default function RadioButton({\n  checked,\n  onChange,\n  label,\n}: Props): ReactElement {\n  return (\n    <div className=\"radio\">\n      <label className=\"radio_wrapper\">\n        <span className=\"radio_input\">\n          <input type=\"radio\" checked={checked} onChange={onChange} />\n          <span className=\"radio_control\"></span>\n        </span>\n        <span className=\"label\">{label}</span>\n      </label>\n    </div>\n  )\n}\n","import \"./ReviewWithdraw.scss\"\n\nimport React, { ReactElement, useState } from \"react\"\nimport { commify, formatBNToString } from \"../utils\"\n\nimport { AppState } from \"../state/index\"\nimport Button from \"./Button\"\nimport { GasPrices } from \"../state/user\"\nimport HighPriceImpactConfirmation from \"./HighPriceImpactConfirmation\"\nimport { ReviewWithdrawData } from \"./WithdrawPage\"\nimport { formatGasToString } from \"../utils/gas\"\nimport { formatSlippageToString } from \"../utils/slippage\"\nimport { isHighPriceImpact } from \"../utils/priceImpact\"\nimport { useSelector } from \"react-redux\"\nimport { useTranslation } from \"react-i18next\"\n\ninterface Props {\n  onClose: () => void\n  onConfirm: () => void\n  data: ReviewWithdrawData\n  gas: GasPrices\n}\n\nfunction ReviewWithdraw({ onClose, onConfirm, data }: Props): ReactElement {\n  const { t } = useTranslation()\n  const {\n    slippageCustom,\n    slippageSelected,\n    gasPriceSelected,\n    gasCustom,\n  } = useSelector((state: AppState) => state.user)\n  const { gasStandard, gasFast, gasInstant } = useSelector(\n    (state: AppState) => state.application,\n  )\n  const [\n    hasConfirmedHighPriceImpact,\n    setHasConfirmedHighPriceImpact,\n  ] = useState(false)\n  const isHighSlippageTxn = isHighPriceImpact(data.priceImpact)\n  return (\n    <div className=\"reviewWithdraw\">\n      <h3>{t(\"youWillReceive\")}</h3>\n      <div className=\"table\">\n        <div className=\"tokenList\">\n          {data.withdraw.map((token, index) => (\n            <div className=\"eachToken\" key={index}>\n              <div className=\"value\">\n                <span className=\"value\">{token.value}</span>\n              </div>\n              <div className=\"token\">\n                <img src={token.icon} alt=\"icon\" />\n                <span>{token.name}</span>\n              </div>\n            </div>\n          ))}\n        </div>\n        <div className=\"divider\"></div>\n        <div className=\"withdrawInfoItem\">\n          <span className=\"label\">{t(\"gas\")}</span>\n          <span className=\"value\">\n            {formatGasToString(\n              { gasStandard, gasFast, gasInstant },\n              gasPriceSelected,\n              gasCustom,\n            )}{\" \"}\n            GWEI\n          </span>\n        </div>\n        {data.txnGasCost?.valueUSD && (\n          <div className=\"withdrawInfoItem\">\n            <span className=\"label\">{t(\"estimatedTxCost\")}</span>\n            <span className=\"value\">\n              {`≈$${commify(formatBNToString(data.txnGasCost.valueUSD, 2, 2))}`}{\" \"}\n            </span>\n          </div>\n        )}\n        <div className=\"withdrawInfoItem\">\n          <span className=\"label\">{t(\"maxSlippage\")}</span>\n          <span className=\"value\">\n            {formatSlippageToString(slippageSelected, slippageCustom)}%\n          </span>\n        </div>\n        <div className=\"withdrawInfoItem\">\n          <span className=\"label\">{`${t(\"rates\")}:`}</span>\n          <div className=\"rates value\">\n            {data.rates.map((rate, index) => (\n              <span key={index}>\n                1 {rate.name} = ${rate.rate}\n              </span>\n            ))}\n          </div>\n        </div>\n      </div>\n      {isHighSlippageTxn && (\n        <div className=\"withdrawInfoItem\">\n          <HighPriceImpactConfirmation\n            checked={hasConfirmedHighPriceImpact}\n            onCheck={(): void =>\n              setHasConfirmedHighPriceImpact((prevState) => !prevState)\n            }\n          />\n        </div>\n      )}\n      <div className=\"bottom\">\n        <p>{t(\"estimatedOutput\")}</p>\n        <div className=\"buttonWrapper\">\n          <Button\n            onClick={onConfirm}\n            kind=\"primary\"\n            disabled={isHighSlippageTxn && !hasConfirmedHighPriceImpact}\n          >\n            {t(\"confirmWithdraw\")}\n          </Button>\n          <Button onClick={onClose} kind=\"cancel\">\n            {t(\"cancel\")}\n          </Button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ReviewWithdraw\n","import \"./WithdrawPage.scss\"\n\nimport {\n  Button,\n  Center,\n  SlideFade,\n  Slider,\n  SliderFilledTrack,\n  SliderMark,\n  SliderThumb,\n  SliderTrack,\n  Tab,\n  TabList,\n  TabPanel,\n  TabPanels,\n  Tabs,\n  Tooltip,\n} from \"@chakra-ui/react\"\nimport ConfirmTransaction, { ModalType } from \"./ConfirmTransaction\"\nimport { PoolDataType, UserShareType } from \"../hooks/usePoolData\"\nimport React, { ReactElement, useState } from \"react\"\n\nimport AdvancedOptions from \"./AdvancedOptions\"\nimport { AppState } from \"../state\"\nimport BackButton from \"./BackButton\"\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport { ContractReceipt } from \"@ethersproject/contracts\"\nimport { FRAX_STABLES_LP_POOL_NAME } from \"../constants\"\nimport Modal from \"./Modal\"\nimport MyShareCard from \"./MyShareCard\"\nimport PoolInfoCard from \"./PoolInfoCard\"\nimport RadioButton from \"./RadioButton\"\nimport ReviewWithdraw from \"./ReviewWithdraw\"\nimport TokenInput from \"./TokenInput\"\nimport TopMenu from \"./TopMenu\"\nimport { WithdrawFormState } from \"../hooks/useWithdrawFormState\"\nimport { Zero } from \"@ethersproject/constants\"\nimport classNames from \"classnames\"\nimport { formatBNToPercentString } from \"../utils\"\nimport { logEvent } from \"../utils/googleAnalytics\"\nimport { useSelector } from \"react-redux\"\nimport { useTranslation } from \"react-i18next\"\n\nexport interface ReviewWithdrawData {\n  withdraw: {\n    name: string\n    value: string\n    icon: string\n  }[]\n  rates: {\n    name: string\n    value: string\n    rate: string\n  }[]\n  slippage: string\n  priceImpact: BigNumber\n  txnGasCost: {\n    amount: BigNumber\n    valueUSD: BigNumber | null // amount * ethPriceUSD\n  }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\ninterface Props {\n  title: string\n  tokensData: Array<{\n    symbol: string\n    name: string\n    icon: string\n    inputValue: string\n    max: string\n  }>\n  reviewData: ReviewWithdrawData\n  selected?: { [key: string]: any }\n  poolData: PoolDataType | null\n  myShareData: UserShareType | null\n  formStateData: WithdrawFormState\n  onFormChange: (action: any) => void\n  onConfirmTransaction: () => Promise<ContractReceipt | void>\n}\n/* eslint-enable @typescript-eslint/no-explicit-any */\n\nconst WithdrawPage = (props: Props): ReactElement => {\n  const { t } = useTranslation()\n  const {\n    tokensData,\n    poolData,\n    myShareData,\n    onFormChange,\n    formStateData,\n    reviewData,\n    onConfirmTransaction,\n  } = props\n\n  const { gasPriceSelected } = useSelector((state: AppState) => state.user)\n  const [currentModal, setCurrentModal] = useState<string | null>(null)\n  const [sliderValue, setSliderValue] = React.useState(100)\n  const [showTooltip, setShowTooltip] = React.useState(false)\n\n  const [isOpen, setIsOpen] = useState(false)\n\n  const onSubmit = (): void => {\n    setCurrentModal(\"review\")\n  }\n  const noShare = !myShareData || myShareData.lpTokenBalance.eq(Zero)\n\n  return (\n    <div className={\"withdraw \" + classNames({ noShare: noShare })}>\n      <TopMenu activeTab={\"withdraw\"} />\n      <div className=\"content\">\n        <div className=\"left\">\n          <div className=\"form\">\n            <Tabs\n              isFitted\n              variant=\"primary\"\n              onChange={() =>\n                onFormChange({ fieldName: \"reset\", value: \"reset\" })\n              }\n            >\n              <h3>{t(\"withdraw\")}</h3>\n              <TabList>\n                <Tab>Single Token</Tab>\n                <Tab>Multi Token</Tab>\n              </TabList>\n              <TabPanels>\n                <TabPanel>\n                  {poolData?.name === FRAX_STABLES_LP_POOL_NAME && (\n                    <p className=\"outdatedInfo\">\n                      This pool is outdated. Please withdraw your liquidity and{\" \"}\n                      <a href=\"/#/pools/frax/deposit\">\n                        migrate to the new Frax pool\n                      </a>\n                      .\n                    </p>\n                  )}\n                  <div\n                    className=\"horizontalDisplay\"\n                    hidden={formStateData.error !== null}\n                  >\n                    <br />\n                    <span>Select a token: </span>\n                    <div>\n                      {tokensData.map((t) => {\n                        return (\n                          <RadioButton\n                            key={t.symbol}\n                            checked={formStateData.withdrawType === t.symbol}\n                            onChange={(): void => {\n                              onFormChange({\n                                fieldName: \"withdrawType\",\n                                value: t.symbol,\n                              })\n                              setIsOpen(true)\n                            }}\n                            label={t.name}\n                          />\n                        )\n                      })}\n                    </div>\n                  </div>\n                  <span>\n                    <small>% of share to withdraw:</small>\n                  </span>\n                  <div className=\"percentage\">\n                    <Slider\n                      id=\"slider\"\n                      defaultValue={100}\n                      min={0}\n                      max={100}\n                      mt=\"1\"\n                      onChange={(v) => {\n                        setSliderValue(v)\n                        onFormChange({\n                          fieldName: \"percentage\",\n                          value: String(v),\n                        })\n                      }}\n                      onMouseEnter={() => setShowTooltip(true)}\n                      onMouseLeave={() => setShowTooltip(false)}\n                    >\n                      <SliderMark value={25} mt=\"1\" ml=\"-2.5\" fontSize=\"sm\">\n                        25%\n                      </SliderMark>\n                      <SliderMark value={50} mt=\"1\" ml=\"-2.5\" fontSize=\"sm\">\n                        50%\n                      </SliderMark>\n                      <SliderMark value={75} mt=\"1\" ml=\"-2.5\" fontSize=\"sm\">\n                        75%\n                      </SliderMark>\n                      <SliderTrack>\n                        <SliderFilledTrack bg=\"#cc3a59\" />\n                      </SliderTrack>\n                      <Tooltip\n                        hasArrow\n                        bg=\"#cc3a59\"\n                        color=\"white\"\n                        placement=\"top\"\n                        isOpen={showTooltip}\n                        label={`${sliderValue}%`}\n                      >\n                        <SliderThumb />\n                      </Tooltip>\n                    </Slider>\n                  </div>\n                  {formStateData.error ? (\n                    <div className=\"error\">{formStateData.error.message}</div>\n                  ) : null}\n                  <SlideFade\n                    in={isOpen && !formStateData.error}\n                    hidden={!isOpen || formStateData.error !== null}\n                    offsetY=\"-30px\"\n                  >\n                    {tokensData.map((token, index) => (\n                      <div key={index}>\n                        <TokenInput\n                          {...token}\n                          max={undefined}\n                          readonly={true}\n                          // inputValue={parseFloat(token.inputValue).toFixed(5)}\n                          onChange={(value): void =>\n                            onFormChange({\n                              fieldName: \"tokenInputs\",\n                              value: value,\n                              tokenSymbol: token.symbol,\n                            })\n                          }\n                        />\n                        {index === tokensData.length - 1 ? (\n                          \"\"\n                        ) : (\n                          <div className=\"formSpace\"></div>\n                        )}\n                      </div>\n                    ))}\n                    <div className={\"transactionInfoContainer\"}>\n                      <div className=\"transactionInfo\">\n                        <div className=\"transactionInfoItem\">\n                          {reviewData.priceImpact.gte(0) ? (\n                            <span className=\"bonus\">{t(\"bonus\")}: </span>\n                          ) : (\n                            <span className=\"slippage\">{t(\"priceImpact\")}</span>\n                          )}\n                          <span\n                            className={\n                              \"value \" +\n                              (reviewData.priceImpact.gte(0)\n                                ? \"bonus\"\n                                : \"slippage\")\n                            }\n                          >\n                            {\" \"}\n                            {formatBNToPercentString(\n                              reviewData.priceImpact,\n                              18,\n                              4,\n                            )}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                  </SlideFade>\n                </TabPanel>\n                <TabPanel>\n                  {poolData?.name === FRAX_STABLES_LP_POOL_NAME && (\n                    <p className=\"outdatedInfo\">\n                      This pool is outdated. Please withdraw your liquidity and{\" \"}\n                      <a href=\"/#/pools/frax/deposit\">\n                        migrate to the new Frax pool\n                      </a>\n                      .\n                    </p>\n                  )}\n                  <p className=\"instructions\">\n                    Type in below the amounts of each token you want to\n                    withdraw.\n                  </p>\n                  {formStateData.error ? (\n                    <div className=\"error\">{formStateData.error.message}</div>\n                  ) : null}\n                  {tokensData.map((token, index) => (\n                    <div key={index}>\n                      <TokenInput\n                        {...token}\n                        // inputValue={parseFloat(token.inputValue).toFixed(5)}\n                        onChange={(value): void =>\n                          onFormChange({\n                            fieldName: \"tokenInputs\",\n                            value: value,\n                            tokenSymbol: token.symbol,\n                          })\n                        }\n                      />\n                      {index === tokensData.length - 1 ? (\n                        \"\"\n                      ) : (\n                        <div className=\"formSpace\"></div>\n                      )}\n                    </div>\n                  ))}\n                  <div className={\"transactionInfoContainer\"}>\n                    <div className=\"transactionInfo\">\n                      <div className=\"transactionInfoItem\">\n                        {reviewData.priceImpact.gte(0) ? (\n                          <span className=\"bonus\">{t(\"bonus\")}: </span>\n                        ) : (\n                          <span className=\"slippage\">{t(\"priceImpact\")}</span>\n                        )}\n                        <span\n                          className={\n                            \"value \" +\n                            (reviewData.priceImpact.gte(0)\n                              ? \"bonus\"\n                              : \"slippage\")\n                          }\n                        >\n                          {\" \"}\n                          {formatBNToPercentString(\n                            reviewData.priceImpact,\n                            18,\n                            4,\n                          )}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </TabPanel>\n              </TabPanels>\n            </Tabs>\n          </div>\n          <BackButton\n            route=\"/pools\"\n            wrapperClass=\"goBack\"\n            buttonText=\"Go back to pools\"\n          />\n          <AdvancedOptions />\n          <Center width=\"100%\" py={6}>\n            <Button\n              variant=\"primary\"\n              size=\"lg\"\n              width=\"240px\"\n              disabled={\n                noShare ||\n                !!formStateData.error ||\n                formStateData.lpTokenAmountToSpend.isZero()\n              }\n              onClick={onSubmit}\n            >\n              {t(\"withdraw\")}\n            </Button>\n          </Center>\n        </div>\n        <div className=\"infoPanels\">\n          <MyShareCard data={myShareData} />\n          <div\n            style={{\n              display: myShareData ? \"block\" : \"none\",\n            }}\n            className=\"divider\"\n          ></div>{\" \"}\n          <PoolInfoCard data={poolData} />\n        </div>\n        <Modal\n          isOpen={!!currentModal}\n          onClose={(): void => setCurrentModal(null)}\n        >\n          {currentModal === \"review\" ? (\n            <ReviewWithdraw\n              data={reviewData}\n              gas={gasPriceSelected}\n              onConfirm={(): void => {\n                setCurrentModal(\"confirm\")\n                logEvent(\n                  \"withdraw\",\n                  (poolData && { pool: poolData?.name }) || {},\n                )\n                onConfirmTransaction?.()\n                  .then((res) => {\n                    if (res?.status) {\n                      setCurrentModal(ModalType.SUCCESS)\n                    } else {\n                      setCurrentModal(ModalType.FAILED)\n                    }\n                  })\n                  .catch(() => {\n                    setCurrentModal(ModalType.FAILED)\n                  })\n              }}\n              onClose={(): void => setCurrentModal(null)}\n            />\n          ) : null}\n          {currentModal === ModalType.CONFIRM ? (\n            <ConfirmTransaction />\n          ) : currentModal === ModalType.FAILED ? (\n            <ConfirmTransaction\n              description={t(\"txFailed_withdraw\")}\n              title={t(\"failedTitle\")}\n              type={ModalType.FAILED}\n            />\n          ) : currentModal === ModalType.SUCCESS ? (\n            <ConfirmTransaction\n              title={t(\"successTitle\")}\n              description={t(\"txConfirmed_withdraw\")}\n              type={ModalType.SUCCESS}\n            />\n          ) : null}\n        </Modal>\n      </div>\n    </div>\n  )\n}\n\nexport default WithdrawPage\n","/* eslint-disable */\nimport {\n  NumberInputState,\n  numberInputStateCreator,\n} from \"../utils/numberInputState\"\nimport { POOLS_MAP, PoolName } from \"../constants\"\nimport { useCallback, useMemo, useState } from \"react\"\n\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport { debounce } from \"lodash\"\nimport { parseUnits } from \"@ethersproject/units\"\nimport { useActiveWeb3React } from \".\"\nimport { usePoolContract } from \"../hooks/useContract\"\nimport usePoolData from \"../hooks/usePoolData\"\n\ninterface ErrorState {\n  field: string\n  message: string\n}\nconst IMBALANCE = \"IMBALANCE\"\nconst ALL = \"ALL\"\n\ninterface TokenInputs {\n  [symbol: string]: NumberInputState\n}\nexport interface WithdrawFormState {\n  percentage: string | null\n  withdrawType: string\n  tokenInputs: TokenInputs\n  lpTokenAmountToSpend: BigNumber\n  error: ErrorState | null\n}\ntype FormFields = Exclude<keyof WithdrawFormState, \"error\">\nexport type WithdrawFormAction = {\n  fieldName: FormFields | \"reset\"\n  tokenSymbol?: string\n  value: string\n}\n\nexport default function useWithdrawFormState(\n  poolName: PoolName,\n): [WithdrawFormState, (action: WithdrawFormAction) => void] {\n  const POOL = POOLS_MAP[poolName]\n  const poolContract = usePoolContract(poolName)\n  const [, userShareData] = usePoolData(poolName)\n  const { account } = useActiveWeb3React()\n  const tokenInputStateCreators: {\n    [tokenSymbol: string]: ReturnType<typeof numberInputStateCreator>\n  } = useMemo(\n    () =>\n      POOL.poolTokens.reduce(\n        (acc, { symbol, decimals }) => ({\n          ...acc,\n          [symbol]: numberInputStateCreator(decimals, BigNumber.from(\"0\")),\n        }),\n        {},\n      ),\n    [POOL.poolTokens],\n  )\n  const tokenInputsEmptyState = useMemo(\n    () =>\n      POOL.poolTokens.reduce(\n        (acc, { symbol }) => ({\n          ...acc,\n          [symbol]: tokenInputStateCreators[symbol](\"0\"),\n        }),\n        {},\n      ),\n    [POOL.poolTokens, tokenInputStateCreators],\n  )\n  const formEmptyState = useMemo(\n    () => ({\n      percentage: \"\",\n      tokenInputs: tokenInputsEmptyState,\n      withdrawType: ALL,\n      error: null,\n      lpTokenAmountToSpend: BigNumber.from(\"0\"),\n    }),\n    [tokenInputsEmptyState],\n  )\n  const [formState, setFormState] = useState<WithdrawFormState>(formEmptyState)\n\n  // TODO: resolve this, it's a little unsafe\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const calculateAndUpdateDynamicFields = useCallback(\n    debounce(async (state: WithdrawFormState) => {\n      if (userShareData == null || poolContract == null || account == null)\n        return\n\n      let percentageRaw\n      if (state.percentage === \"\") {\n        percentageRaw = \"0\"\n      } else if (state.percentage === null) {\n        percentageRaw = \"100\"\n      } else {\n        percentageRaw = state.percentage\n      }\n\n      // LP * % to be withdrawn\n      const effectiveUserLPTokenBalance = userShareData.lpTokenBalance\n        .mul(parseUnits(percentageRaw, 5)) // difference between numerator and denominator because we're going from 100 to 1.00\n        .div(10 ** 7)\n\n      const txnAmounts: string[] = POOL.poolTokens.map((poolToken) => {\n        return state.tokenInputs[poolToken.symbol].valueSafe\n      })\n\n      // Use state.withdrawType to figure out which swap functions to use to calcuate next state\n      let nextState: WithdrawFormState | Record<string, unknown>\n      if (state.withdrawType === IMBALANCE) {\n        try {\n          const inputCalculatedLPTokenAmount = await poolContract.calc_token_amount(\n            txnAmounts,\n            false,\n          )\n          nextState = inputCalculatedLPTokenAmount.gt(\n            effectiveUserLPTokenBalance,\n          )\n            ? {\n                error: {\n                  field: \"tokenInputs\",\n                  message: \"Insufficient balance.\",\n                },\n                lpTokenAmountToSpend: BigNumber.from(\"0\"),\n              }\n            : {\n                error: null,\n                lpTokenAmountToSpend: inputCalculatedLPTokenAmount,\n              }\n        } catch (e) {\n          console.error(e)\n          // calculateTokenAmount errors if amount exceeds amount in pool\n          nextState = {\n            error: {\n              field: \"tokenInputs\",\n              message: \"Insufficient balance in pool.\",\n            },\n            lpTokenAmountToSpend: BigNumber.from(\"0\"),\n          }\n        }\n        // } else if (state.withdrawType === ALL) {\n        //   try {\n        //     const tokenAmounts = await (poolContract as RoseStablesPool).calculateRemoveLiquidity(\n        //       effectiveUserLPTokenBalance,\n        //     )\n        //     nextState = {\n        //       lpTokenAmountToSpend: effectiveUserLPTokenBalance,\n        //       tokenInputs: POOL.poolTokens.reduce(\n        //         (acc, { symbol }, i) => ({\n        //           ...acc,\n        //           [symbol]: tokenInputStateCreators[symbol](tokenAmounts[i]),\n        //         }),\n        //         {},\n        //       ),\n        //       error: null,\n        //     }\n        //   } catch {\n        //     nextState = {\n        //       error: {\n        //         field: \"tokenInputs\",\n        //         message: \"Insufficient balance in pool.\",\n        //       },\n        //     }\n        //   }\n      } else {\n        try {\n          if (state.withdrawType !== ALL && state.percentage) {\n            const tokenIndex = POOL.poolTokens.findIndex(\n              ({ symbol }) => symbol === state.withdrawType,\n            )\n            const tokenAmount = await poolContract.calc_withdraw_one_coin(\n              effectiveUserLPTokenBalance, // lp token to be burnt\n              tokenIndex,\n            ) // actual coin amount to be returned\n            nextState = {\n              lpTokenAmountToSpend: effectiveUserLPTokenBalance,\n              tokenInputs: POOL.poolTokens.reduce(\n                (acc, { symbol }, i) => ({\n                  ...acc,\n                  [symbol]: tokenInputStateCreators[symbol](\n                    i === tokenIndex ? tokenAmount : \"0\",\n                  ),\n                }),\n                {},\n              ),\n              error: null,\n            }\n          } else {\n            // This branch addresses a user manually inputting a value for one token\n            const inputCalculatedLPTokenAmount = await poolContract.calc_token_amount(\n              txnAmounts,\n              false,\n            )\n            nextState = inputCalculatedLPTokenAmount.gt(\n              effectiveUserLPTokenBalance,\n            )\n              ? {\n                  error: {\n                    field: \"tokenInputs\",\n                    message: \"Insufficient balance.\",\n                  },\n                  lpTokenAmountToSpend: BigNumber.from(\"0\"),\n                }\n              : {\n                  lpTokenAmountToSpend: inputCalculatedLPTokenAmount,\n                  error: null,\n                }\n          }\n        } catch {\n          nextState = {\n            error: {\n              field: \"tokenInputs\",\n              message: \"Insufficient balance in pool.\",\n            },\n          }\n        }\n      }\n      setFormState((prevState) => ({\n        ...prevState,\n        ...nextState,\n      }))\n    }, 250),\n    [userShareData, poolContract, POOL.poolTokens, tokenInputStateCreators],\n  )\n\n  const handleUpdateForm = useCallback(\n    (action: WithdrawFormAction): void => {\n      // update the form with user input immediately\n      // then call expensive debounced fn to update other fields\n      setFormState((prevState) => {\n        let nextState: WithdrawFormState | Record<string, unknown> = {}\n        if (action.fieldName === \"tokenInputs\") {\n          const {\n            tokenSymbol: tokenSymbolInput = \"\",\n            value: valueInput,\n          } = action\n          const newTokenInputs = {\n            ...prevState.tokenInputs,\n            [tokenSymbolInput]: tokenInputStateCreators[tokenSymbolInput](\n              valueInput,\n            ),\n          }\n          const activeInputTokens = POOL.poolTokens.filter(\n            ({ symbol }) => +newTokenInputs[symbol].valueRaw !== 0,\n          )\n          let withdrawType\n          if (activeInputTokens.length === 0) {\n            withdrawType = ALL\n          } else if (activeInputTokens.length === 1) {\n            withdrawType = activeInputTokens[0].symbol\n          } else {\n            withdrawType = IMBALANCE\n          }\n          nextState = {\n            withdrawType,\n            lpTokenAmountToSpend: BigNumber.from(\"0\"),\n            percentage: null,\n            tokenInputs: newTokenInputs,\n            error: null,\n          }\n        } else if (action.fieldName === \"percentage\") {\n          const isInputInvalid =\n            isNaN(+action.value) || +action.value < 0 || +action.value > 100\n          nextState = isInputInvalid\n            ? {\n                percentage: action.value,\n                lpTokenAmountToSpend: BigNumber.from(\"0\"),\n                error: { field: \"percentage\", message: \"Invalid input\" },\n                tokenInputs: tokenInputsEmptyState,\n              }\n            : {\n                withdrawType:\n                  prevState.withdrawType === IMBALANCE\n                    ? ALL\n                    : prevState.withdrawType,\n                percentage: action.value,\n                error: null,\n              }\n        } else if (action.fieldName === \"withdrawType\") {\n          nextState = {\n            tokenInputs: tokenInputsEmptyState,\n            percentage: prevState.percentage || \"100\",\n            withdrawType: action.value,\n            error: null,\n          }\n        } else if (action.fieldName === \"reset\") {\n          nextState = formEmptyState\n        }\n        const finalState = {\n          ...prevState,\n          ...nextState,\n        }\n        const pendingTokenInput =\n          action.fieldName === \"tokenInputs\" &&\n          POOL.poolTokens.every(({ symbol }) => {\n            const stateValue = finalState.tokenInputs[symbol].valueRaw\n            return isNaN(+stateValue) || +stateValue === 0\n          })\n        if (!finalState.error && !pendingTokenInput) {\n          void calculateAndUpdateDynamicFields(finalState)\n        }\n        return finalState\n      })\n    },\n    [\n      POOL.poolTokens,\n      calculateAndUpdateDynamicFields,\n      tokenInputStateCreators,\n      tokenInputsEmptyState,\n      formEmptyState,\n    ],\n  )\n\n  return [formState, handleUpdateForm]\n}\n","/* eslint-disable */\nimport { POOLS_MAP, PoolName } from \"../constants\"\nimport React, { ReactElement, useEffect, useState } from \"react\"\nimport WithdrawPage, { ReviewWithdrawData } from \"../components/WithdrawPage\"\nimport { commify, formatUnits, parseUnits } from \"@ethersproject/units\"\n\nimport { AppState } from \"../state\"\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport { ContractReceipt } from \"@ethersproject/contracts\"\nimport { Zero } from \"@ethersproject/constants\"\nimport { calculateGasEstimate } from \"../utils/gasEstimate\"\nimport { calculatePriceImpact } from \"../utils/priceImpact\"\nimport { formatBNToString } from \"../utils\"\nimport { formatSlippageToString } from \"../utils/slippage\"\nimport { useActiveWeb3React } from \"../hooks\"\nimport { useApproveAndWithdraw } from \"../hooks/useApproveAndWithdraw\"\nimport { usePoolContract } from \"../hooks/useContract\"\nimport usePoolData from \"../hooks/usePoolData\"\nimport { useSelector } from \"react-redux\"\nimport useWithdrawFormState from \"../hooks/useWithdrawFormState\"\n\ninterface Props {\n  poolName: PoolName\n}\nfunction Withdraw({ poolName }: Props): ReactElement {\n  const [poolData, userShareData] = usePoolData(poolName)\n  const [withdrawFormState, updateWithdrawFormState] = useWithdrawFormState(\n    poolName,\n  )\n  const { slippageCustom, slippageSelected } = useSelector(\n    (state: AppState) => state.user,\n  )\n  const { tokenPricesUSD } = useSelector((state: AppState) => state.application)\n  const approveAndWithdraw = useApproveAndWithdraw(poolName)\n  const poolContract = usePoolContract(poolName)\n  const { account } = useActiveWeb3React()\n  const POOL = POOLS_MAP[poolName]\n\n  const [estWithdrawBonus, setEstWithdrawBonus] = useState(Zero)\n  useEffect(() => {\n    // evaluate if a new withdraw will exceed the pool's per-user limit\n    async function calculateWithdrawBonus(): Promise<void> {\n      try {\n        if (\n          poolContract == null ||\n          userShareData == null ||\n          poolData == null ||\n          account == null\n        ) {\n          return\n        }\n        const tokenInputSum = parseUnits(\n          POOL.poolTokens\n            .reduce(\n              (sum, { symbol }) =>\n                sum + (+withdrawFormState.tokenInputs[symbol].valueRaw || 0),\n              0,\n            )\n            .toString(),\n          18,\n        )\n        let withdrawLPTokenAmount\n        if (poolData.totalLocked.gt(0) && tokenInputSum.gt(0)) {\n          const txnAmounts: string[] = POOL.poolTokens.map((poolToken) => {\n            return withdrawFormState.tokenInputs[poolToken.symbol].valueSafe\n          })\n          withdrawLPTokenAmount = await poolContract.calc_token_amount(\n            txnAmounts,\n            false,\n          )\n        } else {\n          // when pool is empty, estimate the lptokens by just summing the input instead of calling contract\n          withdrawLPTokenAmount = tokenInputSum\n        }\n        setEstWithdrawBonus(\n          calculatePriceImpact(\n            withdrawLPTokenAmount,\n            tokenInputSum,\n            poolData.virtualPrice,\n            true,\n          ),\n        )\n      } catch {\n        // pass here for now - fix later with hook\n      }\n    }\n    void calculateWithdrawBonus()\n  }, [\n    poolData,\n    withdrawFormState,\n    poolContract,\n    userShareData,\n    account,\n    POOL.poolTokens,\n  ])\n  async function onConfirmTransaction(): Promise<ContractReceipt | void> {\n    const {\n      withdrawType,\n      tokenInputs,\n      lpTokenAmountToSpend,\n    } = withdrawFormState\n    const receipt = await approveAndWithdraw({\n      tokenFormState: tokenInputs,\n      withdrawType,\n      lpTokenAmountToSpend,\n    })\n    updateWithdrawFormState({ fieldName: \"reset\", value: \"reset\" })\n\n    return receipt\n  }\n\n  const tokensData = React.useMemo(\n    () =>\n      POOL.poolTokens.map(({ name, symbol, icon, decimals }) => ({\n        name,\n        symbol,\n        icon,\n        inputValue: withdrawFormState.tokenInputs[symbol].valueRaw,\n        // TO-DO: all decimals have been casted to 18 - we need to change that\n        // to generic behavior so we don't have to cast back\n        max: formatBNToString(\n          userShareData?.tokens\n            .find((shareToken) => shareToken.symbol === symbol)\n            ?.value.div(BigNumber.from(10).pow(18 - decimals)) || Zero,\n          decimals,\n        ),\n      })),\n    [withdrawFormState, POOL.poolTokens, userShareData?.tokens],\n  )\n  const gasPrice = Zero\n  // const gasPrice = BigNumber.from(\n  //   formatGasToString(\n  //     { gasStandard, gasFast, gasInstant },\n  //     gasPriceSelected,\n  //     gasCustom,\n  //   ),\n  // )\n  const gasAmount = calculateGasEstimate(\"removeLiquidityImbalance\").mul(\n    gasPrice,\n  ) // units of gas * GWEI/Unit of gas\n\n  const txnGasCost = {\n    amount: gasAmount,\n    valueUSD: tokenPricesUSD?.ETH\n      ? parseUnits(tokenPricesUSD.ETH.toFixed(2), 18) // USD / ETH  * 10^18\n          .mul(gasAmount) // GWEI\n          .div(BigNumber.from(10).pow(25)) // USD / ETH * GWEI * ETH / GWEI = USD\n      : null,\n  }\n\n  const reviewWithdrawData: ReviewWithdrawData = {\n    withdraw: [],\n    rates: [],\n    slippage: formatSlippageToString(slippageSelected, slippageCustom),\n    priceImpact: estWithdrawBonus,\n    txnGasCost: txnGasCost,\n  }\n  POOL.poolTokens.forEach(({ name, decimals, icon, symbol }) => {\n    if (BigNumber.from(withdrawFormState.tokenInputs[symbol].valueSafe).gt(0)) {\n      reviewWithdrawData.withdraw.push({\n        name,\n        value: commify(\n          formatUnits(\n            withdrawFormState.tokenInputs[symbol].valueSafe,\n            decimals,\n          ),\n        ),\n        icon,\n      })\n      if (tokenPricesUSD != null) {\n        reviewWithdrawData.rates.push({\n          name,\n          value: formatUnits(\n            withdrawFormState.tokenInputs[symbol].valueSafe,\n            decimals,\n          ),\n          rate: commify(tokenPricesUSD[symbol]?.toFixed(2)),\n        })\n      }\n    }\n  })\n\n  return (\n    <WithdrawPage\n      title={poolName}\n      reviewData={reviewWithdrawData}\n      tokensData={tokensData}\n      poolData={poolData}\n      myShareData={userShareData}\n      formStateData={withdrawFormState}\n      onConfirmTransaction={onConfirmTransaction}\n      onFormChange={updateWithdrawFormState}\n    />\n  )\n}\n\nexport default Withdraw\n","/* eslint @typescript-eslint/no-explicit-any: 0 */\n/* eslint @typescript-eslint/no-unsafe-assignment: 0 */\n/* eslint @typescript-eslint/no-unsafe-call: 0 */\n/* eslint @typescript-eslint/no-unsafe-member-access: 0 */\n/* eslint @typescript-eslint/no-unsafe-return: 0 */\nimport { POOLS_MAP, PoolName, TRANSACTION_TYPES } from \"../constants\"\nimport { addSlippage, subtractSlippage } from \"../utils/slippage\"\nimport { useLPTokenContract, usePoolContract } from \"./useContract\"\nimport { AppState } from \"../state\"\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport { ContractReceipt } from \"@ethersproject/contracts\"\nimport { NumberInputState } from \"../utils/numberInputState\"\nimport { Zero } from \"@ethersproject/constants\"\nimport checkAndApproveTokenForTrade from \"../utils/checkAndApproveTokenForTrade\"\nimport { formatUnits } from \"@ethersproject/units\"\nimport { updateLastTransactionTimes } from \"../state/application\"\nimport { useActiveWeb3React } from \".\"\nimport { useDispatch } from \"react-redux\"\nimport { useSelector } from \"react-redux\"\n\ninterface ApproveAndWithdrawStateArgument {\n  tokenFormState: { [symbol: string]: NumberInputState }\n  withdrawType: string\n  lpTokenAmountToSpend: BigNumber\n}\n\nexport function useApproveAndWithdraw(\n  poolName: PoolName,\n): (state: ApproveAndWithdrawStateArgument) => Promise<ContractReceipt | void> {\n  const dispatch = useDispatch()\n  const poolContract = usePoolContract(poolName)\n  const { account } = useActiveWeb3React()\n  const { slippageCustom, slippageSelected, infiniteApproval } = useSelector(\n    (state: AppState) => state.user,\n  )\n  const lpTokenContract = useLPTokenContract(poolName)\n  const POOL = POOLS_MAP[poolName]\n\n  return async function approveAndWithdraw(\n    state: ApproveAndWithdrawStateArgument,\n  ): Promise<ContractReceipt | void> {\n    try {\n      if (!account) throw new Error(\"Wallet must be connected\")\n      if (!poolContract) throw new Error(\"Swap contract is not loaded\")\n      if (state.lpTokenAmountToSpend.isZero()) return\n      if (lpTokenContract == null) return\n      const gasPrice = Zero\n      // if (gasPriceSelected === GasPrices.Custom && gasCustom?.valueSafe) {\n      //   gasPrice = gasCustom.valueSafe\n      // } else if (gasPriceSelected === GasPrices.Standard) {\n      //   gasPrice = gasStandard\n      // } else if (gasPriceSelected === GasPrices.Instant) {\n      //   gasPrice = gasInstant\n      // } else {\n      //   gasPrice = gasFast\n      // }\n      // gasPrice = parseUnits(gasPrice?.toString() || \"45\", \"gwei\")\n      const allowanceAmount =\n        state.withdrawType === \"IMBALANCE\"\n          ? addSlippage(\n              state.lpTokenAmountToSpend,\n              slippageSelected,\n              slippageCustom,\n            )\n          : state.lpTokenAmountToSpend\n      await checkAndApproveTokenForTrade(\n        lpTokenContract,\n        poolContract.address,\n        account,\n        allowanceAmount,\n        infiniteApproval,\n        gasPrice,\n        {\n          onTransactionError: () => {\n            throw new Error(\"Your transaction could not be completed\")\n          },\n        },\n      )\n\n      console.debug(\n        `lpTokenAmountToSpend: ${formatUnits(state.lpTokenAmountToSpend, 18)}`,\n      )\n      let spendTransaction\n      if (state.withdrawType === \"ALL\") {\n        const txnAmounts: BigNumber[] = POOL.poolTokens.map((poolToken) => {\n          return subtractSlippage(\n            BigNumber.from(state.tokenFormState[poolToken.symbol].valueSafe),\n            slippageSelected,\n            slippageCustom,\n          )\n        })\n        spendTransaction = await poolContract.remove_liquidity(\n          state.lpTokenAmountToSpend,\n          txnAmounts,\n          {\n            gasPrice,\n          },\n        )\n      } else if (state.withdrawType === \"IMBALANCE\") {\n        const txnAmounts: string[] = POOL.poolTokens.map((poolToken) => {\n          return state.tokenFormState[poolToken.symbol].valueSafe\n        })\n        spendTransaction = await poolContract.remove_liquidity_imbalance(\n          txnAmounts,\n          addSlippage(\n            state.lpTokenAmountToSpend,\n            slippageSelected,\n            slippageCustom,\n          ),\n          {\n            gasPrice,\n          },\n        )\n      } else {\n        // state.withdrawType === [TokenSymbol]\n        spendTransaction = await poolContract.remove_liquidity_one_coin(\n          state.lpTokenAmountToSpend,\n          POOL.poolTokens.findIndex(\n            ({ symbol }) => symbol === state.withdrawType,\n          ),\n          subtractSlippage(\n            BigNumber.from(\n              state.tokenFormState[state.withdrawType || \"\"].valueSafe,\n            ),\n            slippageSelected,\n            slippageCustom,\n          ),\n          {\n            gasPrice,\n          },\n        )\n      }\n\n      // notifyHandler(spendTransaction.hash, \"withdraw\")\n\n      const receipt = await spendTransaction.wait()\n      dispatch(\n        updateLastTransactionTimes({\n          [TRANSACTION_TYPES.WITHDRAW]: Date.now(),\n        }),\n      )\n      return receipt\n    } catch (e) {\n      console.error(e)\n      // notifyCustomError(e as Error)\n    }\n  }\n}\n","import { AppDispatch } from \"../state\"\nimport retry from \"async-retry\"\nimport { updateSwapStats } from \"../state/application\"\n\nconst swapStatsURI = \"https://ipfs.saddle.exchange/swap-stats.json\"\n\nexport interface SwapStatsReponse {\n  [swapAddress: string]: {\n    oneDayVolume: number\n    APY: number\n    TVL: number\n  }\n}\n\nconst fetchSwapStatsNow = (): Promise<SwapStatsReponse> =>\n  fetch(`${swapStatsURI}`, { cache: \"no-cache\" })\n    .then((res) => {\n      if (res.status >= 200 && res.status < 300) {\n        return res.json()\n      }\n      throw new Error(\"Unable to fetch swap stats from IPFS\")\n    })\n    .then((body: SwapStatsReponse) => {\n      return body\n    })\n\nexport default async function fetchSwapStats(\n  dispatch: AppDispatch,\n): Promise<void> {\n  const dispatchUpdate = (swapStats: SwapStatsReponse) => {\n    dispatch(updateSwapStats(swapStats))\n  }\n  await retry(() => fetchSwapStatsNow().then(dispatchUpdate), {\n    retries: 3,\n  })\n}\n","import { ChainId, TOKENS_MAP, VETH2_SWAP_ADDRESSES } from \"../constants\"\nimport { formatUnits, parseUnits } from \"@ethersproject/units\"\n\nimport { AppDispatch } from \"../state\"\nimport { BigNumber } from \"@ethersproject/bignumber\"\nimport SWAP_ABI from \"../constants/abis/swapFlashLoan.json\"\nimport { SwapFlashLoan } from \"../../types/ethers-contracts/SwapFlashLoan\"\nimport { Web3Provider } from \"@ethersproject/providers\"\nimport { getContract } from \"./index\"\nimport retry from \"async-retry\"\nimport { updateTokensPricesUSD } from \"../state/application\"\n\nconst coinGeckoAPI = \"https://api.coingecko.com/api/v3/simple/price\"\nconst rosePriceApi =\n  \"https://raw.githubusercontent.com/RoseOnAurora/apr/master/rose.json\"\n\ninterface CoinGeckoReponse {\n  [tokenSymbol: string]: {\n    usd: number\n  }\n}\n\ninterface RosePriceResponse {\n  [tokenSymbol: string]: string\n}\nconst otherTokens = {\n  ETH: \"ethereum\",\n  WETH: \"ethereum\",\n  VETH2: \"ethereum\", // TODO: pull vETH2 price once it's added to coingecko\n  BTC: \"bitcoin\",\n  KEEP: \"keep-network\",\n  SGT: \"sharedstake-governance-token\",\n  ALCX: \"alchemix\",\n}\n\nexport default function fetchTokenPricesUSD(\n  dispatch: AppDispatch,\n  chainId?: ChainId,\n  library?: Web3Provider,\n): void {\n  const tokens = Object.values(TOKENS_MAP)\n  const tokenIds = Array.from(\n    new Set(\n      tokens.map(({ geckoId }) => geckoId).concat(Object.values(otherTokens)),\n    ),\n  )\n  void retry(\n    () =>\n      fetch(`${coinGeckoAPI}?ids=${encodeURIComponent(\n        tokenIds.join(\",\"),\n      )}&vs_currencies=usd\n    `)\n        .then((res) => res.json())\n        .then(async (body: CoinGeckoReponse) => {\n          const otherTokensResult = Object.keys(otherTokens).reduce(\n            (acc, key) => {\n              return {\n                ...acc,\n                [key]: body?.[otherTokens[key as keyof typeof otherTokens]].usd,\n              }\n            },\n            {} as { [symbol: string]: number },\n          )\n          let result = tokens.reduce((acc, token) => {\n            return { ...acc, [token.symbol]: body?.[token.geckoId]?.usd }\n          }, otherTokensResult)\n          result.alETH = result?.ETH || result.alETH || 0 // TODO: remove once CG price is fixed\n          if (chainId === ChainId.MAINNET) {\n            const vEth2Price = await getVeth2Price(\n              result?.ETH,\n              chainId,\n              library,\n            )\n            result.VETH2 = vEth2Price || result?.ETH | 0\n          }\n          void fetch(rosePriceApi)\n            .then((res) => res.json())\n            .then((body: RosePriceResponse[]) => {\n              result = {\n                ...result,\n                ROSE: +body[0].price_of_rose || 0,\n                stRose: +body[0].price_of_strose || 0,\n              }\n              dispatch(updateTokensPricesUSD(result))\n            })\n        }),\n    { retries: 3 },\n  )\n}\n\nasync function getVeth2Price(\n  etherPrice: number,\n  chainId?: ChainId,\n  library?: Web3Provider,\n): Promise<number> {\n  if (!etherPrice || !library) return 0\n  try {\n    const swapContract = getContract(\n      chainId ? VETH2_SWAP_ADDRESSES[chainId] : \"\",\n      SWAP_ABI,\n      library,\n    ) as SwapFlashLoan\n    const veth2ToEthRate = await swapContract.calculateSwap(\n      1,\n      0,\n      BigNumber.from(10).pow(18),\n    )\n    const eth = parseUnits(etherPrice.toString(), 18)\n    const vEth2Price = parseFloat(formatUnits(veth2ToEthRate.mul(eth), 36))\n    return vEth2Price\n  } catch (e) {\n    console.error(e)\n    return etherPrice\n  }\n}\n","import \"../styles/global.scss\"\nimport \"./NotifyStyle.scss\"\n\nimport { AppDispatch, AppState } from \"../state\"\nimport { BLOCK_TIME, FARMS_MAP, POOLS_MAP } from \"../constants\"\nimport React, { ReactElement, Suspense, useCallback, useEffect } from \"react\"\nimport { Route, Switch } from \"react-router-dom\"\nimport { isChainSupportedByNotify, notify } from \"../utils/notifyHandler\"\nimport { useDispatch, useSelector } from \"react-redux\"\n\n// import Banner from \"../components/Banner\"\nimport BottomMenu from \"../components/BottomMenu\"\nimport Deposit from \"./Deposit\"\nimport Farm from \"./Farm\"\nimport Farms from \"./Farms\"\nimport PendingSwapsProvider from \"../providers/PendingSwapsProvider\"\nimport Pools from \"./Pools\"\nimport Stake from \"./Stake\"\nimport Swap from \"./Swap\"\nimport Web3ReactManager from \"../components/Web3ReactManager\"\nimport Withdraw from \"./Withdraw\"\nimport fetchFarmStats from \"../utils/fetchFarmStats\"\nimport fetchSwapStats from \"../utils/getSwapStats\"\nimport fetchTokenPricesUSD from \"../utils/updateTokenPrices\"\nimport { useActiveWeb3React } from \"../hooks\"\nimport usePoller from \"../hooks/usePoller\"\n\nexport default function App(): ReactElement {\n  const { chainId } = useActiveWeb3React()\n  const { userDarkMode } = useSelector((state: AppState) => state.user)\n  // const bannerBg = userDarkMode ? \"#d2f1e4\" : \"#a2d2ff\"\n\n  useEffect(() => {\n    notify?.config({\n      networkId: isChainSupportedByNotify(chainId) ? chainId : undefined,\n      darkMode: userDarkMode,\n    })\n  }, [chainId, userDarkMode])\n  return (\n    <Suspense fallback={null}>\n      <Web3ReactManager>\n        <GasAndTokenPrices>\n          <PendingSwapsProvider>\n            {/* <Banner\n              variant=\"solid\"\n              color=\"black\"\n              bg={bannerBg}\n              bannerTitle=\"\"\n              bannerMessage=\"\"\n              status=\"info\"\n              position=\"sticky\"\n              top=\"0\"\n              zIndex=\"3\"\n              border=\"none\"\n              boxShadow=\"2px 2px 12px rgba(68, 64, 64, 0.14)\"\n            /> */}\n            <Switch>\n              <Route exact path=\"/\" component={Swap} />\n              <Route exact path=\"/pools\" component={Pools} />\n              <Route exact path=\"/farms\" component={Farms} />\n              <Route exact path=\"/stake\" component={Stake} />\n              {Object.values(POOLS_MAP).map(({ name, route }) => (\n                <Route\n                  exact\n                  path={`/pools/${route}/deposit`}\n                  render={(props) => <Deposit {...props} poolName={name} />}\n                  key={`${name}-deposit`}\n                />\n              ))}\n              {Object.values(POOLS_MAP).map(({ name, route }) => (\n                <Route\n                  exact\n                  path={`/pools/${route}/withdraw`}\n                  render={(props) => <Withdraw {...props} poolName={name} />}\n                  key={`${name}-withdraw`}\n                />\n              ))}\n              {Object.values(FARMS_MAP).map(({ name, route }) => (\n                <Route\n                  exact\n                  path={`/farms/${route}`}\n                  render={(props) => <Farm {...props} farmName={name} />}\n                  key={`${name}-farm`}\n                ></Route>\n              ))}\n            </Switch>\n            <BottomMenu />\n          </PendingSwapsProvider>\n        </GasAndTokenPrices>\n      </Web3ReactManager>\n    </Suspense>\n  )\n}\n\nfunction GasAndTokenPrices({\n  children,\n}: React.PropsWithChildren<unknown>): ReactElement {\n  const dispatch = useDispatch<AppDispatch>()\n  const { chainId, library } = useActiveWeb3React()\n\n  // const fetchAndUpdateGasPrice = useCallback(() => {\n  //   void fetchGasPrices(dispatch)\n  // }, [dispatch])\n  const fetchAndUpdateTokensPrice = useCallback(() => {\n    fetchTokenPricesUSD(dispatch, chainId, library)\n  }, [dispatch, chainId, library])\n  const fetchAndUpdateSwapStats = useCallback(() => {\n    void fetchSwapStats(dispatch)\n  }, [dispatch])\n  const fetchAndUpdateFarmStats = useCallback(() => {\n    void fetchFarmStats(dispatch)\n  }, [dispatch])\n  // usePoller(fetchAndUpdateGasPrice, 5 * 1000)\n  usePoller(fetchAndUpdateTokensPrice, BLOCK_TIME * 3)\n  usePoller(fetchAndUpdateSwapStats, BLOCK_TIME * 280) // ~ 1hr\n  usePoller(fetchAndUpdateFarmStats, BLOCK_TIME * 70) // ~ 15min\n  return <>{children}</>\n}\n","import { AppDispatch } from \"../state\"\nimport retry from \"async-retry\"\nimport { updateFarmStats } from \"../state/application\"\nconst farmStatsApi =\n  \"https://raw.githubusercontent.com/RoseOnAurora/apr/master/data.json\"\n\ninterface FarmStatsResponse {\n  deposited_token_address: string\n  farm_tvl: string\n  apr: string\n  name: string\n  farm_address: string\n}\n\nexport interface FarmStats {\n  apr: string\n  tvl: string\n}\n\nexport default function fetchFarmStats(dispatch: AppDispatch): void {\n  void retry(() =>\n    fetch(farmStatsApi)\n      .then((res) => res.json())\n      .then((body: FarmStatsResponse[]) => {\n        body.map((b) => {\n          dispatch(\n            updateFarmStats({\n              [b?.name]: {\n                apr: b?.apr,\n                tvl: b?.farm_tvl,\n              },\n            }),\n          )\n        })\n      }),\n  )\n}\n","import { ThemeConfig, extendTheme } from \"@chakra-ui/react\"\n\nimport components from \"./components/index\"\n\n// import components from \"./components\"\n\nconst config: ThemeConfig = {\n  initialColorMode: \"light\",\n  useSystemColorMode: false,\n}\n\nconst colors = {\n  red: {\n    50: \"#ffe3e3\",\n    100: \"#ffb2b3\",\n    200: \"#fd8282\",\n    300: \"#fb5151\",\n    400: \"#f92120\",\n    500: \"#df0a06\", // base\n    600: \"#ae0404\",\n    700: \"#7d0102\",\n    800: \"#4d0000\",\n    900: \"#1f0000\",\n  },\n  teal: {\n    50: \"#d7fffe\",\n    100: \"#abfff7\",\n    200: \"#7afff0\",\n    300: \"#48ffea\",\n    400: \"#1affe4\",\n    500: \"#00e6ca\", // base\n    600: \"#00b39d\",\n    700: \"#008170\",\n    800: \"#004e43\",\n    900: \"#001c16\",\n  },\n  purple: {\n    50: \"#f4e3ff\",\n    100: \"#d5b2ff\",\n    200: \"#b87fff\",\n    300: \"#9b4cff\",\n    400: \"#7e1aff\",\n    500: \"#6500e6\", // base\n    600: \"#4e00b4\",\n    700: \"#380082\",\n    800: \"#220050\",\n    900: \"#0d0020\",\n  },\n  gold: {\n    50: \"#fff6e1\",\n    100: \"#fbe5b7\",\n    200: \"#f7d38a\",\n    300: \"#f4c25c\",\n    400: \"#f1b030\",\n    500: \"#d7971b\", // base\n    600: \"#a77513\",\n    700: \"#77540c\",\n    800: \"#483204\",\n    900: \"#1a1100\",\n  },\n}\n\nconst fonts = {\n  body: \"Neue Machina, sans-serif\",\n  heading: \"Neue Machina, sans-serif\",\n  mono: \"Neue Machina, sans-serif\",\n}\n\nconst overrides = { config, colors, fonts, components }\n\nexport default extendTheme(overrides)\n","import Button from \"./button\"\nimport Input from \"./input\"\nimport Tabs from \"./tabs\"\nexport default {\n  Button,\n  Tabs,\n  Input,\n}\n","import {\n  CSSWithMultiValues,\n  RecursiveCSSObject,\n} from \"@chakra-ui/styled-system\"\nimport { Dict } from \"@chakra-ui/utils\"\nimport { transparentize } from \"@chakra-ui/theme-tools\"\n\nconst variantPrimary = (\n  props: Dict,\n): RecursiveCSSObject<CSSWithMultiValues> => {\n  const transparentColor = transparentize(\"gray.500\", 0.6)(props.theme)\n  const disableBg = transparentize(\"#cc3a59\", 0.2)(props.theme)\n  const boxShadowHover =\n    props.colorMode === \"light\"\n      ? \"0px 7px 12px rgba(68, 64, 64, 0.3)\"\n      : \"2px 2px 12px rgba(68, 64, 64, 0.14)\"\n  const disabled = {\n    opacity: \"0.8\",\n    color: transparentColor,\n    border: \"none\",\n    cursor: \"not-allowed\",\n    boxShadow: \"none\",\n    bg: disableBg,\n  }\n\n  return {\n    color: \"#000000\",\n    borderRadius: \"4px\",\n    bg: \"#cc3a59\",\n    letterSpacing: \"0.02em\",\n    fontWeight: \"700\",\n    padding: \"1px 6px\",\n    _hover: {\n      color: \"#ffffff\",\n      bg: \"#d63255\",\n      boxShadow: boxShadowHover,\n      _disabled: disabled,\n    },\n    _active: {\n      color: \"#ffffff\",\n      bg: \"#cc3a59\",\n    },\n    _disabled: disabled,\n    _focus: {\n      boxShadow: \"none\",\n    },\n  }\n}\n\nconst variantLight = (props: Dict): RecursiveCSSObject<CSSWithMultiValues> => {\n  const transparentColor = transparentize(\"gray.500\", 0.6)(props.theme)\n  const disableBg = transparentize(\"#cc3a59\", 0.2)(props.theme)\n  const boxShadowHover =\n    props.colorMode === \"light\"\n      ? \"0px 7px 12px rgba(68, 64, 64, 0.3)\"\n      : \"2px 2px 12px rgba(68, 64, 64, 0.14)\"\n  const disabled = {\n    opacity: \"1\",\n    color: transparentColor,\n    border: \"none\",\n    cursor: \"not-allowed\",\n    boxShadow: \"none\",\n    bg: disableBg,\n  }\n  return {\n    color: \"#000000\",\n    borderRadius: \"full\",\n    fontSize: \"13px\",\n    width: \"75px\",\n    letterSpacing: \"0.02em\",\n    fontWeight: \"700\",\n    padding: \"1px 6px\",\n    border: \"none\",\n    bg: \"#cc3a59\",\n    _hover: {\n      color: \"#ffffff\",\n      bg: \"#d63255\",\n      boxShadow: boxShadowHover,\n      _disabled: disabled,\n    },\n    _disabled: disabled,\n    _focus: {\n      boxShadow: \"none\",\n    },\n  }\n}\n\nconst variants = {\n  primary: variantPrimary,\n  light: variantLight,\n}\nexport default { variants }\n","import {\n  CSSWithMultiValues,\n  RecursiveCSSObject,\n} from \"@chakra-ui/styled-system\"\n\nconst variantPrimary = (): RecursiveCSSObject<CSSWithMultiValues> => {\n  return {\n    tab: {\n      borderRadius: \"full\",\n      fontWeight: \"semibold\",\n      color: \"grey\",\n      bg: \"transparent\",\n      _selected: {\n        color: \"#000000\",\n        bg: \"#cc3a59\",\n      },\n      _active: {\n        color: \"#000000\",\n        bg: \"#cc3a59\",\n      },\n      _focus: {\n        boxShadow: \"none\",\n      },\n    },\n  }\n}\nconst variants = {\n  primary: variantPrimary,\n}\nexport default { variants }\n","import {\n  CSSWithMultiValues,\n  RecursiveCSSObject,\n} from \"@chakra-ui/styled-system\"\nimport { Dict } from \"@chakra-ui/utils\"\n\nconst variantPrimary = (\n  props: Dict,\n): RecursiveCSSObject<CSSWithMultiValues> => {\n  const hasErrorColor = props.isInvalid ? \"red\" : \"green\"\n  return {\n    field: {\n      borderBottom: \"2px solid\",\n      borderColor: hasErrorColor,\n      borderRadius: 0,\n      px: 0,\n      bg: \"transparent\",\n      _readOnly: {\n        boxShadow: \"none !important\",\n        userSelect: \"all\",\n      },\n      _invalid: {\n        borderColor: \"red.300 !important\",\n        boxShadow: `0px 1px 0px 0px red`,\n      },\n      _focus: {\n        borderColor: hasErrorColor,\n        boxShadow: `0px 1px 0px 0px ${hasErrorColor}`,\n      },\n    },\n  }\n}\nconst variants = {\n  primary: variantPrimary,\n}\nexport default { variants }\n","import { configureStore, getDefaultMiddleware } from \"@reduxjs/toolkit\"\nimport { load, save } from \"redux-localstorage-simple\"\nimport user, { initialState as userInitialState } from \"./user\"\n\nimport application from \"./application\"\nimport { merge } from \"lodash\"\n\nconst PERSISTED_KEYS: string[] = [\"user\"]\nconst stateFromStorage = load({\n  states: PERSISTED_KEYS,\n})\nconst store = configureStore({\n  reducer: {\n    application,\n    user,\n  },\n  middleware: [\n    ...getDefaultMiddleware({ thunk: false }),\n    save({ states: PERSISTED_KEYS }),\n  ],\n  preloadedState: merge({}, { user: userInitialState }, stateFromStorage),\n})\n\nexport default store\n\nexport type AppState = ReturnType<typeof store.getState>\nexport type AppDispatch = typeof store.dispatch\n","import \"./index.css\"\nimport \"./i18n\"\n\nimport { ChakraProvider, ColorModeScript } from \"@chakra-ui/react\"\nimport { Web3ReactProvider, createWeb3ReactRoot } from \"@web3-react/core\"\n// import { logError, sendWebVitalsToGA } from \"./utils/googleAnalytics\"\n\nimport App from \"./pages/App\"\nimport { NetworkContextName } from \"./constants\"\nimport { Provider } from \"react-redux\"\nimport React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport { HashRouter as Router } from \"react-router-dom\"\nimport chakraTheme from \"./theme/\"\nimport getLibrary from \"./utils/getLibrary\"\nimport { getNetworkLibrary } from \"./connectors\"\n// import reportWebVitals from \"./reportWebVitals\"\nimport store from \"./state\"\n\nconst Web3ProviderNetwork = createWeb3ReactRoot(NetworkContextName)\n\nif (window && window.ethereum) {\n  window.ethereum.autoRefreshOnNetworkChange = false\n}\n\n// window.addEventListener(\"error\", logError)\n\nReactDOM.render(\n  <>\n    <ColorModeScript initialColorMode={chakraTheme.config.initialColorMode} />\n    <React.StrictMode>\n      <ChakraProvider theme={chakraTheme}>\n        <Web3ReactProvider getLibrary={getLibrary}>\n          <Web3ProviderNetwork getLibrary={getNetworkLibrary}>\n            <Provider store={store}>\n              <Router>\n                <App />\n              </Router>\n            </Provider>\n          </Web3ProviderNetwork>\n        </Web3ReactProvider>\n      </ChakraProvider>\n    </React.StrictMode>\n  </>,\n  document.getElementById(\"root\"),\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals(sendWebVitalsToGA)\n","import {\n  ExternalProvider,\n  JsonRpcFetchFunc,\n  Web3Provider,\n} from \"@ethersproject/providers\"\n\nexport default function getLibrary(\n  provider: ExternalProvider | JsonRpcFetchFunc,\n): Web3Provider {\n  const library = new Web3Provider(provider, \"any\")\n  library.pollingInterval = 15000\n  return library\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"stakeDetailsContainer\":\"StakeDetails_stakeDetailsContainer__1KAvh\",\"stakeDetails\":\"StakeDetails_stakeDetails__2_FZu\",\"icon\":\"StakeDetails_icon__2_MEW\",\"row\":\"StakeDetails_row__11zH3\",\"balanceDetails\":\"StakeDetails_balanceDetails__2VWa9\",\"balance\":\"StakeDetails_balance__1ZeHM\",\"token\":\"StakeDetails_token__1iAMP\",\"statsDetails\":\"StakeDetails_statsDetails__3Qqh-\",\"statRow\":\"StakeDetails_statRow__1VW0E\",\"title\":\"StakeDetails_title__1sH1S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"advancedOptions\":\"AdvancedOptions_advancedOptions__23aHo\",\"triangle\":\"AdvancedOptions_triangle__1UnNg\",\"upsideDown\":\"AdvancedOptions_upsideDown__1_RdT\",\"title\":\"AdvancedOptions_title__291BB\",\"divider\":\"AdvancedOptions_divider__2sJMU\",\"tableContainer\":\"AdvancedOptions_tableContainer__2y-ia\",\"parameter\":\"AdvancedOptions_parameter__2ka7t\",\"show\":\"AdvancedOptions_show__2WJpq\",\"options\":\"AdvancedOptions_options__1p5Mj\",\"inputGroup\":\"AdvancedOptions_inputGroup__-tyO2\",\"label\":\"AdvancedOptions_label__lz89u\",\"selected\":\"AdvancedOptions_selected__FSknH\",\"infiniteApproval\":\"AdvancedOptions_infiniteApproval__3HIfP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"farmsOverview\":\"FarmsOverview_farmsOverview__2ATuF\",\"container\":\"FarmsOverview_container__1J_4t\",\"row\":\"FarmsOverview_row__1trVu\",\"balanceInfo\":\"FarmsOverview_balanceInfo__2TGwi\",\"tokenBalanceText\":\"FarmsOverview_tokenBalanceText__r01g_\",\"tokenBalanceValue\":\"FarmsOverview_tokenBalanceValue__qttkP\",\"title\":\"FarmsOverview_title__-RsYJ\",\"titleBox\":\"FarmsOverview_titleBox__132G0\",\"farmDescription\":\"FarmsOverview_farmDescription__2O168\",\"farmButton\":\"FarmsOverview_farmButton__sy_Dw\",\"tag\":\"FarmsOverview_tag__1Y3pd\",\"rose\":\"FarmsOverview_rose__dcjF1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchSelect\":\"SearchSelect_searchSelect__3-dqN\",\"inputContainer\":\"SearchSelect_inputContainer__3SNHV\",\"listItem\":\"SearchSelect_listItem__1CllM\",\"isAvailable\":\"SearchSelect_isAvailable__2Em7v\",\"isActive\":\"SearchSelect_isActive__3cQyt\",\"isUnavailable\":\"SearchSelect_isUnavailable__f6IC0\",\"textMinor\":\"SearchSelect_textMinor__1IGJw\",\"tagWrapper\":\"SearchSelect_tagWrapper__Tp0fP\",\"unavailableTag\":\"SearchSelect_unavailableTag__2Y6kz\",\"virtualSwapTag\":\"SearchSelect_virtualSwapTag__1M9ds\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"stakeLockWrapper\":\"StakeLockedTimer_stakeLockWrapper__3AvoD\",\"messageWrapper\":\"StakeLockedTimer_messageWrapper__idpXI\",\"status\":\"StakeLockedTimer_status__14r73\",\"title\":\"StakeLockedTimer_title__N4LUS\",\"locked\":\"StakeLockedTimer_locked__2Nsqh\",\"unlocked\":\"StakeLockedTimer_unlocked__2D97x\",\"stakeLockTimer\":\"StakeLockedTimer_stakeLockTimer__3y34S\",\"lockMessage\":\"StakeLockedTimer_lockMessage__34GKS\",\"timeUnits\":\"StakeLockedTimer_timeUnits__2CQ5U\",\"timeLeft\":\"StakeLockedTimer_timeLeft__aFKxx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"stakePage\":\"StakePage_stakePage__2zyVB\",\"stakeForm\":\"StakePage_stakeForm__ttlR0\",\"pill\":\"StakePage_pill__Wrgvs\",\"colorPill\":\"StakePage_colorPill__3oRte\",\"glowPill\":\"StakePage_glowPill__1utNw\",\"Gradient\":\"StakePage_Gradient__FJxBY\",\"row\":\"StakePage_row__3UjyW\",\"stakeTitle\":\"StakePage_stakeTitle__1IMYG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"swapInputContainer\":\"SwapInput_swapInputContainer__3fcf9\",\"selectGroup\":\"SwapInput_selectGroup__1KYi9\",\"hoverPointer\":\"SwapInput_hoverPointer__3yvrh\",\"tokenNameContainer\":\"SwapInput_tokenNameContainer__2Iyjl\",\"symbolArrowContainer\":\"SwapInput_symbolArrowContainer__3wOaO\",\"inputGroup\":\"SwapInput_inputGroup__1Vc_5\",\"focusable\":\"SwapInput_focusable__3YuxK\",\"textBoldPurple\":\"SwapInput_textBoldPurple__1SxCI\",\"dropdownContainer\":\"SwapInput_dropdownContainer__1LBIm\",\"textMinor\":\"SwapInput_textMinor__3CFpR\"};"],"sourceRoot":""}